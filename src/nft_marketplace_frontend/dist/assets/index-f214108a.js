var Lc=Object.defineProperty;var Xc=(t,e,r)=>e in t?Lc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Os=(t,e,r)=>(Xc(t,typeof e!="symbol"?e+"":e,r),r),Fs=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var $s=(t,e,r)=>(Fs(t,e,"read from private field"),r?r.call(t):e.get(t)),Ii=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)};var Ri=(t,e,r)=>(Fs(t,e,"access private method"),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const f of o.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Ui;const Dn=window,$r=Dn.trustedTypes,Ps=$r?$r.createPolicy("lit-html",{createHTML:t=>t}):void 0,Xi="$lit$",Jt=`lit$${(Math.random()+"").slice(9)}$`,Fo="?"+Jt,Jc=`<${Fo}>`,yr=document,en=()=>yr.createComment(""),tn=t=>t===null||typeof t!="object"&&typeof t!="function",$o=Array.isArray,Qc=t=>$o(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",Oi=`[ 	
\f\r]`,jr=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Ms=/-->/g,ks=/>/g,ir=RegExp(`>|${Oi}(?:([^\\s"'>=/]+)(${Oi}*=${Oi}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Cs=/'/g,qs=/"/g,Po=/^(?:script|style|textarea|title)$/i,Dc=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),eu=Dc(1),rn=Symbol.for("lit-noChange"),Je=Symbol.for("lit-nothing"),Vs=new WeakMap,hr=yr.createTreeWalker(yr,129,null,!1);function Mo(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Ps!==void 0?Ps.createHTML(e):e}const tu=(t,e)=>{const r=t.length-1,n=[];let i,o=e===2?"<svg>":"",f=jr;for(let u=0;u<r;u++){const p=t[u];let w,E,T=-1,I=0;for(;I<p.length&&(f.lastIndex=I,E=f.exec(p),E!==null);)I=f.lastIndex,f===jr?E[1]==="!--"?f=Ms:E[1]!==void 0?f=ks:E[2]!==void 0?(Po.test(E[2])&&(i=RegExp("</"+E[2],"g")),f=ir):E[3]!==void 0&&(f=ir):f===ir?E[0]===">"?(f=i??jr,T=-1):E[1]===void 0?T=-2:(T=f.lastIndex-E[2].length,w=E[1],f=E[3]===void 0?ir:E[3]==='"'?qs:Cs):f===qs||f===Cs?f=ir:f===Ms||f===ks?f=jr:(f=ir,i=void 0);const v=f===ir&&t[u+1].startsWith("/>")?" ":"";o+=f===jr?p+Jc:T>=0?(n.push(w),p.slice(0,T)+Xi+p.slice(T)+Jt+v):p+Jt+(T===-2?(n.push(void 0),u):v)}return[Mo(t,o+(t[r]||"<?>")+(e===2?"</svg>":"")),n]};class nn{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let o=0,f=0;const u=e.length-1,p=this.parts,[w,E]=tu(e,r);if(this.el=nn.createElement(w,n),hr.currentNode=this.el.content,r===2){const T=this.el.content,I=T.firstChild;I.remove(),T.append(...I.childNodes)}for(;(i=hr.nextNode())!==null&&p.length<u;){if(i.nodeType===1){if(i.hasAttributes()){const T=[];for(const I of i.getAttributeNames())if(I.endsWith(Xi)||I.startsWith(Jt)){const v=E[f++];if(T.push(I),v!==void 0){const g=i.getAttribute(v.toLowerCase()+Xi).split(Jt),k=/([.?@])?(.*)/.exec(v);p.push({type:1,index:o,name:k[2],strings:g,ctor:k[1]==="."?nu:k[1]==="?"?su:k[1]==="@"?ou:li})}else p.push({type:6,index:o})}for(const I of T)i.removeAttribute(I)}if(Po.test(i.tagName)){const T=i.textContent.split(Jt),I=T.length-1;if(I>0){i.textContent=$r?$r.emptyScript:"";for(let v=0;v<I;v++)i.append(T[v],en()),hr.nextNode(),p.push({type:2,index:++o});i.append(T[I],en())}}}else if(i.nodeType===8)if(i.data===Fo)p.push({type:2,index:o});else{let T=-1;for(;(T=i.data.indexOf(Jt,T+1))!==-1;)p.push({type:7,index:o}),T+=Jt.length-1}o++}}static createElement(e,r){const n=yr.createElement("template");return n.innerHTML=e,n}}function Pr(t,e,r=t,n){var i,o,f,u;if(e===rn)return e;let p=n!==void 0?(i=r._$Co)===null||i===void 0?void 0:i[n]:r._$Cl;const w=tn(e)?void 0:e._$litDirective$;return(p==null?void 0:p.constructor)!==w&&((o=p==null?void 0:p._$AO)===null||o===void 0||o.call(p,!1),w===void 0?p=void 0:(p=new w(t),p._$AT(t,r,n)),n!==void 0?((f=(u=r)._$Co)!==null&&f!==void 0?f:u._$Co=[])[n]=p:r._$Cl=p),p!==void 0&&(e=Pr(t,p._$AS(t,e.values),p,n)),e}class ru{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var r;const{el:{content:n},parts:i}=this._$AD,o=((r=e==null?void 0:e.creationScope)!==null&&r!==void 0?r:yr).importNode(n,!0);hr.currentNode=o;let f=hr.nextNode(),u=0,p=0,w=i[0];for(;w!==void 0;){if(u===w.index){let E;w.type===2?E=new fn(f,f.nextSibling,this,e):w.type===1?E=new w.ctor(f,w.name,w.strings,this,e):w.type===6&&(E=new au(f,this,e)),this._$AV.push(E),w=i[++p]}u!==(w==null?void 0:w.index)&&(f=hr.nextNode(),u++)}return hr.currentNode=yr,o}v(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class fn{constructor(e,r,n,i){var o;this.type=2,this._$AH=Je,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cp=(o=i==null?void 0:i.isConnected)===null||o===void 0||o}get _$AU(){var e,r;return(r=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&r!==void 0?r:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Pr(this,e,r),tn(e)?e===Je||e==null||e===""?(this._$AH!==Je&&this._$AR(),this._$AH=Je):e!==this._$AH&&e!==rn&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):Qc(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==Je&&tn(this._$AH)?this._$AA.nextSibling.data=e:this.$(yr.createTextNode(e)),this._$AH=e}g(e){var r;const{values:n,_$litType$:i}=e,o=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=nn.createElement(Mo(i.h,i.h[0]),this.options)),i);if(((r=this._$AH)===null||r===void 0?void 0:r._$AD)===o)this._$AH.v(n);else{const f=new ru(o,this),u=f.u(this.options);f.v(n),this.$(u),this._$AH=f}}_$AC(e){let r=Vs.get(e.strings);return r===void 0&&Vs.set(e.strings,r=new nn(e)),r}T(e){$o(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const o of e)i===r.length?r.push(n=new fn(this.k(en()),this.k(en()),this,this.options)):n=r[i],n._$AI(o),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,r);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var r;this._$AM===void 0&&(this._$Cp=e,(r=this._$AP)===null||r===void 0||r.call(this,e))}}class li{constructor(e,r,n,i,o){this.type=1,this._$AH=Je,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=o,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Je}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,r=this,n,i){const o=this.strings;let f=!1;if(o===void 0)e=Pr(this,e,r,0),f=!tn(e)||e!==this._$AH&&e!==rn,f&&(this._$AH=e);else{const u=e;let p,w;for(e=o[0],p=0;p<o.length-1;p++)w=Pr(this,u[n+p],r,p),w===rn&&(w=this._$AH[p]),f||(f=!tn(w)||w!==this._$AH[p]),w===Je?e=Je:e!==Je&&(e+=(w??"")+o[p+1]),this._$AH[p]=w}f&&!i&&this.j(e)}j(e){e===Je?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class nu extends li{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Je?void 0:e}}const iu=$r?$r.emptyScript:"";class su extends li{constructor(){super(...arguments),this.type=4}j(e){e&&e!==Je?this.element.setAttribute(this.name,iu):this.element.removeAttribute(this.name)}}class ou extends li{constructor(e,r,n,i,o){super(e,r,n,i,o),this.type=5}_$AI(e,r=this){var n;if((e=(n=Pr(this,e,r,0))!==null&&n!==void 0?n:Je)===rn)return;const i=this._$AH,o=e===Je&&i!==Je||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,f=e!==Je&&(i===Je||o);o&&this.element.removeEventListener(this.name,this,i),f&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r,n;typeof this._$AH=="function"?this._$AH.call((n=(r=this.options)===null||r===void 0?void 0:r.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}}class au{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Pr(this,e)}}const Gs=Dn.litHtmlPolyfillSupport;Gs==null||Gs(nn,fn),((Ui=Dn.litHtmlVersions)!==null&&Ui!==void 0?Ui:Dn.litHtmlVersions=[]).push("2.8.0");const cu=(t,e,r)=>{var n,i;const o=(n=r==null?void 0:r.renderBefore)!==null&&n!==void 0?n:e;let f=o._$litPart$;if(f===void 0){const u=(i=r==null?void 0:r.renderBefore)!==null&&i!==void 0?i:null;o._$litPart$=f=new fn(e.insertBefore(en(),u),u,void 0,r??{})}return f._$AI(t),f};var Mr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ko={},ln={};ln.byteLength=hu;ln.toByteArray=pu;ln.fromByteArray=wu;var Ut=[],lt=[],fu=typeof Uint8Array<"u"?Uint8Array:Array,Fi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var _r=0,lu=Fi.length;_r<lu;++_r)Ut[_r]=Fi[_r],lt[Fi.charCodeAt(_r)]=_r;lt["-".charCodeAt(0)]=62;lt["_".charCodeAt(0)]=63;function Co(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function hu(t){var e=Co(t),r=e[0],n=e[1];return(r+n)*3/4-n}function du(t,e,r){return(e+r)*3/4-r}function pu(t){var e,r=Co(t),n=r[0],i=r[1],o=new fu(du(t,n,i)),f=0,u=i>0?n-4:n,p;for(p=0;p<u;p+=4)e=lt[t.charCodeAt(p)]<<18|lt[t.charCodeAt(p+1)]<<12|lt[t.charCodeAt(p+2)]<<6|lt[t.charCodeAt(p+3)],o[f++]=e>>16&255,o[f++]=e>>8&255,o[f++]=e&255;return i===2&&(e=lt[t.charCodeAt(p)]<<2|lt[t.charCodeAt(p+1)]>>4,o[f++]=e&255),i===1&&(e=lt[t.charCodeAt(p)]<<10|lt[t.charCodeAt(p+1)]<<4|lt[t.charCodeAt(p+2)]>>2,o[f++]=e>>8&255,o[f++]=e&255),o}function yu(t){return Ut[t>>18&63]+Ut[t>>12&63]+Ut[t>>6&63]+Ut[t&63]}function gu(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(yu(n));return i.join("")}function wu(t){for(var e,r=t.length,n=r%3,i=[],o=16383,f=0,u=r-n;f<u;f+=o)i.push(gu(t,f,f+o>u?u:f+o));return n===1?(e=t[r-1],i.push(Ut[e>>2]+Ut[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Ut[e>>10]+Ut[e>>4&63]+Ut[e<<2&63]+"=")),i.join("")}var hn={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */hn.read=function(t,e,r,n,i){var o,f,u=i*8-n-1,p=(1<<u)-1,w=p>>1,E=-7,T=r?i-1:0,I=r?-1:1,v=t[e+T];for(T+=I,o=v&(1<<-E)-1,v>>=-E,E+=u;E>0;o=o*256+t[e+T],T+=I,E-=8);for(f=o&(1<<-E)-1,o>>=-E,E+=n;E>0;f=f*256+t[e+T],T+=I,E-=8);if(o===0)o=1-w;else{if(o===p)return f?NaN:(v?-1:1)*(1/0);f=f+Math.pow(2,n),o=o-w}return(v?-1:1)*f*Math.pow(2,o-n)};hn.write=function(t,e,r,n,i,o){var f,u,p,w=o*8-i-1,E=(1<<w)-1,T=E>>1,I=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=n?0:o-1,g=n?1:-1,k=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,f=E):(f=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-f))<1&&(f--,p*=2),f+T>=1?e+=I/p:e+=I*Math.pow(2,1-T),e*p>=2&&(f++,p/=2),f+T>=E?(u=0,f=E):f+T>=1?(u=(e*p-1)*Math.pow(2,i),f=f+T):(u=e*Math.pow(2,T-1)*Math.pow(2,i),f=0));i>=8;t[r+v]=u&255,v+=g,u/=256,i-=8);for(f=f<<i|u,w+=i;w>0;t[r+v]=f&255,v+=g,f/=256,w-=8);t[r+v-g]|=k*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=ln,r=hn,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=Y,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=o(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const d=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(d,c),d.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function f(d){if(d>i)throw new RangeError('The value "'+d+'" is invalid for option "size"');const c=new Uint8Array(d);return Object.setPrototypeOf(c,u.prototype),c}function u(d,c,l){if(typeof d=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return T(d)}return p(d,c,l)}u.poolSize=8192;function p(d,c,l){if(typeof d=="string")return I(d,c);if(ArrayBuffer.isView(d))return g(d);if(d==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(V(d,ArrayBuffer)||d&&V(d.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(V(d,SharedArrayBuffer)||d&&V(d.buffer,SharedArrayBuffer)))return k(d,c,l);if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const A=d.valueOf&&d.valueOf();if(A!=null&&A!==d)return u.from(A,c,l);const F=C(d);if(F)return F;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof d[Symbol.toPrimitive]=="function")return u.from(d[Symbol.toPrimitive]("string"),c,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d)}u.from=function(d,c,l){return p(d,c,l)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function w(d){if(typeof d!="number")throw new TypeError('"size" argument must be of type number');if(d<0)throw new RangeError('The value "'+d+'" is invalid for option "size"')}function E(d,c,l){return w(d),d<=0?f(d):c!==void 0?typeof l=="string"?f(d).fill(c,l):f(d).fill(c):f(d)}u.alloc=function(d,c,l){return E(d,c,l)};function T(d){return w(d),f(d<0?0:Z(d)|0)}u.allocUnsafe=function(d){return T(d)},u.allocUnsafeSlow=function(d){return T(d)};function I(d,c){if((typeof c!="string"||c==="")&&(c="utf8"),!u.isEncoding(c))throw new TypeError("Unknown encoding: "+c);const l=q(d,c)|0;let A=f(l);const F=A.write(d,c);return F!==l&&(A=A.slice(0,F)),A}function v(d){const c=d.length<0?0:Z(d.length)|0,l=f(c);for(let A=0;A<c;A+=1)l[A]=d[A]&255;return l}function g(d){if(V(d,Uint8Array)){const c=new Uint8Array(d);return k(c.buffer,c.byteOffset,c.byteLength)}return v(d)}function k(d,c,l){if(c<0||d.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<c+(l||0))throw new RangeError('"length" is outside of buffer bounds');let A;return c===void 0&&l===void 0?A=new Uint8Array(d):l===void 0?A=new Uint8Array(d,c):A=new Uint8Array(d,c,l),Object.setPrototypeOf(A,u.prototype),A}function C(d){if(u.isBuffer(d)){const c=Z(d.length)|0,l=f(c);return l.length===0||d.copy(l,0,0,c),l}if(d.length!==void 0)return typeof d.length!="number"||ne(d.length)?f(0):v(d);if(d.type==="Buffer"&&Array.isArray(d.data))return v(d.data)}function Z(d){if(d>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return d|0}function Y(d){return+d!=d&&(d=0),u.alloc(+d)}u.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==u.prototype},u.compare=function(c,l){if(V(c,Uint8Array)&&(c=u.from(c,c.offset,c.byteLength)),V(l,Uint8Array)&&(l=u.from(l,l.offset,l.byteLength)),!u.isBuffer(c)||!u.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===l)return 0;let A=c.length,F=l.length;for(let z=0,j=Math.min(A,F);z<j;++z)if(c[z]!==l[z]){A=c[z],F=l[z];break}return A<F?-1:F<A?1:0},u.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(c,l){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return u.alloc(0);let A;if(l===void 0)for(l=0,A=0;A<c.length;++A)l+=c[A].length;const F=u.allocUnsafe(l);let z=0;for(A=0;A<c.length;++A){let j=c[A];if(V(j,Uint8Array))z+j.length>F.length?(u.isBuffer(j)||(j=u.from(j)),j.copy(F,z)):Uint8Array.prototype.set.call(F,j,z);else if(u.isBuffer(j))j.copy(F,z);else throw new TypeError('"list" argument must be an Array of Buffers');z+=j.length}return F};function q(d,c){if(u.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||V(d,ArrayBuffer))return d.byteLength;if(typeof d!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof d);const l=d.length,A=arguments.length>2&&arguments[2]===!0;if(!A&&l===0)return 0;let F=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return s(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return _(d).length;default:if(F)return A?-1:s(d).length;c=(""+c).toLowerCase(),F=!0}}u.byteLength=q;function re(d,c,l){let A=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,c>>>=0,l<=c))return"";for(d||(d="utf8");;)switch(d){case"hex":return ie(this,c,l);case"utf8":case"utf-8":return O(this,c,l);case"ascii":return G(this,c,l);case"latin1":case"binary":return X(this,c,l);case"base64":return N(this,c,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,c,l);default:if(A)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),A=!0}}u.prototype._isBuffer=!0;function $(d,c,l){const A=d[c];d[c]=d[l],d[l]=A}u.prototype.swap16=function(){const c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<c;l+=2)$(this,l,l+1);return this},u.prototype.swap32=function(){const c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<c;l+=4)$(this,l,l+3),$(this,l+1,l+2);return this},u.prototype.swap64=function(){const c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<c;l+=8)$(this,l,l+7),$(this,l+1,l+6),$(this,l+2,l+5),$(this,l+3,l+4);return this},u.prototype.toString=function(){const c=this.length;return c===0?"":arguments.length===0?O(this,0,c):re.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(c){if(!u.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:u.compare(this,c)===0},u.prototype.inspect=function(){let c="";const l=t.INSPECT_MAX_BYTES;return c=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(c+=" ... "),"<Buffer "+c+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(c,l,A,F,z){if(V(c,Uint8Array)&&(c=u.from(c,c.offset,c.byteLength)),!u.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(l===void 0&&(l=0),A===void 0&&(A=c?c.length:0),F===void 0&&(F=0),z===void 0&&(z=this.length),l<0||A>c.length||F<0||z>this.length)throw new RangeError("out of range index");if(F>=z&&l>=A)return 0;if(F>=z)return-1;if(l>=A)return 1;if(l>>>=0,A>>>=0,F>>>=0,z>>>=0,this===c)return 0;let j=z-F,_e=A-l;const ve=Math.min(j,_e),Ee=this.slice(F,z),be=c.slice(l,A);for(let Re=0;Re<ve;++Re)if(Ee[Re]!==be[Re]){j=Ee[Re],_e=be[Re];break}return j<_e?-1:_e<j?1:0};function L(d,c,l,A,F){if(d.length===0)return-1;if(typeof l=="string"?(A=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,ne(l)&&(l=F?0:d.length-1),l<0&&(l=d.length+l),l>=d.length){if(F)return-1;l=d.length-1}else if(l<0)if(F)l=0;else return-1;if(typeof c=="string"&&(c=u.from(c,A)),u.isBuffer(c))return c.length===0?-1:K(d,c,l,A,F);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?F?Uint8Array.prototype.indexOf.call(d,c,l):Uint8Array.prototype.lastIndexOf.call(d,c,l):K(d,[c],l,A,F);throw new TypeError("val must be string, number or Buffer")}function K(d,c,l,A,F){let z=1,j=d.length,_e=c.length;if(A!==void 0&&(A=String(A).toLowerCase(),A==="ucs2"||A==="ucs-2"||A==="utf16le"||A==="utf-16le")){if(d.length<2||c.length<2)return-1;z=2,j/=2,_e/=2,l/=2}function ve(be,Re){return z===1?be[Re]:be.readUInt16BE(Re*z)}let Ee;if(F){let be=-1;for(Ee=l;Ee<j;Ee++)if(ve(d,Ee)===ve(c,be===-1?0:Ee-be)){if(be===-1&&(be=Ee),Ee-be+1===_e)return be*z}else be!==-1&&(Ee-=Ee-be),be=-1}else for(l+_e>j&&(l=j-_e),Ee=l;Ee>=0;Ee--){let be=!0;for(let Re=0;Re<_e;Re++)if(ve(d,Ee+Re)!==ve(c,Re)){be=!1;break}if(be)return Ee}return-1}u.prototype.includes=function(c,l,A){return this.indexOf(c,l,A)!==-1},u.prototype.indexOf=function(c,l,A){return L(this,c,l,A,!0)},u.prototype.lastIndexOf=function(c,l,A){return L(this,c,l,A,!1)};function Q(d,c,l,A){l=Number(l)||0;const F=d.length-l;A?(A=Number(A),A>F&&(A=F)):A=F;const z=c.length;A>z/2&&(A=z/2);let j;for(j=0;j<A;++j){const _e=parseInt(c.substr(j*2,2),16);if(ne(_e))return j;d[l+j]=_e}return j}function D(d,c,l,A){return S(s(c,d.length-l),d,l,A)}function J(d,c,l,A){return S(a(c),d,l,A)}function he(d,c,l,A){return S(_(c),d,l,A)}function le(d,c,l,A){return S(y(c,d.length-l),d,l,A)}u.prototype.write=function(c,l,A,F){if(l===void 0)F="utf8",A=this.length,l=0;else if(A===void 0&&typeof l=="string")F=l,A=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(A)?(A=A>>>0,F===void 0&&(F="utf8")):(F=A,A=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const z=this.length-l;if((A===void 0||A>z)&&(A=z),c.length>0&&(A<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");F||(F="utf8");let j=!1;for(;;)switch(F){case"hex":return Q(this,c,l,A);case"utf8":case"utf-8":return D(this,c,l,A);case"ascii":case"latin1":case"binary":return J(this,c,l,A);case"base64":return he(this,c,l,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,c,l,A);default:if(j)throw new TypeError("Unknown encoding: "+F);F=(""+F).toLowerCase(),j=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function N(d,c,l){return c===0&&l===d.length?e.fromByteArray(d):e.fromByteArray(d.slice(c,l))}function O(d,c,l){l=Math.min(d.length,l);const A=[];let F=c;for(;F<l;){const z=d[F];let j=null,_e=z>239?4:z>223?3:z>191?2:1;if(F+_e<=l){let ve,Ee,be,Re;switch(_e){case 1:z<128&&(j=z);break;case 2:ve=d[F+1],(ve&192)===128&&(Re=(z&31)<<6|ve&63,Re>127&&(j=Re));break;case 3:ve=d[F+1],Ee=d[F+2],(ve&192)===128&&(Ee&192)===128&&(Re=(z&15)<<12|(ve&63)<<6|Ee&63,Re>2047&&(Re<55296||Re>57343)&&(j=Re));break;case 4:ve=d[F+1],Ee=d[F+2],be=d[F+3],(ve&192)===128&&(Ee&192)===128&&(be&192)===128&&(Re=(z&15)<<18|(ve&63)<<12|(Ee&63)<<6|be&63,Re>65535&&Re<1114112&&(j=Re))}}j===null?(j=65533,_e=1):j>65535&&(j-=65536,A.push(j>>>10&1023|55296),j=56320|j&1023),A.push(j),F+=_e}return H(A)}const W=4096;function H(d){const c=d.length;if(c<=W)return String.fromCharCode.apply(String,d);let l="",A=0;for(;A<c;)l+=String.fromCharCode.apply(String,d.slice(A,A+=W));return l}function G(d,c,l){let A="";l=Math.min(d.length,l);for(let F=c;F<l;++F)A+=String.fromCharCode(d[F]&127);return A}function X(d,c,l){let A="";l=Math.min(d.length,l);for(let F=c;F<l;++F)A+=String.fromCharCode(d[F]);return A}function ie(d,c,l){const A=d.length;(!c||c<0)&&(c=0),(!l||l<0||l>A)&&(l=A);let F="";for(let z=c;z<l;++z)F+=pe[d[z]];return F}function we(d,c,l){const A=d.slice(c,l);let F="";for(let z=0;z<A.length-1;z+=2)F+=String.fromCharCode(A[z]+A[z+1]*256);return F}u.prototype.slice=function(c,l){const A=this.length;c=~~c,l=l===void 0?A:~~l,c<0?(c+=A,c<0&&(c=0)):c>A&&(c=A),l<0?(l+=A,l<0&&(l=0)):l>A&&(l=A),l<c&&(l=c);const F=this.subarray(c,l);return Object.setPrototypeOf(F,u.prototype),F};function oe(d,c,l){if(d%1!==0||d<0)throw new RangeError("offset is not uint");if(d+c>l)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(c,l,A){c=c>>>0,l=l>>>0,A||oe(c,l,this.length);let F=this[c],z=1,j=0;for(;++j<l&&(z*=256);)F+=this[c+j]*z;return F},u.prototype.readUintBE=u.prototype.readUIntBE=function(c,l,A){c=c>>>0,l=l>>>0,A||oe(c,l,this.length);let F=this[c+--l],z=1;for(;l>0&&(z*=256);)F+=this[c+--l]*z;return F},u.prototype.readUint8=u.prototype.readUInt8=function(c,l){return c=c>>>0,l||oe(c,1,this.length),this[c]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(c,l){return c=c>>>0,l||oe(c,2,this.length),this[c]|this[c+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(c,l){return c=c>>>0,l||oe(c,2,this.length),this[c]<<8|this[c+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(c,l){return c=c>>>0,l||oe(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(c,l){return c=c>>>0,l||oe(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},u.prototype.readBigUInt64LE=ye(function(c){c=c>>>0,P(c,"offset");const l=this[c],A=this[c+7];(l===void 0||A===void 0)&&U(c,this.length-8);const F=l+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,z=this[++c]+this[++c]*2**8+this[++c]*2**16+A*2**24;return BigInt(F)+(BigInt(z)<<BigInt(32))}),u.prototype.readBigUInt64BE=ye(function(c){c=c>>>0,P(c,"offset");const l=this[c],A=this[c+7];(l===void 0||A===void 0)&&U(c,this.length-8);const F=l*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],z=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+A;return(BigInt(F)<<BigInt(32))+BigInt(z)}),u.prototype.readIntLE=function(c,l,A){c=c>>>0,l=l>>>0,A||oe(c,l,this.length);let F=this[c],z=1,j=0;for(;++j<l&&(z*=256);)F+=this[c+j]*z;return z*=128,F>=z&&(F-=Math.pow(2,8*l)),F},u.prototype.readIntBE=function(c,l,A){c=c>>>0,l=l>>>0,A||oe(c,l,this.length);let F=l,z=1,j=this[c+--F];for(;F>0&&(z*=256);)j+=this[c+--F]*z;return z*=128,j>=z&&(j-=Math.pow(2,8*l)),j},u.prototype.readInt8=function(c,l){return c=c>>>0,l||oe(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},u.prototype.readInt16LE=function(c,l){c=c>>>0,l||oe(c,2,this.length);const A=this[c]|this[c+1]<<8;return A&32768?A|4294901760:A},u.prototype.readInt16BE=function(c,l){c=c>>>0,l||oe(c,2,this.length);const A=this[c+1]|this[c]<<8;return A&32768?A|4294901760:A},u.prototype.readInt32LE=function(c,l){return c=c>>>0,l||oe(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},u.prototype.readInt32BE=function(c,l){return c=c>>>0,l||oe(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},u.prototype.readBigInt64LE=ye(function(c){c=c>>>0,P(c,"offset");const l=this[c],A=this[c+7];(l===void 0||A===void 0)&&U(c,this.length-8);const F=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(A<<24);return(BigInt(F)<<BigInt(32))+BigInt(l+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)}),u.prototype.readBigInt64BE=ye(function(c){c=c>>>0,P(c,"offset");const l=this[c],A=this[c+7];(l===void 0||A===void 0)&&U(c,this.length-8);const F=(l<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(F)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+A)}),u.prototype.readFloatLE=function(c,l){return c=c>>>0,l||oe(c,4,this.length),r.read(this,c,!0,23,4)},u.prototype.readFloatBE=function(c,l){return c=c>>>0,l||oe(c,4,this.length),r.read(this,c,!1,23,4)},u.prototype.readDoubleLE=function(c,l){return c=c>>>0,l||oe(c,8,this.length),r.read(this,c,!0,52,8)},u.prototype.readDoubleBE=function(c,l){return c=c>>>0,l||oe(c,8,this.length),r.read(this,c,!1,52,8)};function fe(d,c,l,A,F,z){if(!u.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>F||c<z)throw new RangeError('"value" argument is out of bounds');if(l+A>d.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(c,l,A,F){if(c=+c,l=l>>>0,A=A>>>0,!F){const _e=Math.pow(2,8*A)-1;fe(this,c,l,A,_e,0)}let z=1,j=0;for(this[l]=c&255;++j<A&&(z*=256);)this[l+j]=c/z&255;return l+A},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(c,l,A,F){if(c=+c,l=l>>>0,A=A>>>0,!F){const _e=Math.pow(2,8*A)-1;fe(this,c,l,A,_e,0)}let z=A-1,j=1;for(this[l+z]=c&255;--z>=0&&(j*=256);)this[l+z]=c/j&255;return l+A},u.prototype.writeUint8=u.prototype.writeUInt8=function(c,l,A){return c=+c,l=l>>>0,A||fe(this,c,l,1,255,0),this[l]=c&255,l+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(c,l,A){return c=+c,l=l>>>0,A||fe(this,c,l,2,65535,0),this[l]=c&255,this[l+1]=c>>>8,l+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(c,l,A){return c=+c,l=l>>>0,A||fe(this,c,l,2,65535,0),this[l]=c>>>8,this[l+1]=c&255,l+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(c,l,A){return c=+c,l=l>>>0,A||fe(this,c,l,4,4294967295,0),this[l+3]=c>>>24,this[l+2]=c>>>16,this[l+1]=c>>>8,this[l]=c&255,l+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(c,l,A){return c=+c,l=l>>>0,A||fe(this,c,l,4,4294967295,0),this[l]=c>>>24,this[l+1]=c>>>16,this[l+2]=c>>>8,this[l+3]=c&255,l+4};function ee(d,c,l,A,F){B(c,A,F,d,l,7);let z=Number(c&BigInt(4294967295));d[l++]=z,z=z>>8,d[l++]=z,z=z>>8,d[l++]=z,z=z>>8,d[l++]=z;let j=Number(c>>BigInt(32)&BigInt(4294967295));return d[l++]=j,j=j>>8,d[l++]=j,j=j>>8,d[l++]=j,j=j>>8,d[l++]=j,l}function m(d,c,l,A,F){B(c,A,F,d,l,7);let z=Number(c&BigInt(4294967295));d[l+7]=z,z=z>>8,d[l+6]=z,z=z>>8,d[l+5]=z,z=z>>8,d[l+4]=z;let j=Number(c>>BigInt(32)&BigInt(4294967295));return d[l+3]=j,j=j>>8,d[l+2]=j,j=j>>8,d[l+1]=j,j=j>>8,d[l]=j,l+8}u.prototype.writeBigUInt64LE=ye(function(c,l=0){return ee(this,c,l,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=ye(function(c,l=0){return m(this,c,l,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(c,l,A,F){if(c=+c,l=l>>>0,!F){const ve=Math.pow(2,8*A-1);fe(this,c,l,A,ve-1,-ve)}let z=0,j=1,_e=0;for(this[l]=c&255;++z<A&&(j*=256);)c<0&&_e===0&&this[l+z-1]!==0&&(_e=1),this[l+z]=(c/j>>0)-_e&255;return l+A},u.prototype.writeIntBE=function(c,l,A,F){if(c=+c,l=l>>>0,!F){const ve=Math.pow(2,8*A-1);fe(this,c,l,A,ve-1,-ve)}let z=A-1,j=1,_e=0;for(this[l+z]=c&255;--z>=0&&(j*=256);)c<0&&_e===0&&this[l+z+1]!==0&&(_e=1),this[l+z]=(c/j>>0)-_e&255;return l+A},u.prototype.writeInt8=function(c,l,A){return c=+c,l=l>>>0,A||fe(this,c,l,1,127,-128),c<0&&(c=255+c+1),this[l]=c&255,l+1},u.prototype.writeInt16LE=function(c,l,A){return c=+c,l=l>>>0,A||fe(this,c,l,2,32767,-32768),this[l]=c&255,this[l+1]=c>>>8,l+2},u.prototype.writeInt16BE=function(c,l,A){return c=+c,l=l>>>0,A||fe(this,c,l,2,32767,-32768),this[l]=c>>>8,this[l+1]=c&255,l+2},u.prototype.writeInt32LE=function(c,l,A){return c=+c,l=l>>>0,A||fe(this,c,l,4,2147483647,-2147483648),this[l]=c&255,this[l+1]=c>>>8,this[l+2]=c>>>16,this[l+3]=c>>>24,l+4},u.prototype.writeInt32BE=function(c,l,A){return c=+c,l=l>>>0,A||fe(this,c,l,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[l]=c>>>24,this[l+1]=c>>>16,this[l+2]=c>>>8,this[l+3]=c&255,l+4},u.prototype.writeBigInt64LE=ye(function(c,l=0){return ee(this,c,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=ye(function(c,l=0){return m(this,c,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function se(d,c,l,A,F,z){if(l+A>d.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function ue(d,c,l,A,F){return c=+c,l=l>>>0,F||se(d,c,l,4),r.write(d,c,l,A,23,4),l+4}u.prototype.writeFloatLE=function(c,l,A){return ue(this,c,l,!0,A)},u.prototype.writeFloatBE=function(c,l,A){return ue(this,c,l,!1,A)};function de(d,c,l,A,F){return c=+c,l=l>>>0,F||se(d,c,l,8),r.write(d,c,l,A,52,8),l+8}u.prototype.writeDoubleLE=function(c,l,A){return de(this,c,l,!0,A)},u.prototype.writeDoubleBE=function(c,l,A){return de(this,c,l,!1,A)},u.prototype.copy=function(c,l,A,F){if(!u.isBuffer(c))throw new TypeError("argument should be a Buffer");if(A||(A=0),!F&&F!==0&&(F=this.length),l>=c.length&&(l=c.length),l||(l=0),F>0&&F<A&&(F=A),F===A||c.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(A<0||A>=this.length)throw new RangeError("Index out of range");if(F<0)throw new RangeError("sourceEnd out of bounds");F>this.length&&(F=this.length),c.length-l<F-A&&(F=c.length-l+A);const z=F-A;return this===c&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(l,A,F):Uint8Array.prototype.set.call(c,this.subarray(A,F),l),z},u.prototype.fill=function(c,l,A,F){if(typeof c=="string"){if(typeof l=="string"?(F=l,l=0,A=this.length):typeof A=="string"&&(F=A,A=this.length),F!==void 0&&typeof F!="string")throw new TypeError("encoding must be a string");if(typeof F=="string"&&!u.isEncoding(F))throw new TypeError("Unknown encoding: "+F);if(c.length===1){const j=c.charCodeAt(0);(F==="utf8"&&j<128||F==="latin1")&&(c=j)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(l<0||this.length<l||this.length<A)throw new RangeError("Out of range index");if(A<=l)return this;l=l>>>0,A=A===void 0?this.length:A>>>0,c||(c=0);let z;if(typeof c=="number")for(z=l;z<A;++z)this[z]=c;else{const j=u.isBuffer(c)?c:u.from(c,F),_e=j.length;if(_e===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(z=0;z<A-l;++z)this[z+l]=j[z%_e]}return this};const te={};function ae(d,c,l){te[d]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${d}]`,this.stack,delete this.name}get code(){return d}set code(F){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:F,writable:!0})}toString(){return`${this.name} [${d}]: ${this.message}`}}}ae("ERR_BUFFER_OUT_OF_BOUNDS",function(d){return d?`${d} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ae("ERR_INVALID_ARG_TYPE",function(d,c){return`The "${d}" argument must be of type number. Received type ${typeof c}`},TypeError),ae("ERR_OUT_OF_RANGE",function(d,c,l){let A=`The value of "${d}" is out of range.`,F=l;return Number.isInteger(l)&&Math.abs(l)>2**32?F=b(String(l)):typeof l=="bigint"&&(F=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(F=b(F)),F+="n"),A+=` It must be ${c}. Received ${F}`,A},RangeError);function b(d){let c="",l=d.length;const A=d[0]==="-"?1:0;for(;l>=A+4;l-=3)c=`_${d.slice(l-3,l)}${c}`;return`${d.slice(0,l)}${c}`}function x(d,c,l){P(c,"offset"),(d[c]===void 0||d[c+l]===void 0)&&U(c,d.length-(l+1))}function B(d,c,l,A,F,z){if(d>l||d<c){const j=typeof c=="bigint"?"n":"";let _e;throw z>3?c===0||c===BigInt(0)?_e=`>= 0${j} and < 2${j} ** ${(z+1)*8}${j}`:_e=`>= -(2${j} ** ${(z+1)*8-1}${j}) and < 2 ** ${(z+1)*8-1}${j}`:_e=`>= ${c}${j} and <= ${l}${j}`,new te.ERR_OUT_OF_RANGE("value",_e,d)}x(A,F,z)}function P(d,c){if(typeof d!="number")throw new te.ERR_INVALID_ARG_TYPE(c,"number",d)}function U(d,c,l){throw Math.floor(d)!==d?(P(d,l),new te.ERR_OUT_OF_RANGE(l||"offset","an integer",d)):c<0?new te.ERR_BUFFER_OUT_OF_BOUNDS:new te.ERR_OUT_OF_RANGE(l||"offset",`>= ${l?1:0} and <= ${c}`,d)}const M=/[^+/0-9A-Za-z-_]/g;function h(d){if(d=d.split("=")[0],d=d.trim().replace(M,""),d.length<2)return"";for(;d.length%4!==0;)d=d+"=";return d}function s(d,c){c=c||1/0;let l;const A=d.length;let F=null;const z=[];for(let j=0;j<A;++j){if(l=d.charCodeAt(j),l>55295&&l<57344){if(!F){if(l>56319){(c-=3)>-1&&z.push(239,191,189);continue}else if(j+1===A){(c-=3)>-1&&z.push(239,191,189);continue}F=l;continue}if(l<56320){(c-=3)>-1&&z.push(239,191,189),F=l;continue}l=(F-55296<<10|l-56320)+65536}else F&&(c-=3)>-1&&z.push(239,191,189);if(F=null,l<128){if((c-=1)<0)break;z.push(l)}else if(l<2048){if((c-=2)<0)break;z.push(l>>6|192,l&63|128)}else if(l<65536){if((c-=3)<0)break;z.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((c-=4)<0)break;z.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return z}function a(d){const c=[];for(let l=0;l<d.length;++l)c.push(d.charCodeAt(l)&255);return c}function y(d,c){let l,A,F;const z=[];for(let j=0;j<d.length&&!((c-=2)<0);++j)l=d.charCodeAt(j),A=l>>8,F=l%256,z.push(F),z.push(A);return z}function _(d){return e.toByteArray(h(d))}function S(d,c,l,A){let F;for(F=0;F<A&&!(F+l>=c.length||F>=d.length);++F)c[F+l]=d[F];return F}function V(d,c){return d instanceof c||d!=null&&d.constructor!=null&&d.constructor.name!=null&&d.constructor.name===c.name}function ne(d){return d!==d}const pe=function(){const d="0123456789abcdef",c=new Array(256);for(let l=0;l<16;++l){const A=l*16;for(let F=0;F<16;++F)c[A+F]=d[l]+d[F]}return c}();function ye(d){return typeof BigInt>"u"?xe:d}function xe(){throw new Error("BigInt not supported")}})(ko);var Ji;(function(t){t[t.SysFatal=1]="SysFatal",t[t.SysTransient=2]="SysTransient",t[t.DestinationInvalid=3]="DestinationInvalid",t[t.CanisterReject=4]="CanisterReject",t[t.CanisterError=5]="CanisterError"})(Ji||(Ji={}));const mu="modulepreload",bu=function(t){return"/"+t},Hs={},_u=function(e,r,n){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=bu(o),o in Hs)return;Hs[o]=!0;const f=o.endsWith(".css"),u=f?'[rel="stylesheet"]':"";if(!!n)for(let E=i.length-1;E>=0;E--){const T=i[E];if(T.href===o&&(!f||T.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${u}`))return;const w=document.createElement("link");if(w.rel=f?"stylesheet":mu,f||(w.as="script",w.crossOrigin=""),w.href=o,document.head.appendChild(w),f)return new Promise((E,T)=>{w.addEventListener("load",E),w.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e()).catch(o=>{const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=o,window.dispatchEvent(f),!f.defaultPrevented)throw o})},ei="abcdefghijklmnopqrstuvwxyz234567",kr=Object.create(null);for(let t=0;t<ei.length;t++)kr[ei[t]]=t;kr[0]=kr.o;kr[1]=kr.i;function xu(t){let e=0,r=0,n="";function i(o){return e<0?r|=o>>-e:r=o<<e&248,e>3?(e-=8,1):(e<4&&(n+=ei[r>>3],e+=5),0)}for(let o=0;o<t.length;)o+=i(t[o]);return n+(e<0?ei[r>>3]:"")}function Eu(t){let e=0,r=0;const n=new Uint8Array(t.length*4/3|0);let i=0;function o(f){let u=kr[f.toLowerCase()];if(u===void 0)throw new Error(`Invalid character: ${JSON.stringify(f)}`);u<<=3,r|=u>>>e,e+=5,e>=8&&(n[i++]=r,e-=8,e>0?r=u<<5-e&255:r=0)}for(const f of t)o(f);return n.slice(0,i)}const Au=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function vu(t){const e=new Uint8Array(t);let r=-1;for(let n=0;n<e.length;n++){const o=(e[n]^r)&255;r=Au[o]^r>>>8}return(r^-1)>>>0}function Bu(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function qo(t,...e){if(!Bu(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function js(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Tu(t,e){qo(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const xr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function $i(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function vt(t,e){return t<<32-e|t>>>e}function Su(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Vo(t){return typeof t=="string"&&(t=Su(t)),qo(t),t}class Nu{clone(){return this._cloneInto()}}function ws(t){const e=n=>t().update(Vo(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Go(t=32){if(xr&&typeof xr.getRandomValues=="function")return xr.getRandomValues(new Uint8Array(t));if(xr&&typeof xr.randomBytes=="function")return xr.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function Iu(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),o=BigInt(4294967295),f=Number(r>>i&o),u=Number(r&o),p=n?4:0,w=n?0:4;t.setUint32(e+p,f,n),t.setUint32(e+w,u,n)}function Ru(t,e,r){return t&e^~t&r}function Uu(t,e,r){return t&e^t&r^e&r}class Ho extends Nu{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=$i(this.buffer)}update(e){js(this);const{view:r,buffer:n,blockLen:i}=this;e=Vo(e);const o=e.length;for(let f=0;f<o;){const u=Math.min(i-this.pos,o-f);if(u===i){const p=$i(e);for(;i<=o-f;f+=i)this.process(p,f);continue}n.set(e.subarray(f,f+u),this.pos),this.pos+=u,f+=u,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){js(this),Tu(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:o}=this;let{pos:f}=this;r[f++]=128,this.buffer.subarray(f).fill(0),this.padOffset>i-f&&(this.process(n,0),f=0);for(let T=f;T<i;T++)r[T]=0;Iu(n,i-8,BigInt(this.length*8),o),this.process(n,0);const u=$i(e),p=this.outputLen;if(p%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const w=p/4,E=this.get();if(w>E.length)throw new Error("_sha2: outputLen bigger than state");for(let T=0;T<w;T++)u.setUint32(4*T,E[T],o)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:o,destroyed:f,pos:u}=this;return e.length=i,e.pos=u,e.finished=o,e.destroyed=f,i%r&&e.buffer.set(n),e}}const Ou=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),jt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),zt=new Uint32Array(64);class jo extends Ho{constructor(){super(64,32,8,!1),this.A=jt[0]|0,this.B=jt[1]|0,this.C=jt[2]|0,this.D=jt[3]|0,this.E=jt[4]|0,this.F=jt[5]|0,this.G=jt[6]|0,this.H=jt[7]|0}get(){const{A:e,B:r,C:n,D:i,E:o,F:f,G:u,H:p}=this;return[e,r,n,i,o,f,u,p]}set(e,r,n,i,o,f,u,p){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=f|0,this.G=u|0,this.H=p|0}process(e,r){for(let T=0;T<16;T++,r+=4)zt[T]=e.getUint32(r,!1);for(let T=16;T<64;T++){const I=zt[T-15],v=zt[T-2],g=vt(I,7)^vt(I,18)^I>>>3,k=vt(v,17)^vt(v,19)^v>>>10;zt[T]=k+zt[T-7]+g+zt[T-16]|0}let{A:n,B:i,C:o,D:f,E:u,F:p,G:w,H:E}=this;for(let T=0;T<64;T++){const I=vt(u,6)^vt(u,11)^vt(u,25),v=E+I+Ru(u,p,w)+Ou[T]+zt[T]|0,k=(vt(n,2)^vt(n,13)^vt(n,22))+Uu(n,i,o)|0;E=w,w=p,p=u,u=f+v|0,f=o,o=i,i=n,n=v+k|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,f=f+this.D|0,u=u+this.E|0,p=p+this.F|0,w=w+this.G|0,E=E+this.H|0,this.set(n,i,o,f,u,p,w,E)}roundClean(){zt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Fu extends jo{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const ms=ws(()=>new jo),$u=ws(()=>new Fu);function Pu(t){return $u.create().update(new Uint8Array(t)).digest()}const bn="__principal__",Mu=2,zs=4,ku="aaaaa-aa",Cu=t=>{var e;return new Uint8Array(((e=t.match(/.{1,2}/g))!==null&&e!==void 0?e:[]).map(r=>parseInt(r,16)))},qu=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"");let Be=class On{constructor(e){this._arr=e,this._isPrincipal=!0}static anonymous(){return new this(new Uint8Array([zs]))}static managementCanister(){return this.fromHex(ku)}static selfAuthenticating(e){const r=Pu(e);return new this(new Uint8Array([...r,Mu]))}static from(e){if(typeof e=="string")return On.fromText(e);if(Object.getPrototypeOf(e)===Uint8Array.prototype)return new On(e);if(typeof e=="object"&&e!==null&&e._isPrincipal===!0)return new On(e._arr);throw new Error(`Impossible to convert ${JSON.stringify(e)} to Principal.`)}static fromHex(e){return new this(Cu(e))}static fromText(e){let r=e;if(e.includes(bn)){const f=JSON.parse(e);bn in f&&(r=f[bn])}const n=r.toLowerCase().replace(/-/g,"");let i=Eu(n);i=i.slice(4,i.length);const o=new this(i);if(o.toText()!==r)throw new Error(`Principal "${o.toText()}" does not have a valid checksum (original value "${r}" may not be a valid Principal ID).`);return o}static fromUint8Array(e){return new this(e)}isAnonymous(){return this._arr.byteLength===1&&this._arr[0]===zs}toUint8Array(){return this._arr}toHex(){return qu(this._arr).toUpperCase()}toText(){const e=new ArrayBuffer(4);new DataView(e).setUint32(0,vu(this._arr));const n=new Uint8Array(e),i=Uint8Array.from(this._arr),o=new Uint8Array([...n,...i]),u=xu(o).match(/.{1,5}/g);if(!u)throw new Error;return u.join("-")}toString(){return this.toText()}toJSON(){return{[bn]:this.toText()}}compareTo(e){for(let r=0;r<Math.min(this._arr.length,e._arr.length);r++){if(this._arr[r]<e._arr[r])return"lt";if(this._arr[r]>e._arr[r])return"gt"}return this._arr.length<e._arr.length?"lt":this._arr.length>e._arr.length?"gt":"eq"}ltEq(e){const r=this.compareTo(e);return r=="lt"||r=="eq"}gtEq(e){const r=this.compareTo(e);return r=="gt"||r=="eq"}};function Ft(...t){const e=new Uint8Array(t.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of t)e.set(new Uint8Array(n),r),r+=n.byteLength;return e.buffer}function Xe(t){return[...new Uint8Array(t)].map(e=>e.toString(16).padStart(2,"0")).join("")}const Vu=new RegExp(/^[0-9a-fA-F]+$/);function ti(t){if(!Vu.test(t))throw new Error("Invalid hexadecimal string.");const e=[...t].reduce((r,n,i)=>(r[i/2|0]=(r[i/2|0]||"")+n,r),[]).map(r=>Number.parseInt(r,16));return new Uint8Array(e).buffer}function zo(t,e){if(t.byteLength!==e.byteLength)return t.byteLength-e.byteLength;const r=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<r.length;i++)if(r[i]!==n[i])return r[i]-n[i];return 0}function hi(t,e){return zo(t,e)===0}function Fn(t){return new DataView(t.buffer,t.byteOffset,t.byteLength).buffer}function Yo(t){return t instanceof Uint8Array?Fn(t):t instanceof ArrayBuffer?t:Array.isArray(t)?Fn(new Uint8Array(t)):"buffer"in t?Yo(t.buffer):Fn(new Uint8Array(t))}class Ce extends Error{constructor(e){super(e),this.message=e,this.name="AgentError",this.__proto__=Ce.prototype,Object.setPrototypeOf(this,Ce.prototype)}}function Ue(...t){const e=new Uint8Array(t.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of t)e.set(new Uint8Array(n),r),r+=n.byteLength;return e}class Vr{constructor(e,r=(e==null?void 0:e.byteLength)||0){this._buffer=ri(e||new ArrayBuffer(0)),this._view=new Uint8Array(this._buffer,0,r)}get buffer(){return ri(this._view.slice())}get byteLength(){return this._view.byteLength}read(e){const r=this._view.subarray(0,e);return this._view=this._view.subarray(e),r.slice().buffer}readUint8(){const e=this._view[0];return this._view=this._view.subarray(1),e}write(e){const r=new Uint8Array(e),n=this._view.byteLength;this._view.byteOffset+this._view.byteLength+r.byteLength>=this._buffer.byteLength?this.alloc(r.byteLength):this._view=new Uint8Array(this._buffer,this._view.byteOffset,this._view.byteLength+r.byteLength),this._view.set(r,n)}get end(){return this._view.byteLength===0}alloc(e){const r=new ArrayBuffer((this._buffer.byteLength+e)*1.2|0),n=new Uint8Array(r,0,this._view.byteLength+e);n.set(this._view),this._buffer=r,this._view=n}}function Pi(t){return new DataView(t.buffer,t.byteOffset,t.byteLength).buffer}function ri(t){return t instanceof Uint8Array?Pi(t):t instanceof ArrayBuffer?t:Array.isArray(t)?Pi(new Uint8Array(t)):"buffer"in t?ri(t.buffer):Pi(new Uint8Array(t))}function Gu(t){const r=new TextEncoder().encode(t);let n=0;for(const i of r)n=(n*223+i)%2**32;return n}function Ot(t){if(/^_\d+_$/.test(t)||/^_0x[0-9a-fA-F]+_$/.test(t)){const e=+t.slice(1,-1);if(Number.isSafeInteger(e)&&e>=0&&e<2**32)return e}return Gu(t)}function Wo(){throw new Error("unexpected end of buffer")}function gr(t,e){return t.byteLength<e&&Wo(),t.read(e)}function wr(t){const e=t.readUint8();return e===void 0&&Wo(),e}function qe(t){if(typeof t=="number"&&(t=BigInt(t)),t<BigInt(0))throw new Error("Cannot leb encode negative values.");const e=(t===BigInt(0)?0:Math.ceil(Math.log2(Number(t))))+1,r=new Vr(new ArrayBuffer(e),0);for(;;){const n=Number(t&BigInt(127));if(t/=BigInt(128),t===BigInt(0)){r.write(new Uint8Array([n]));break}else r.write(new Uint8Array([n|128]))}return r.buffer}function Ke(t){let e=BigInt(1),r=BigInt(0),n;do n=wr(t),r+=BigInt(n&127).valueOf()*e,e*=BigInt(128);while(n>=128);return r}function Ye(t){typeof t=="number"&&(t=BigInt(t));const e=t<BigInt(0);e&&(t=-t-BigInt(1));const r=(t===BigInt(0)?0:Math.ceil(Math.log2(Number(t))))+1,n=new Vr(new ArrayBuffer(r),0);for(;;){const o=i(t);if(t/=BigInt(128),e&&t===BigInt(0)&&o&64||!e&&t===BigInt(0)&&!(o&64)){n.write(new Uint8Array([o]));break}else n.write(new Uint8Array([o|128]))}function i(o){const f=o%BigInt(128);return Number(e?BigInt(128)-f-BigInt(1):f)}return n.buffer}function Kt(t){const e=new Uint8Array(t.buffer);let r=0;for(;r<e.byteLength;r++)if(e[r]<128){if(!(e[r]&64))return Ke(t);break}const n=new Uint8Array(gr(t,r+1));let i=BigInt(0);for(let o=n.byteLength-1;o>=0;o--)i=i*BigInt(128)+BigInt(128-(n[o]&127)-1);return-i-BigInt(1)}function Hu(t,e){if(BigInt(t)<BigInt(0))throw new Error("Cannot write negative values.");return Zo(t,e)}function Zo(t,e){t=BigInt(t);const r=new Vr(new ArrayBuffer(Math.min(1,e)),0);let n=0,i=BigInt(256),o=BigInt(0),f=Number(t%i);for(r.write(new Uint8Array([f]));++n<e;)t<0&&o===BigInt(0)&&f!==0&&(o=BigInt(1)),f=Number((t/i-o)%BigInt(256)),r.write(new Uint8Array([f])),i*=BigInt(256);return r.buffer}function Ko(t,e){let r=BigInt(wr(t)),n=BigInt(1),i=0;for(;++i<e;){n*=BigInt(256);const o=BigInt(wr(t));r=r+n*o}return r}function ju(t,e){let r=Ko(t,e);const n=BigInt(2)**(BigInt(8)*BigInt(e-1)+BigInt(7));return r>=n&&(r-=n*BigInt(2)),r}function Qi(t){const e=BigInt(t);if(t<0)throw new RangeError("Input must be non-negative");return BigInt(1)<<e}const $n="DIDL",Ys=400;function sn(t,e,r){return t.map((n,i)=>r(n,e[i]))}class zu{constructor(){this._typs=[],this._idx=new Map}has(e){return this._idx.has(e.name)}add(e,r){const n=this._typs.length;this._idx.set(e.name,n),this._typs.push(r)}merge(e,r){const n=this._idx.get(e.name),i=this._idx.get(r);if(n===void 0)throw new Error("Missing type index for "+e);if(i===void 0)throw new Error("Missing type index for "+r);this._typs[n]=this._typs[i],this._typs.splice(i,1),this._idx.delete(r)}encode(){const e=qe(this._typs.length),r=Ue(...this._typs);return Ue(e,r)}indexOf(e){if(!this._idx.has(e))throw new Error("Missing type index for "+e);return Ye(this._idx.get(e)||0)}}class Yu{visitType(e,r){throw new Error("Not implemented")}visitPrimitive(e,r){return this.visitType(e,r)}visitEmpty(e,r){return this.visitPrimitive(e,r)}visitBool(e,r){return this.visitPrimitive(e,r)}visitNull(e,r){return this.visitPrimitive(e,r)}visitReserved(e,r){return this.visitPrimitive(e,r)}visitText(e,r){return this.visitPrimitive(e,r)}visitNumber(e,r){return this.visitPrimitive(e,r)}visitInt(e,r){return this.visitNumber(e,r)}visitNat(e,r){return this.visitNumber(e,r)}visitFloat(e,r){return this.visitPrimitive(e,r)}visitFixedInt(e,r){return this.visitNumber(e,r)}visitFixedNat(e,r){return this.visitNumber(e,r)}visitPrincipal(e,r){return this.visitPrimitive(e,r)}visitConstruct(e,r){return this.visitType(e,r)}visitVec(e,r,n){return this.visitConstruct(e,n)}visitOpt(e,r,n){return this.visitConstruct(e,n)}visitRecord(e,r,n){return this.visitConstruct(e,n)}visitTuple(e,r,n){const i=r.map((o,f)=>[`_${f}_`,o]);return this.visitRecord(e,i,n)}visitVariant(e,r,n){return this.visitConstruct(e,n)}visitRec(e,r,n){return this.visitConstruct(r,n)}visitFunc(e,r){return this.visitConstruct(e,r)}visitService(e,r){return this.visitConstruct(e,r)}}class di{display(){return this.name}valueToString(e){return Ge(e)}buildTypeTable(e){e.has(this)||this._buildTypeTableImpl(e)}}class yt extends di{checkType(e){if(this.name!==e.name)throw new Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`);return e}_buildTypeTableImpl(e){}}class rr extends di{checkType(e){if(e instanceof nr){const r=e.getType();if(typeof r>"u")throw new Error("type mismatch with uninitialized type");return r}throw new Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`)}encodeType(e){return e.indexOf(this.name)}}class Lo extends yt{accept(e,r){return e.visitEmpty(this,r)}covariant(e){throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(){throw new Error("Empty cannot appear as a function argument")}valueToString(){throw new Error("Empty cannot appear as a value")}encodeType(){return Ye(-17)}decodeValue(){throw new Error("Empty cannot appear as an output")}get name(){return"empty"}}class Xo extends di{checkType(e){throw new Error("Method not implemented for unknown.")}accept(e,r){throw e.visitType(this,r)}covariant(e){throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(){throw new Error("Unknown cannot appear as a function argument")}valueToString(){throw new Error("Unknown cannot appear as a value")}encodeType(){throw new Error("Unknown cannot be serialized")}decodeValue(e,r){let n=r.decodeValue(e,r);Object(n)!==n&&(n=Object(n));let i;return r instanceof nr?i=()=>r.getType():i=()=>r,Object.defineProperty(n,"type",{value:i,writable:!0,enumerable:!1,configurable:!0}),n}_buildTypeTableImpl(){throw new Error("Unknown cannot be serialized")}get name(){return"Unknown"}}class Jo extends yt{accept(e,r){return e.visitBool(this,r)}covariant(e){if(typeof e=="boolean")return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){return new Uint8Array([e?1:0])}encodeType(){return Ye(-2)}decodeValue(e,r){switch(this.checkType(r),wr(e)){case 0:return!1;case 1:return!0;default:throw new Error("Boolean value out of range")}}get name(){return"bool"}}class Qo extends yt{accept(e,r){return e.visitNull(this,r)}covariant(e){if(e===null)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(){return new ArrayBuffer(0)}encodeType(){return Ye(-1)}decodeValue(e,r){return this.checkType(r),null}get name(){return"null"}}class ni extends yt{accept(e,r){return e.visitReserved(this,r)}covariant(e){return!0}encodeValue(){return new ArrayBuffer(0)}encodeType(){return Ye(-16)}decodeValue(e,r){return r.name!==this.name&&r.decodeValue(e,r),null}get name(){return"reserved"}}class Do extends yt{accept(e,r){return e.visitText(this,r)}covariant(e){if(typeof e=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){const r=new TextEncoder().encode(e),n=qe(r.byteLength);return Ue(n,r)}encodeType(){return Ye(-15)}decodeValue(e,r){this.checkType(r);const n=Ke(e),i=gr(e,Number(n));return new TextDecoder("utf8",{fatal:!0}).decode(i)}get name(){return"text"}valueToString(e){return'"'+e+'"'}}class ea extends yt{accept(e,r){return e.visitInt(this,r)}covariant(e){if(typeof e=="bigint"||Number.isInteger(e))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){return Ye(e)}encodeType(){return Ye(-4)}decodeValue(e,r){return this.checkType(r),Kt(e)}get name(){return"int"}valueToString(e){return e.toString()}}class ta extends yt{accept(e,r){return e.visitNat(this,r)}covariant(e){if(typeof e=="bigint"&&e>=BigInt(0)||Number.isInteger(e)&&e>=0)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){return qe(e)}encodeType(){return Ye(-3)}decodeValue(e,r){return this.checkType(r),Ke(e)}get name(){return"nat"}valueToString(e){return e.toString()}}class bs extends yt{constructor(e){if(super(),this._bits=e,e!==32&&e!==64)throw new Error("not a valid float type")}accept(e,r){return e.visitFloat(this,r)}covariant(e){if(typeof e=="number"||e instanceof Number)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){const r=new ArrayBuffer(this._bits/8),n=new DataView(r);return this._bits===32?n.setFloat32(0,e,!0):n.setFloat64(0,e,!0),r}encodeType(){const e=this._bits===32?-13:-14;return Ye(e)}decodeValue(e,r){this.checkType(r);const n=gr(e,this._bits/8),i=new DataView(n);return this._bits===32?i.getFloat32(0,!0):i.getFloat64(0,!0)}get name(){return"float"+this._bits}valueToString(e){return e.toString()}}class mr extends yt{constructor(e){super(),this._bits=e}accept(e,r){return e.visitFixedInt(this,r)}covariant(e){const r=Qi(this._bits-1)*BigInt(-1),n=Qi(this._bits-1)-BigInt(1);let i=!1;if(typeof e=="bigint")i=e>=r&&e<=n;else if(Number.isInteger(e)){const o=BigInt(e);i=o>=r&&o<=n}else i=!1;if(i)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){return Zo(e,this._bits/8)}encodeType(){const e=Math.log2(this._bits)-3;return Ye(-9-e)}decodeValue(e,r){this.checkType(r);const n=ju(e,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`int${this._bits}`}valueToString(e){return e.toString()}}class er extends yt{constructor(e){super(),this._bits=e}accept(e,r){return e.visitFixedNat(this,r)}covariant(e){const r=Qi(this._bits);let n=!1;if(typeof e=="bigint"&&e>=BigInt(0)?n=e<r:Number.isInteger(e)&&e>=0?n=BigInt(e)<r:n=!1,n)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){return Hu(e,this._bits/8)}encodeType(){const e=Math.log2(this._bits)-3;return Ye(-5-e)}decodeValue(e,r){this.checkType(r);const n=Ko(e,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`nat${this._bits}`}valueToString(e){return e.toString()}}class pi extends rr{constructor(e){super(),this._type=e,this._blobOptimization=!1,e instanceof er&&e._bits===8&&(this._blobOptimization=!0)}accept(e,r){return e.visitVec(this,this._type,r)}covariant(e){const r=this._type instanceof er?this._type._bits:this._type instanceof mr?this._type._bits:0;if(ArrayBuffer.isView(e)&&r==e.BYTES_PER_ELEMENT*8||Array.isArray(e)&&e.every((n,i)=>{try{return this._type.covariant(n)}catch(o){throw new Error(`Invalid ${this.display()} argument: 

index ${i} -> ${o.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){const r=qe(e.length);if(this._blobOptimization)return Ue(r,new Uint8Array(e));if(ArrayBuffer.isView(e))return Ue(r,new Uint8Array(e.buffer));const n=new Vr(new ArrayBuffer(r.byteLength+e.length),0);n.write(r);for(const i of e){const o=this._type.encodeValue(i);n.write(new Uint8Array(o))}return n.buffer}_buildTypeTableImpl(e){this._type.buildTypeTable(e);const r=Ye(-19),n=this._type.encodeType(e);e.add(this,Ue(r,n))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof pi))throw new Error("Not a vector type");const i=Number(Ke(e));if(this._type instanceof er){if(this._type._bits==8)return new Uint8Array(e.read(i));if(this._type._bits==16)return new Uint16Array(e.read(i*2));if(this._type._bits==32)return new Uint32Array(e.read(i*4));if(this._type._bits==64)return new BigUint64Array(e.read(i*8))}if(this._type instanceof mr){if(this._type._bits==8)return new Int8Array(e.read(i));if(this._type._bits==16)return new Int16Array(e.read(i*2));if(this._type._bits==32)return new Int32Array(e.read(i*4));if(this._type._bits==64)return new BigInt64Array(e.read(i*8))}const o=[];for(let f=0;f<i;f++)o.push(this._type.decodeValue(e,n._type));return o}get name(){return`vec ${this._type.name}`}display(){return`vec ${this._type.display()}`}valueToString(e){return"vec {"+e.map(n=>this._type.valueToString(n)).join("; ")+"}"}}class Cr extends rr{constructor(e){super(),this._type=e}accept(e,r){return e.visitOpt(this,this._type,r)}covariant(e){try{if(Array.isArray(e)&&(e.length===0||e.length===1&&this._type.covariant(e[0])))return!0}catch(r){throw new Error(`Invalid ${this.display()} argument: ${Ge(e)} 

-> ${r.message}`)}throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){return e.length===0?new Uint8Array([0]):Ue(new Uint8Array([1]),this._type.encodeValue(e[0]))}_buildTypeTableImpl(e){this._type.buildTypeTable(e);const r=Ye(-18),n=this._type.encodeType(e);e.add(this,Ue(r,n))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof Cr))throw new Error("Not an option type");switch(wr(e)){case 0:return[];case 1:return[this._type.decodeValue(e,n._type)];default:throw new Error("Not an option value")}}get name(){return`opt ${this._type.name}`}display(){return`opt ${this._type.display()}`}valueToString(e){return e.length===0?"null":`opt ${this._type.valueToString(e[0])}`}}class dn extends rr{constructor(e={}){super(),this._fields=Object.entries(e).sort((r,n)=>Ot(r[0])-Ot(n[0]))}accept(e,r){return e.visitRecord(this,this._fields,r)}tryAsTuple(){const e=[];for(let r=0;r<this._fields.length;r++){const[n,i]=this._fields[r];if(n!==`_${r}_`)return null;e.push(i)}return e}covariant(e){if(typeof e=="object"&&this._fields.every(([r,n])=>{if(!e.hasOwnProperty(r))throw new Error(`Record is missing key "${r}".`);try{return n.covariant(e[r])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

field ${r} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){const r=this._fields.map(([i])=>e[i]),n=sn(this._fields,r,([,i],o)=>i.encodeValue(o));return Ue(...n)}_buildTypeTableImpl(e){this._fields.forEach(([o,f])=>f.buildTypeTable(e));const r=Ye(-20),n=qe(this._fields.length),i=this._fields.map(([o,f])=>Ue(qe(Ot(o)),f.encodeType(e)));e.add(this,Ue(r,n,Ue(...i)))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof dn))throw new Error("Not a record type");const i={};let o=0,f=0;for(;f<n._fields.length;){const[u,p]=n._fields[f];if(o>=this._fields.length){p.decodeValue(e,p),f++;continue}const[w,E]=this._fields[o],T=Ot(this._fields[o][0]),I=Ot(u);if(T===I)i[w]=E.decodeValue(e,p),o++,f++;else if(I>T)if(E instanceof Cr||E instanceof ni)i[w]=[],o++;else throw new Error("Cannot find required field "+w);else p.decodeValue(e,p),f++}for(const[u,p]of this._fields.slice(o))if(p instanceof Cr||p instanceof ni)i[u]=[];else throw new Error("Cannot find required field "+u);return i}get name(){return`record {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`record {${this._fields.map(([r,n])=>r+":"+n.display()).join("; ")}}`}valueToString(e){const r=this._fields.map(([i])=>e[i]);return`record {${sn(this._fields,r,([i,o],f)=>i+"="+o.valueToString(f)).join("; ")}}`}}class yi extends dn{constructor(e){const r={};e.forEach((n,i)=>r["_"+i+"_"]=n),super(r),this._components=e}accept(e,r){return e.visitTuple(this,this._components,r)}covariant(e){if(Array.isArray(e)&&e.length>=this._fields.length&&this._components.every((r,n)=>{try{return r.covariant(e[n])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

index ${n} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){const r=sn(this._components,e,(n,i)=>n.encodeValue(i));return Ue(...r)}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof yi))throw new Error("not a tuple type");if(n._components.length<this._components.length)throw new Error("tuple mismatch");const i=[];for(const[o,f]of n._components.entries())o>=this._components.length?f.decodeValue(e,f):i.push(this._components[o].decodeValue(e,f));return i}display(){return`record {${this._components.map(r=>r.display()).join("; ")}}`}valueToString(e){return`record {${sn(this._components,e,(n,i)=>n.valueToString(i)).join("; ")}}`}}class gi extends rr{constructor(e={}){super(),this._fields=Object.entries(e).sort((r,n)=>Ot(r[0])-Ot(n[0]))}accept(e,r){return e.visitVariant(this,this._fields,r)}covariant(e){if(typeof e=="object"&&Object.entries(e).length===1&&this._fields.every(([r,n])=>{try{return!e.hasOwnProperty(r)||n.covariant(e[r])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

variant ${r} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){for(let r=0;r<this._fields.length;r++){const[n,i]=this._fields[r];if(e.hasOwnProperty(n)){const o=qe(r),f=i.encodeValue(e[n]);return Ue(o,f)}}throw Error("Variant has no data: "+e)}_buildTypeTableImpl(e){this._fields.forEach(([,o])=>{o.buildTypeTable(e)});const r=Ye(-21),n=qe(this._fields.length),i=this._fields.map(([o,f])=>Ue(qe(Ot(o)),f.encodeType(e)));e.add(this,Ue(r,n,...i))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof gi))throw new Error("Not a variant type");const i=Number(Ke(e));if(i>=n._fields.length)throw Error("Invalid variant index: "+i);const[o,f]=n._fields[i];for(const[u,p]of this._fields)if(Ot(o)===Ot(u)){const w=p.decodeValue(e,f);return{[u]:w}}throw new Error("Cannot find field hash "+o)}get name(){return`variant {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`variant {${this._fields.map(([r,n])=>r+(n.name==="null"?"":`:${n.display()}`)).join("; ")}}`}valueToString(e){for(const[r,n]of this._fields)if(e.hasOwnProperty(r)){const i=n.valueToString(e[r]);return i==="null"?`variant {${r}}`:`variant {${r}=${i}}`}throw new Error("Variant has no data: "+e)}}class nr extends rr{constructor(){super(...arguments),this._id=nr._counter++,this._type=void 0}accept(e,r){if(!this._type)throw Error("Recursive type uninitialized.");return e.visitRec(this,this._type,r)}fill(e){this._type=e}getType(){return this._type}covariant(e){if(this._type&&this._type.covariant(e))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.encodeValue(e)}_buildTypeTableImpl(e){if(!this._type)throw Error("Recursive type uninitialized.");e.add(this,new Uint8Array([])),this._type.buildTypeTable(e),e.merge(this,this._type.name)}decodeValue(e,r){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.decodeValue(e,r)}get name(){return`rec_${this._id}`}display(){if(!this._type)throw Error("Recursive type uninitialized.");return`μ${this.name}.${this._type.name}`}valueToString(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.valueToString(e)}}nr._counter=0;function _s(t){if(wr(t)!==1)throw new Error("Cannot decode principal");const r=Number(Ke(t));return Be.fromUint8Array(new Uint8Array(gr(t,r)))}class ra extends yt{accept(e,r){return e.visitPrincipal(this,r)}covariant(e){if(e&&e._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){const r=e.toUint8Array(),n=qe(r.byteLength);return Ue(new Uint8Array([1]),n,r)}encodeType(){return Ye(-24)}decodeValue(e,r){return this.checkType(r),_s(e)}get name(){return"principal"}valueToString(e){return`${this.name} "${e.toText()}"`}}class xs extends rr{constructor(e,r,n=[]){super(),this.argTypes=e,this.retTypes=r,this.annotations=n}static argsToString(e,r){if(e.length!==r.length)throw new Error("arity mismatch");return"("+e.map((n,i)=>n.valueToString(r[i])).join(", ")+")"}accept(e,r){return e.visitFunc(this,r)}covariant(e){if(Array.isArray(e)&&e.length===2&&e[0]&&e[0]._isPrincipal&&typeof e[1]=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue([e,r]){const n=e.toUint8Array(),i=qe(n.byteLength),o=Ue(new Uint8Array([1]),i,n),f=new TextEncoder().encode(r),u=qe(f.byteLength);return Ue(new Uint8Array([1]),o,u,f)}_buildTypeTableImpl(e){this.argTypes.forEach(w=>w.buildTypeTable(e)),this.retTypes.forEach(w=>w.buildTypeTable(e));const r=Ye(-22),n=qe(this.argTypes.length),i=Ue(...this.argTypes.map(w=>w.encodeType(e))),o=qe(this.retTypes.length),f=Ue(...this.retTypes.map(w=>w.encodeType(e))),u=qe(this.annotations.length),p=Ue(...this.annotations.map(w=>this.encodeAnnotation(w)));e.add(this,Ue(r,n,i,o,f,u,p))}decodeValue(e){if(wr(e)!==1)throw new Error("Cannot decode function reference");const n=_s(e),i=Number(Ke(e)),o=gr(e,i),u=new TextDecoder("utf8",{fatal:!0}).decode(o);return[n,u]}get name(){const e=this.argTypes.map(i=>i.name).join(", "),r=this.retTypes.map(i=>i.name).join(", "),n=" "+this.annotations.join(" ");return`(${e}) -> (${r})${n}`}valueToString([e,r]){return`func "${e.toText()}".${r}`}display(){const e=this.argTypes.map(i=>i.display()).join(", "),r=this.retTypes.map(i=>i.display()).join(", "),n=" "+this.annotations.join(" ");return`(${e}) → (${r})${n}`}encodeAnnotation(e){if(e==="query")return new Uint8Array([1]);if(e==="oneway")return new Uint8Array([2]);if(e==="composite_query")return new Uint8Array([3]);throw new Error("Illegal function annotation")}}class na extends rr{constructor(e){super(),this._fields=Object.entries(e).sort((r,n)=>r[0]<n[0]?-1:r[0]>n[0]?1:0)}accept(e,r){return e.visitService(this,r)}covariant(e){if(e&&e._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ge(e)}`)}encodeValue(e){const r=e.toUint8Array(),n=qe(r.length);return Ue(new Uint8Array([1]),n,r)}_buildTypeTableImpl(e){this._fields.forEach(([o,f])=>f.buildTypeTable(e));const r=Ye(-23),n=qe(this._fields.length),i=this._fields.map(([o,f])=>{const u=new TextEncoder().encode(o),p=qe(u.length);return Ue(p,u,f.encodeType(e))});e.add(this,Ue(r,n,...i))}decodeValue(e){return _s(e)}get name(){return`service {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}valueToString(e){return`service "${e.toText()}"`}}function Ge(t){const e=JSON.stringify(t,(r,n)=>typeof n=="bigint"?`BigInt(${n})`:n);return e&&e.length>Ys?e.substring(0,Ys-3)+"...":e}function Di(t,e){if(e.length<t.length)throw Error("Wrong number of message arguments");const r=new zu;t.forEach(p=>p.buildTypeTable(r));const n=new TextEncoder().encode($n),i=r.encode(),o=qe(e.length),f=Ue(...t.map(p=>p.encodeType(r))),u=Ue(...sn(t,e,(p,w)=>{try{p.covariant(w)}catch(E){throw new Error(E.message+`

`)}return p.encodeValue(w)}));return Ue(n,i,o,f,u)}function ia(t,e){const r=new Vr(e);if(e.byteLength<$n.length)throw new Error("Message length smaller than magic number");const n=gr(r,$n.length),i=new TextDecoder().decode(n);if(i!==$n)throw new Error("Wrong magic number: "+JSON.stringify(i));function o(v){const g=[],k=Number(Ke(v));for(let Y=0;Y<k;Y++){const q=Number(Kt(v));switch(q){case-18:case-19:{const re=Number(Kt(v));g.push([q,re]);break}case-20:case-21:{const re=[];let $=Number(Ke(v)),L;for(;$--;){const K=Number(Ke(v));if(K>=Math.pow(2,32))throw new Error("field id out of 32-bit range");if(typeof L=="number"&&L>=K)throw new Error("field id collision or not sorted");L=K;const Q=Number(Kt(v));re.push([K,Q])}g.push([q,re]);break}case-22:{const re=[];let $=Number(Ke(v));for(;$--;)re.push(Number(Kt(v)));const L=[];let K=Number(Ke(v));for(;K--;)L.push(Number(Kt(v)));const Q=[];let D=Number(Ke(v));for(;D--;)switch(Number(Ke(v))){case 1:{Q.push("query");break}case 2:{Q.push("oneway");break}case 3:{Q.push("composite_query");break}default:throw new Error("unknown annotation")}g.push([q,[re,L,Q]]);break}case-23:{let re=Number(Ke(v));const $=[];for(;re--;){const L=Number(Ke(v)),K=new TextDecoder().decode(gr(v,L)),Q=Kt(v);$.push([K,Q])}g.push([q,$]);break}default:throw new Error("Illegal op_code: "+q)}}const C=[],Z=Number(Ke(v));for(let Y=0;Y<Z;Y++)C.push(Number(Kt(v)));return[g,C]}const[f,u]=o(r);if(u.length<t.length)throw new Error("Wrong number of return values");const p=f.map(v=>Na());function w(v){if(v<-24)throw new Error("future value not supported");if(v<0)switch(v){case-1:return ca;case-2:return aa;case-3:return la;case-4:return fa;case-5:return ma;case-6:return ba;case-7:return _a;case-8:return xa;case-9:return pa;case-10:return ya;case-11:return ga;case-12:return wa;case-13:return ha;case-14:return da;case-15:return ua;case-16:return oa;case-17:return sa;case-24:return Ea;default:throw new Error("Illegal op_code: "+v)}if(v>=f.length)throw new Error("type index out of range");return p[v]}function E(v){switch(v[0]){case-19:{const g=w(v[1]);return va(g)}case-18:{const g=w(v[1]);return Ba(g)}case-20:{const g={};for(const[Z,Y]of v[1]){const q=`_${Z}_`;g[q]=w(Y)}const k=Ta(g),C=k.tryAsTuple();return Array.isArray(C)?Aa(...C):k}case-21:{const g={};for(const[k,C]of v[1]){const Z=`_${k}_`;g[Z]=w(C)}return Sa(g)}case-22:{const[g,k,C]=v[1];return Ia(g.map(Z=>w(Z)),k.map(Z=>w(Z)),C)}case-23:{const g={},k=v[1];for(const[C,Z]of k){let Y=w(Z);if(Y instanceof nr&&(Y=Y.getType()),!(Y instanceof xs))throw new Error("Illegal service definition: services can only contain functions");g[C]=Y}return Ra(g)}default:throw new Error("Illegal op_code: "+v[0])}}f.forEach((v,g)=>{if(v[0]===-22){const k=E(v);p[g].fill(k)}}),f.forEach((v,g)=>{if(v[0]!==-22){const k=E(v);p[g].fill(k)}});const T=u.map(v=>w(v)),I=t.map((v,g)=>v.decodeValue(r,T[g]));for(let v=t.length;v<T.length;v++)T[v].decodeValue(r,T[v]);if(r.byteLength>0)throw new Error("decode: Left-over bytes");return I}const sa=new Lo,oa=new ni,Wu=new Xo,aa=new Jo,ca=new Qo,ua=new Do,fa=new ea,la=new ta,ha=new bs(32),da=new bs(64),pa=new mr(8),ya=new mr(16),ga=new mr(32),wa=new mr(64),ma=new er(8),ba=new er(16),_a=new er(32),xa=new er(64),Ea=new ra;function Aa(...t){return new yi(t)}function va(t){return new pi(t)}function Ba(t){return new Cr(t)}function Ta(t){return new dn(t)}function Sa(t){return new gi(t)}function Na(){return new nr}function Ia(t,e,r=[]){return new xs(t,e,r)}function Ra(t){return new na(t)}const Zu=Object.freeze(Object.defineProperty({__proto__:null,Bool:aa,BoolClass:Jo,ConstructType:rr,Empty:sa,EmptyClass:Lo,FixedIntClass:mr,FixedNatClass:er,Float32:ha,Float64:da,FloatClass:bs,Func:Ia,FuncClass:xs,Int:fa,Int16:ya,Int32:ga,Int64:wa,Int8:pa,IntClass:ea,Nat:la,Nat16:ba,Nat32:_a,Nat64:xa,Nat8:ma,NatClass:ta,Null:ca,NullClass:Qo,Opt:Ba,OptClass:Cr,PrimitiveType:yt,Principal:Ea,PrincipalClass:ra,Rec:Na,RecClass:nr,Record:Ta,RecordClass:dn,Reserved:oa,ReservedClass:ni,Service:Ra,ServiceClass:na,Text:ua,TextClass:Do,Tuple:Aa,TupleClass:yi,Type:di,Unknown:Wu,UnknownClass:Xo,Variant:Sa,VariantClass:gi,Vec:va,VecClass:pi,Visitor:Yu,decode:ia,encode:Di},Symbol.toStringTag,{value:"Module"}));var Ua={},pn={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){var e=ln,r=hn,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=Y,t.INSPECT_MAX_BYTES=50;var i=2147483647;t.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=o(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{var h=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(h,s),h.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function f(h){if(h>i)throw new RangeError('The value "'+h+'" is invalid for option "size"');var s=new Uint8Array(h);return Object.setPrototypeOf(s,u.prototype),s}function u(h,s,a){if(typeof h=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return T(h)}return p(h,s,a)}u.poolSize=8192;function p(h,s,a){if(typeof h=="string")return I(h,s);if(ArrayBuffer.isView(h))return g(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(P(h,ArrayBuffer)||h&&P(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(P(h,SharedArrayBuffer)||h&&P(h.buffer,SharedArrayBuffer)))return k(h,s,a);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var y=h.valueOf&&h.valueOf();if(y!=null&&y!==h)return u.from(y,s,a);var _=C(h);if(_)return _;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return u.from(h[Symbol.toPrimitive]("string"),s,a);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}u.from=function(h,s,a){return p(h,s,a)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function w(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function E(h,s,a){return w(h),h<=0?f(h):s!==void 0?typeof a=="string"?f(h).fill(s,a):f(h).fill(s):f(h)}u.alloc=function(h,s,a){return E(h,s,a)};function T(h){return w(h),f(h<0?0:Z(h)|0)}u.allocUnsafe=function(h){return T(h)},u.allocUnsafeSlow=function(h){return T(h)};function I(h,s){if((typeof s!="string"||s==="")&&(s="utf8"),!u.isEncoding(s))throw new TypeError("Unknown encoding: "+s);var a=q(h,s)|0,y=f(a),_=y.write(h,s);return _!==a&&(y=y.slice(0,_)),y}function v(h){for(var s=h.length<0?0:Z(h.length)|0,a=f(s),y=0;y<s;y+=1)a[y]=h[y]&255;return a}function g(h){if(P(h,Uint8Array)){var s=new Uint8Array(h);return k(s.buffer,s.byteOffset,s.byteLength)}return v(h)}function k(h,s,a){if(s<0||h.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<s+(a||0))throw new RangeError('"length" is outside of buffer bounds');var y;return s===void 0&&a===void 0?y=new Uint8Array(h):a===void 0?y=new Uint8Array(h,s):y=new Uint8Array(h,s,a),Object.setPrototypeOf(y,u.prototype),y}function C(h){if(u.isBuffer(h)){var s=Z(h.length)|0,a=f(s);return a.length===0||h.copy(a,0,0,s),a}if(h.length!==void 0)return typeof h.length!="number"||U(h.length)?f(0):v(h);if(h.type==="Buffer"&&Array.isArray(h.data))return v(h.data)}function Z(h){if(h>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return h|0}function Y(h){return+h!=h&&(h=0),u.alloc(+h)}u.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==u.prototype},u.compare=function(s,a){if(P(s,Uint8Array)&&(s=u.from(s,s.offset,s.byteLength)),P(a,Uint8Array)&&(a=u.from(a,a.offset,a.byteLength)),!u.isBuffer(s)||!u.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===a)return 0;for(var y=s.length,_=a.length,S=0,V=Math.min(y,_);S<V;++S)if(s[S]!==a[S]){y=s[S],_=a[S];break}return y<_?-1:_<y?1:0},u.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(s,a){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return u.alloc(0);var y;if(a===void 0)for(a=0,y=0;y<s.length;++y)a+=s[y].length;var _=u.allocUnsafe(a),S=0;for(y=0;y<s.length;++y){var V=s[y];if(P(V,Uint8Array))S+V.length>_.length?u.from(V).copy(_,S):Uint8Array.prototype.set.call(_,V,S);else if(u.isBuffer(V))V.copy(_,S);else throw new TypeError('"list" argument must be an Array of Buffers');S+=V.length}return _};function q(h,s){if(u.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||P(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);var a=h.length,y=arguments.length>2&&arguments[2]===!0;if(!y&&a===0)return 0;for(var _=!1;;)switch(s){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":return te(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a*2;case"hex":return a>>>1;case"base64":return x(h).length;default:if(_)return y?-1:te(h).length;s=(""+s).toLowerCase(),_=!0}}u.byteLength=q;function re(h,s,a){var y=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((a===void 0||a>this.length)&&(a=this.length),a<=0)||(a>>>=0,s>>>=0,a<=s))return"";for(h||(h="utf8");;)switch(h){case"hex":return ie(this,s,a);case"utf8":case"utf-8":return O(this,s,a);case"ascii":return G(this,s,a);case"latin1":case"binary":return X(this,s,a);case"base64":return N(this,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,s,a);default:if(y)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),y=!0}}u.prototype._isBuffer=!0;function $(h,s,a){var y=h[s];h[s]=h[a],h[a]=y}u.prototype.swap16=function(){var s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<s;a+=2)$(this,a,a+1);return this},u.prototype.swap32=function(){var s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<s;a+=4)$(this,a,a+3),$(this,a+1,a+2);return this},u.prototype.swap64=function(){var s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<s;a+=8)$(this,a,a+7),$(this,a+1,a+6),$(this,a+2,a+5),$(this,a+3,a+4);return this},u.prototype.toString=function(){var s=this.length;return s===0?"":arguments.length===0?O(this,0,s):re.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(s){if(!u.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:u.compare(this,s)===0},u.prototype.inspect=function(){var s="",a=t.INSPECT_MAX_BYTES;return s=this.toString("hex",0,a).replace(/(.{2})/g,"$1 ").trim(),this.length>a&&(s+=" ... "),"<Buffer "+s+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(s,a,y,_,S){if(P(s,Uint8Array)&&(s=u.from(s,s.offset,s.byteLength)),!u.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(a===void 0&&(a=0),y===void 0&&(y=s?s.length:0),_===void 0&&(_=0),S===void 0&&(S=this.length),a<0||y>s.length||_<0||S>this.length)throw new RangeError("out of range index");if(_>=S&&a>=y)return 0;if(_>=S)return-1;if(a>=y)return 1;if(a>>>=0,y>>>=0,_>>>=0,S>>>=0,this===s)return 0;for(var V=S-_,ne=y-a,pe=Math.min(V,ne),ye=this.slice(_,S),xe=s.slice(a,y),d=0;d<pe;++d)if(ye[d]!==xe[d]){V=ye[d],ne=xe[d];break}return V<ne?-1:ne<V?1:0};function L(h,s,a,y,_){if(h.length===0)return-1;if(typeof a=="string"?(y=a,a=0):a>2147483647?a=2147483647:a<-2147483648&&(a=-2147483648),a=+a,U(a)&&(a=_?0:h.length-1),a<0&&(a=h.length+a),a>=h.length){if(_)return-1;a=h.length-1}else if(a<0)if(_)a=0;else return-1;if(typeof s=="string"&&(s=u.from(s,y)),u.isBuffer(s))return s.length===0?-1:K(h,s,a,y,_);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?_?Uint8Array.prototype.indexOf.call(h,s,a):Uint8Array.prototype.lastIndexOf.call(h,s,a):K(h,[s],a,y,_);throw new TypeError("val must be string, number or Buffer")}function K(h,s,a,y,_){var S=1,V=h.length,ne=s.length;if(y!==void 0&&(y=String(y).toLowerCase(),y==="ucs2"||y==="ucs-2"||y==="utf16le"||y==="utf-16le")){if(h.length<2||s.length<2)return-1;S=2,V/=2,ne/=2,a/=2}function pe(l,A){return S===1?l[A]:l.readUInt16BE(A*S)}var ye;if(_){var xe=-1;for(ye=a;ye<V;ye++)if(pe(h,ye)===pe(s,xe===-1?0:ye-xe)){if(xe===-1&&(xe=ye),ye-xe+1===ne)return xe*S}else xe!==-1&&(ye-=ye-xe),xe=-1}else for(a+ne>V&&(a=V-ne),ye=a;ye>=0;ye--){for(var d=!0,c=0;c<ne;c++)if(pe(h,ye+c)!==pe(s,c)){d=!1;break}if(d)return ye}return-1}u.prototype.includes=function(s,a,y){return this.indexOf(s,a,y)!==-1},u.prototype.indexOf=function(s,a,y){return L(this,s,a,y,!0)},u.prototype.lastIndexOf=function(s,a,y){return L(this,s,a,y,!1)};function Q(h,s,a,y){a=Number(a)||0;var _=h.length-a;y?(y=Number(y),y>_&&(y=_)):y=_;var S=s.length;y>S/2&&(y=S/2);for(var V=0;V<y;++V){var ne=parseInt(s.substr(V*2,2),16);if(U(ne))return V;h[a+V]=ne}return V}function D(h,s,a,y){return B(te(s,h.length-a),h,a,y)}function J(h,s,a,y){return B(ae(s),h,a,y)}function he(h,s,a,y){return B(x(s),h,a,y)}function le(h,s,a,y){return B(b(s,h.length-a),h,a,y)}u.prototype.write=function(s,a,y,_){if(a===void 0)_="utf8",y=this.length,a=0;else if(y===void 0&&typeof a=="string")_=a,y=this.length,a=0;else if(isFinite(a))a=a>>>0,isFinite(y)?(y=y>>>0,_===void 0&&(_="utf8")):(_=y,y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var S=this.length-a;if((y===void 0||y>S)&&(y=S),s.length>0&&(y<0||a<0)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");_||(_="utf8");for(var V=!1;;)switch(_){case"hex":return Q(this,s,a,y);case"utf8":case"utf-8":return D(this,s,a,y);case"ascii":case"latin1":case"binary":return J(this,s,a,y);case"base64":return he(this,s,a,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,s,a,y);default:if(V)throw new TypeError("Unknown encoding: "+_);_=(""+_).toLowerCase(),V=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function N(h,s,a){return s===0&&a===h.length?e.fromByteArray(h):e.fromByteArray(h.slice(s,a))}function O(h,s,a){a=Math.min(h.length,a);for(var y=[],_=s;_<a;){var S=h[_],V=null,ne=S>239?4:S>223?3:S>191?2:1;if(_+ne<=a){var pe,ye,xe,d;switch(ne){case 1:S<128&&(V=S);break;case 2:pe=h[_+1],(pe&192)===128&&(d=(S&31)<<6|pe&63,d>127&&(V=d));break;case 3:pe=h[_+1],ye=h[_+2],(pe&192)===128&&(ye&192)===128&&(d=(S&15)<<12|(pe&63)<<6|ye&63,d>2047&&(d<55296||d>57343)&&(V=d));break;case 4:pe=h[_+1],ye=h[_+2],xe=h[_+3],(pe&192)===128&&(ye&192)===128&&(xe&192)===128&&(d=(S&15)<<18|(pe&63)<<12|(ye&63)<<6|xe&63,d>65535&&d<1114112&&(V=d))}}V===null?(V=65533,ne=1):V>65535&&(V-=65536,y.push(V>>>10&1023|55296),V=56320|V&1023),y.push(V),_+=ne}return H(y)}var W=4096;function H(h){var s=h.length;if(s<=W)return String.fromCharCode.apply(String,h);for(var a="",y=0;y<s;)a+=String.fromCharCode.apply(String,h.slice(y,y+=W));return a}function G(h,s,a){var y="";a=Math.min(h.length,a);for(var _=s;_<a;++_)y+=String.fromCharCode(h[_]&127);return y}function X(h,s,a){var y="";a=Math.min(h.length,a);for(var _=s;_<a;++_)y+=String.fromCharCode(h[_]);return y}function ie(h,s,a){var y=h.length;(!s||s<0)&&(s=0),(!a||a<0||a>y)&&(a=y);for(var _="",S=s;S<a;++S)_+=M[h[S]];return _}function we(h,s,a){for(var y=h.slice(s,a),_="",S=0;S<y.length-1;S+=2)_+=String.fromCharCode(y[S]+y[S+1]*256);return _}u.prototype.slice=function(s,a){var y=this.length;s=~~s,a=a===void 0?y:~~a,s<0?(s+=y,s<0&&(s=0)):s>y&&(s=y),a<0?(a+=y,a<0&&(a=0)):a>y&&(a=y),a<s&&(a=s);var _=this.subarray(s,a);return Object.setPrototypeOf(_,u.prototype),_};function oe(h,s,a){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+s>a)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(s,a,y){s=s>>>0,a=a>>>0,y||oe(s,a,this.length);for(var _=this[s],S=1,V=0;++V<a&&(S*=256);)_+=this[s+V]*S;return _},u.prototype.readUintBE=u.prototype.readUIntBE=function(s,a,y){s=s>>>0,a=a>>>0,y||oe(s,a,this.length);for(var _=this[s+--a],S=1;a>0&&(S*=256);)_+=this[s+--a]*S;return _},u.prototype.readUint8=u.prototype.readUInt8=function(s,a){return s=s>>>0,a||oe(s,1,this.length),this[s]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(s,a){return s=s>>>0,a||oe(s,2,this.length),this[s]|this[s+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(s,a){return s=s>>>0,a||oe(s,2,this.length),this[s]<<8|this[s+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},u.prototype.readIntLE=function(s,a,y){s=s>>>0,a=a>>>0,y||oe(s,a,this.length);for(var _=this[s],S=1,V=0;++V<a&&(S*=256);)_+=this[s+V]*S;return S*=128,_>=S&&(_-=Math.pow(2,8*a)),_},u.prototype.readIntBE=function(s,a,y){s=s>>>0,a=a>>>0,y||oe(s,a,this.length);for(var _=a,S=1,V=this[s+--_];_>0&&(S*=256);)V+=this[s+--_]*S;return S*=128,V>=S&&(V-=Math.pow(2,8*a)),V},u.prototype.readInt8=function(s,a){return s=s>>>0,a||oe(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},u.prototype.readInt16LE=function(s,a){s=s>>>0,a||oe(s,2,this.length);var y=this[s]|this[s+1]<<8;return y&32768?y|4294901760:y},u.prototype.readInt16BE=function(s,a){s=s>>>0,a||oe(s,2,this.length);var y=this[s+1]|this[s]<<8;return y&32768?y|4294901760:y},u.prototype.readInt32LE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},u.prototype.readInt32BE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},u.prototype.readFloatLE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),r.read(this,s,!0,23,4)},u.prototype.readFloatBE=function(s,a){return s=s>>>0,a||oe(s,4,this.length),r.read(this,s,!1,23,4)},u.prototype.readDoubleLE=function(s,a){return s=s>>>0,a||oe(s,8,this.length),r.read(this,s,!0,52,8)},u.prototype.readDoubleBE=function(s,a){return s=s>>>0,a||oe(s,8,this.length),r.read(this,s,!1,52,8)};function fe(h,s,a,y,_,S){if(!u.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>_||s<S)throw new RangeError('"value" argument is out of bounds');if(a+y>h.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(s,a,y,_){if(s=+s,a=a>>>0,y=y>>>0,!_){var S=Math.pow(2,8*y)-1;fe(this,s,a,y,S,0)}var V=1,ne=0;for(this[a]=s&255;++ne<y&&(V*=256);)this[a+ne]=s/V&255;return a+y},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(s,a,y,_){if(s=+s,a=a>>>0,y=y>>>0,!_){var S=Math.pow(2,8*y)-1;fe(this,s,a,y,S,0)}var V=y-1,ne=1;for(this[a+V]=s&255;--V>=0&&(ne*=256);)this[a+V]=s/ne&255;return a+y},u.prototype.writeUint8=u.prototype.writeUInt8=function(s,a,y){return s=+s,a=a>>>0,y||fe(this,s,a,1,255,0),this[a]=s&255,a+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(s,a,y){return s=+s,a=a>>>0,y||fe(this,s,a,2,65535,0),this[a]=s&255,this[a+1]=s>>>8,a+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(s,a,y){return s=+s,a=a>>>0,y||fe(this,s,a,2,65535,0),this[a]=s>>>8,this[a+1]=s&255,a+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(s,a,y){return s=+s,a=a>>>0,y||fe(this,s,a,4,4294967295,0),this[a+3]=s>>>24,this[a+2]=s>>>16,this[a+1]=s>>>8,this[a]=s&255,a+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(s,a,y){return s=+s,a=a>>>0,y||fe(this,s,a,4,4294967295,0),this[a]=s>>>24,this[a+1]=s>>>16,this[a+2]=s>>>8,this[a+3]=s&255,a+4},u.prototype.writeIntLE=function(s,a,y,_){if(s=+s,a=a>>>0,!_){var S=Math.pow(2,8*y-1);fe(this,s,a,y,S-1,-S)}var V=0,ne=1,pe=0;for(this[a]=s&255;++V<y&&(ne*=256);)s<0&&pe===0&&this[a+V-1]!==0&&(pe=1),this[a+V]=(s/ne>>0)-pe&255;return a+y},u.prototype.writeIntBE=function(s,a,y,_){if(s=+s,a=a>>>0,!_){var S=Math.pow(2,8*y-1);fe(this,s,a,y,S-1,-S)}var V=y-1,ne=1,pe=0;for(this[a+V]=s&255;--V>=0&&(ne*=256);)s<0&&pe===0&&this[a+V+1]!==0&&(pe=1),this[a+V]=(s/ne>>0)-pe&255;return a+y},u.prototype.writeInt8=function(s,a,y){return s=+s,a=a>>>0,y||fe(this,s,a,1,127,-128),s<0&&(s=255+s+1),this[a]=s&255,a+1},u.prototype.writeInt16LE=function(s,a,y){return s=+s,a=a>>>0,y||fe(this,s,a,2,32767,-32768),this[a]=s&255,this[a+1]=s>>>8,a+2},u.prototype.writeInt16BE=function(s,a,y){return s=+s,a=a>>>0,y||fe(this,s,a,2,32767,-32768),this[a]=s>>>8,this[a+1]=s&255,a+2},u.prototype.writeInt32LE=function(s,a,y){return s=+s,a=a>>>0,y||fe(this,s,a,4,2147483647,-2147483648),this[a]=s&255,this[a+1]=s>>>8,this[a+2]=s>>>16,this[a+3]=s>>>24,a+4},u.prototype.writeInt32BE=function(s,a,y){return s=+s,a=a>>>0,y||fe(this,s,a,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[a]=s>>>24,this[a+1]=s>>>16,this[a+2]=s>>>8,this[a+3]=s&255,a+4};function ee(h,s,a,y,_,S){if(a+y>h.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("Index out of range")}function m(h,s,a,y,_){return s=+s,a=a>>>0,_||ee(h,s,a,4),r.write(h,s,a,y,23,4),a+4}u.prototype.writeFloatLE=function(s,a,y){return m(this,s,a,!0,y)},u.prototype.writeFloatBE=function(s,a,y){return m(this,s,a,!1,y)};function se(h,s,a,y,_){return s=+s,a=a>>>0,_||ee(h,s,a,8),r.write(h,s,a,y,52,8),a+8}u.prototype.writeDoubleLE=function(s,a,y){return se(this,s,a,!0,y)},u.prototype.writeDoubleBE=function(s,a,y){return se(this,s,a,!1,y)},u.prototype.copy=function(s,a,y,_){if(!u.isBuffer(s))throw new TypeError("argument should be a Buffer");if(y||(y=0),!_&&_!==0&&(_=this.length),a>=s.length&&(a=s.length),a||(a=0),_>0&&_<y&&(_=y),_===y||s.length===0||this.length===0)return 0;if(a<0)throw new RangeError("targetStart out of bounds");if(y<0||y>=this.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("sourceEnd out of bounds");_>this.length&&(_=this.length),s.length-a<_-y&&(_=s.length-a+y);var S=_-y;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(a,y,_):Uint8Array.prototype.set.call(s,this.subarray(y,_),a),S},u.prototype.fill=function(s,a,y,_){if(typeof s=="string"){if(typeof a=="string"?(_=a,a=0,y=this.length):typeof y=="string"&&(_=y,y=this.length),_!==void 0&&typeof _!="string")throw new TypeError("encoding must be a string");if(typeof _=="string"&&!u.isEncoding(_))throw new TypeError("Unknown encoding: "+_);if(s.length===1){var S=s.charCodeAt(0);(_==="utf8"&&S<128||_==="latin1")&&(s=S)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(a<0||this.length<a||this.length<y)throw new RangeError("Out of range index");if(y<=a)return this;a=a>>>0,y=y===void 0?this.length:y>>>0,s||(s=0);var V;if(typeof s=="number")for(V=a;V<y;++V)this[V]=s;else{var ne=u.isBuffer(s)?s:u.from(s,_),pe=ne.length;if(pe===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(V=0;V<y-a;++V)this[V+a]=ne[V%pe]}return this};var ue=/[^+/0-9A-Za-z-_]/g;function de(h){if(h=h.split("=")[0],h=h.trim().replace(ue,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function te(h,s){s=s||1/0;for(var a,y=h.length,_=null,S=[],V=0;V<y;++V){if(a=h.charCodeAt(V),a>55295&&a<57344){if(!_){if(a>56319){(s-=3)>-1&&S.push(239,191,189);continue}else if(V+1===y){(s-=3)>-1&&S.push(239,191,189);continue}_=a;continue}if(a<56320){(s-=3)>-1&&S.push(239,191,189),_=a;continue}a=(_-55296<<10|a-56320)+65536}else _&&(s-=3)>-1&&S.push(239,191,189);if(_=null,a<128){if((s-=1)<0)break;S.push(a)}else if(a<2048){if((s-=2)<0)break;S.push(a>>6|192,a&63|128)}else if(a<65536){if((s-=3)<0)break;S.push(a>>12|224,a>>6&63|128,a&63|128)}else if(a<1114112){if((s-=4)<0)break;S.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw new Error("Invalid code point")}return S}function ae(h){for(var s=[],a=0;a<h.length;++a)s.push(h.charCodeAt(a)&255);return s}function b(h,s){for(var a,y,_,S=[],V=0;V<h.length&&!((s-=2)<0);++V)a=h.charCodeAt(V),y=a>>8,_=a%256,S.push(_),S.push(y);return S}function x(h){return e.toByteArray(de(h))}function B(h,s,a,y){for(var _=0;_<y&&!(_+a>=s.length||_>=h.length);++_)s[_+a]=h[_];return _}function P(h,s){return h instanceof s||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===s.name}function U(h){return h!==h}var M=function(){for(var h="0123456789abcdef",s=new Array(256),a=0;a<16;++a)for(var y=a*16,_=0;_<16;++_)s[y+_]=h[a]+h[_];return s}()})(pn);var Oa={exports:{}};(function(t){(function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,o=Math.floor,f="[BigNumber Error] ",u=f+"Number primitive has more than 15 significant digits: ",p=1e14,w=14,E=9007199254740991,T=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],I=1e7,v=1e9;function g(L){var K,Q,D,J=m.prototype={constructor:m,toString:null,valueOf:null},he=new m(1),le=20,N=4,O=-7,W=21,H=-1e7,G=1e7,X=!1,ie=1,we=0,oe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},fe="0123456789abcdefghijklmnopqrstuvwxyz",ee=!0;function m(b,x){var B,P,U,M,h,s,a,y,_=this;if(!(_ instanceof m))return new m(b,x);if(x==null){if(b&&b._isBigNumber===!0){_.s=b.s,!b.c||b.e>G?_.c=_.e=null:b.e<H?_.c=[_.e=0]:(_.e=b.e,_.c=b.c.slice());return}if((s=typeof b=="number")&&b*0==0){if(_.s=1/b<0?(b=-b,-1):1,b===~~b){for(M=0,h=b;h>=10;h/=10,M++);M>G?_.c=_.e=null:(_.e=M,_.c=[b]);return}y=String(b)}else{if(!n.test(y=String(b)))return D(_,y,s);_.s=y.charCodeAt(0)==45?(y=y.slice(1),-1):1}(M=y.indexOf("."))>-1&&(y=y.replace(".","")),(h=y.search(/e/i))>0?(M<0&&(M=h),M+=+y.slice(h+1),y=y.substring(0,h)):M<0&&(M=y.length)}else{if(Y(x,2,fe.length,"Base"),x==10&&ee)return _=new m(b),te(_,le+_.e+1,N);if(y=String(b),s=typeof b=="number"){if(b*0!=0)return D(_,y,s,x);if(_.s=1/b<0?(y=y.slice(1),-1):1,m.DEBUG&&y.replace(/^0\.0*|\./,"").length>15)throw Error(u+b)}else _.s=y.charCodeAt(0)===45?(y=y.slice(1),-1):1;for(B=fe.slice(0,x),M=h=0,a=y.length;h<a;h++)if(B.indexOf(P=y.charAt(h))<0){if(P=="."){if(h>M){M=a;continue}}else if(!U&&(y==y.toUpperCase()&&(y=y.toLowerCase())||y==y.toLowerCase()&&(y=y.toUpperCase()))){U=!0,h=-1,M=0;continue}return D(_,String(b),s,x)}s=!1,y=Q(y,x,10,_.s),(M=y.indexOf("."))>-1?y=y.replace(".",""):M=y.length}for(h=0;y.charCodeAt(h)===48;h++);for(a=y.length;y.charCodeAt(--a)===48;);if(y=y.slice(h,++a)){if(a-=h,s&&m.DEBUG&&a>15&&(b>E||b!==o(b)))throw Error(u+_.s*b);if((M=M-h-1)>G)_.c=_.e=null;else if(M<H)_.c=[_.e=0];else{if(_.e=M,_.c=[],h=(M+1)%w,M<0&&(h+=w),h<a){for(h&&_.c.push(+y.slice(0,h)),a-=w;h<a;)_.c.push(+y.slice(h,h+=w));h=w-(y=y.slice(h)).length}else h-=a;for(;h--;y+="0");_.c.push(+y)}}else _.c=[_.e=0]}m.clone=g,m.ROUND_UP=0,m.ROUND_DOWN=1,m.ROUND_CEIL=2,m.ROUND_FLOOR=3,m.ROUND_HALF_UP=4,m.ROUND_HALF_DOWN=5,m.ROUND_HALF_EVEN=6,m.ROUND_HALF_CEIL=7,m.ROUND_HALF_FLOOR=8,m.EUCLID=9,m.config=m.set=function(b){var x,B;if(b!=null)if(typeof b=="object"){if(b.hasOwnProperty(x="DECIMAL_PLACES")&&(B=b[x],Y(B,0,v,x),le=B),b.hasOwnProperty(x="ROUNDING_MODE")&&(B=b[x],Y(B,0,8,x),N=B),b.hasOwnProperty(x="EXPONENTIAL_AT")&&(B=b[x],B&&B.pop?(Y(B[0],-v,0,x),Y(B[1],0,v,x),O=B[0],W=B[1]):(Y(B,-v,v,x),O=-(W=B<0?-B:B))),b.hasOwnProperty(x="RANGE"))if(B=b[x],B&&B.pop)Y(B[0],-v,-1,x),Y(B[1],1,v,x),H=B[0],G=B[1];else if(Y(B,-v,v,x),B)H=-(G=B<0?-B:B);else throw Error(f+x+" cannot be zero: "+B);if(b.hasOwnProperty(x="CRYPTO"))if(B=b[x],B===!!B)if(B)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))X=B;else throw X=!B,Error(f+"crypto unavailable");else X=B;else throw Error(f+x+" not true or false: "+B);if(b.hasOwnProperty(x="MODULO_MODE")&&(B=b[x],Y(B,0,9,x),ie=B),b.hasOwnProperty(x="POW_PRECISION")&&(B=b[x],Y(B,0,v,x),we=B),b.hasOwnProperty(x="FORMAT"))if(B=b[x],typeof B=="object")oe=B;else throw Error(f+x+" not an object: "+B);if(b.hasOwnProperty(x="ALPHABET"))if(B=b[x],typeof B=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(B))ee=B.slice(0,10)=="0123456789",fe=B;else throw Error(f+x+" invalid: "+B)}else throw Error(f+"Object expected: "+b);return{DECIMAL_PLACES:le,ROUNDING_MODE:N,EXPONENTIAL_AT:[O,W],RANGE:[H,G],CRYPTO:X,MODULO_MODE:ie,POW_PRECISION:we,FORMAT:oe,ALPHABET:fe}},m.isBigNumber=function(b){if(!b||b._isBigNumber!==!0)return!1;if(!m.DEBUG)return!0;var x,B,P=b.c,U=b.e,M=b.s;e:if({}.toString.call(P)=="[object Array]"){if((M===1||M===-1)&&U>=-v&&U<=v&&U===o(U)){if(P[0]===0){if(U===0&&P.length===1)return!0;break e}if(x=(U+1)%w,x<1&&(x+=w),String(P[0]).length==x){for(x=0;x<P.length;x++)if(B=P[x],B<0||B>=p||B!==o(B))break e;if(B!==0)return!0}}}else if(P===null&&U===null&&(M===null||M===1||M===-1))return!0;throw Error(f+"Invalid BigNumber: "+b)},m.maximum=m.max=function(){return ue(arguments,-1)},m.minimum=m.min=function(){return ue(arguments,1)},m.random=function(){var b=9007199254740992,x=Math.random()*b&2097151?function(){return o(Math.random()*b)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(B){var P,U,M,h,s,a=0,y=[],_=new m(he);if(B==null?B=le:Y(B,0,v),h=i(B/w),X)if(crypto.getRandomValues){for(P=crypto.getRandomValues(new Uint32Array(h*=2));a<h;)s=P[a]*131072+(P[a+1]>>>11),s>=9e15?(U=crypto.getRandomValues(new Uint32Array(2)),P[a]=U[0],P[a+1]=U[1]):(y.push(s%1e14),a+=2);a=h/2}else if(crypto.randomBytes){for(P=crypto.randomBytes(h*=7);a<h;)s=(P[a]&31)*281474976710656+P[a+1]*1099511627776+P[a+2]*4294967296+P[a+3]*16777216+(P[a+4]<<16)+(P[a+5]<<8)+P[a+6],s>=9e15?crypto.randomBytes(7).copy(P,a):(y.push(s%1e14),a+=7);a=h/7}else throw X=!1,Error(f+"crypto unavailable");if(!X)for(;a<h;)s=x(),s<9e15&&(y[a++]=s%1e14);for(h=y[--a],B%=w,h&&B&&(s=T[w-B],y[a]=o(h/s)*s);y[a]===0;y.pop(),a--);if(a<0)y=[M=0];else{for(M=-1;y[0]===0;y.splice(0,1),M-=w);for(a=1,s=y[0];s>=10;s/=10,a++);a<w&&(M-=w-a)}return _.e=M,_.c=y,_}}(),m.sum=function(){for(var b=1,x=arguments,B=new m(x[0]);b<x.length;)B=B.plus(x[b++]);return B},Q=function(){var b="0123456789";function x(B,P,U,M){for(var h,s=[0],a,y=0,_=B.length;y<_;){for(a=s.length;a--;s[a]*=P);for(s[0]+=M.indexOf(B.charAt(y++)),h=0;h<s.length;h++)s[h]>U-1&&(s[h+1]==null&&(s[h+1]=0),s[h+1]+=s[h]/U|0,s[h]%=U)}return s.reverse()}return function(B,P,U,M,h){var s,a,y,_,S,V,ne,pe,ye=B.indexOf("."),xe=le,d=N;for(ye>=0&&(_=we,we=0,B=B.replace(".",""),pe=new m(P),V=pe.pow(B.length-ye),we=_,pe.c=x($(C(V.c),V.e,"0"),10,U,b),pe.e=pe.c.length),ne=x(B,P,U,h?(s=fe,b):(s=b,fe)),y=_=ne.length;ne[--_]==0;ne.pop());if(!ne[0])return s.charAt(0);if(ye<0?--y:(V.c=ne,V.e=y,V.s=M,V=K(V,pe,xe,d,U),ne=V.c,S=V.r,y=V.e),a=y+xe+1,ye=ne[a],_=U/2,S=S||a<0||ne[a+1]!=null,S=d<4?(ye!=null||S)&&(d==0||d==(V.s<0?3:2)):ye>_||ye==_&&(d==4||S||d==6&&ne[a-1]&1||d==(V.s<0?8:7)),a<1||!ne[0])B=S?$(s.charAt(1),-xe,s.charAt(0)):s.charAt(0);else{if(ne.length=a,S)for(--U;++ne[--a]>U;)ne[a]=0,a||(++y,ne=[1].concat(ne));for(_=ne.length;!ne[--_];);for(ye=0,B="";ye<=_;B+=s.charAt(ne[ye++]));B=$(B,y,s.charAt(0))}return B}}(),K=function(){function b(P,U,M){var h,s,a,y,_=0,S=P.length,V=U%I,ne=U/I|0;for(P=P.slice();S--;)a=P[S]%I,y=P[S]/I|0,h=ne*a+y*V,s=V*a+h%I*I+_,_=(s/M|0)+(h/I|0)+ne*y,P[S]=s%M;return _&&(P=[_].concat(P)),P}function x(P,U,M,h){var s,a;if(M!=h)a=M>h?1:-1;else for(s=a=0;s<M;s++)if(P[s]!=U[s]){a=P[s]>U[s]?1:-1;break}return a}function B(P,U,M,h){for(var s=0;M--;)P[M]-=s,s=P[M]<U[M]?1:0,P[M]=s*h+P[M]-U[M];for(;!P[0]&&P.length>1;P.splice(0,1));}return function(P,U,M,h,s){var a,y,_,S,V,ne,pe,ye,xe,d,c,l,A,F,z,j,_e,ve=P.s==U.s?1:-1,Ee=P.c,be=U.c;if(!Ee||!Ee[0]||!be||!be[0])return new m(!P.s||!U.s||(Ee?be&&Ee[0]==be[0]:!be)?NaN:Ee&&Ee[0]==0||!be?ve*0:ve/0);for(ye=new m(ve),xe=ye.c=[],y=P.e-U.e,ve=M+y+1,s||(s=p,y=k(P.e/w)-k(U.e/w),ve=ve/w|0),_=0;be[_]==(Ee[_]||0);_++);if(be[_]>(Ee[_]||0)&&y--,ve<0)xe.push(1),S=!0;else{for(F=Ee.length,j=be.length,_=0,ve+=2,V=o(s/(be[0]+1)),V>1&&(be=b(be,V,s),Ee=b(Ee,V,s),j=be.length,F=Ee.length),A=j,d=Ee.slice(0,j),c=d.length;c<j;d[c++]=0);_e=be.slice(),_e=[0].concat(_e),z=be[0],be[1]>=s/2&&z++;do{if(V=0,a=x(be,d,j,c),a<0){if(l=d[0],j!=c&&(l=l*s+(d[1]||0)),V=o(l/z),V>1)for(V>=s&&(V=s-1),ne=b(be,V,s),pe=ne.length,c=d.length;x(ne,d,pe,c)==1;)V--,B(ne,j<pe?_e:be,pe,s),pe=ne.length,a=1;else V==0&&(a=V=1),ne=be.slice(),pe=ne.length;if(pe<c&&(ne=[0].concat(ne)),B(d,ne,c,s),c=d.length,a==-1)for(;x(be,d,j,c)<1;)V++,B(d,j<c?_e:be,c,s),c=d.length}else a===0&&(V++,d=[0]);xe[_++]=V,d[0]?d[c++]=Ee[A]||0:(d=[Ee[A]],c=1)}while((A++<F||d[0]!=null)&&ve--);S=d[0]!=null,xe[0]||xe.splice(0,1)}if(s==p){for(_=1,ve=xe[0];ve>=10;ve/=10,_++);te(ye,M+(ye.e=_+y*w-1)+1,h,S)}else ye.e=y,ye.r=+S;return ye}}();function se(b,x,B,P){var U,M,h,s,a;if(B==null?B=N:Y(B,0,8),!b.c)return b.toString();if(U=b.c[0],h=b.e,x==null)a=C(b.c),a=P==1||P==2&&(h<=O||h>=W)?re(a,h):$(a,h,"0");else if(b=te(new m(b),x,B),M=b.e,a=C(b.c),s=a.length,P==1||P==2&&(x<=M||M<=O)){for(;s<x;a+="0",s++);a=re(a,M)}else if(x-=h,a=$(a,M,"0"),M+1>s){if(--x>0)for(a+=".";x--;a+="0");}else if(x+=M-s,x>0)for(M+1==s&&(a+=".");x--;a+="0");return b.s<0&&U?"-"+a:a}function ue(b,x){for(var B,P,U=1,M=new m(b[0]);U<b.length;U++)P=new m(b[U]),(!P.s||(B=Z(M,P))===x||B===0&&M.s===x)&&(M=P);return M}function de(b,x,B){for(var P=1,U=x.length;!x[--U];x.pop());for(U=x[0];U>=10;U/=10,P++);return(B=P+B*w-1)>G?b.c=b.e=null:B<H?b.c=[b.e=0]:(b.e=B,b.c=x),b}D=function(){var b=/^(-?)0([xbo])(?=\w[\w.]*$)/i,x=/^([^.]+)\.$/,B=/^\.([^.]+)$/,P=/^-?(Infinity|NaN)$/,U=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(M,h,s,a){var y,_=s?h:h.replace(U,"");if(P.test(_))M.s=isNaN(_)?null:_<0?-1:1;else{if(!s&&(_=_.replace(b,function(S,V,ne){return y=(ne=ne.toLowerCase())=="x"?16:ne=="b"?2:8,!a||a==y?V:S}),a&&(y=a,_=_.replace(x,"$1").replace(B,"0.$1")),h!=_))return new m(_,y);if(m.DEBUG)throw Error(f+"Not a"+(a?" base "+a:"")+" number: "+h);M.s=null}M.c=M.e=null}}();function te(b,x,B,P){var U,M,h,s,a,y,_,S=b.c,V=T;if(S){e:{for(U=1,s=S[0];s>=10;s/=10,U++);if(M=x-U,M<0)M+=w,h=x,a=S[y=0],_=o(a/V[U-h-1]%10);else if(y=i((M+1)/w),y>=S.length)if(P){for(;S.length<=y;S.push(0));a=_=0,U=1,M%=w,h=M-w+1}else break e;else{for(a=s=S[y],U=1;s>=10;s/=10,U++);M%=w,h=M-w+U,_=h<0?0:o(a/V[U-h-1]%10)}if(P=P||x<0||S[y+1]!=null||(h<0?a:a%V[U-h-1]),P=B<4?(_||P)&&(B==0||B==(b.s<0?3:2)):_>5||_==5&&(B==4||P||B==6&&(M>0?h>0?a/V[U-h]:0:S[y-1])%10&1||B==(b.s<0?8:7)),x<1||!S[0])return S.length=0,P?(x-=b.e+1,S[0]=V[(w-x%w)%w],b.e=-x||0):S[0]=b.e=0,b;if(M==0?(S.length=y,s=1,y--):(S.length=y+1,s=V[w-M],S[y]=h>0?o(a/V[U-h]%V[h])*s:0),P)for(;;)if(y==0){for(M=1,h=S[0];h>=10;h/=10,M++);for(h=S[0]+=s,s=1;h>=10;h/=10,s++);M!=s&&(b.e++,S[0]==p&&(S[0]=1));break}else{if(S[y]+=s,S[y]!=p)break;S[y--]=0,s=1}for(M=S.length;S[--M]===0;S.pop());}b.e>G?b.c=b.e=null:b.e<H&&(b.c=[b.e=0])}return b}function ae(b){var x,B=b.e;return B===null?b.toString():(x=C(b.c),x=B<=O||B>=W?re(x,B):$(x,B,"0"),b.s<0?"-"+x:x)}return J.absoluteValue=J.abs=function(){var b=new m(this);return b.s<0&&(b.s=1),b},J.comparedTo=function(b,x){return Z(this,new m(b,x))},J.decimalPlaces=J.dp=function(b,x){var B,P,U,M=this;if(b!=null)return Y(b,0,v),x==null?x=N:Y(x,0,8),te(new m(M),b+M.e+1,x);if(!(B=M.c))return null;if(P=((U=B.length-1)-k(this.e/w))*w,U=B[U])for(;U%10==0;U/=10,P--);return P<0&&(P=0),P},J.dividedBy=J.div=function(b,x){return K(this,new m(b,x),le,N)},J.dividedToIntegerBy=J.idiv=function(b,x){return K(this,new m(b,x),0,1)},J.exponentiatedBy=J.pow=function(b,x){var B,P,U,M,h,s,a,y,_,S=this;if(b=new m(b),b.c&&!b.isInteger())throw Error(f+"Exponent not an integer: "+ae(b));if(x!=null&&(x=new m(x)),s=b.e>14,!S.c||!S.c[0]||S.c[0]==1&&!S.e&&S.c.length==1||!b.c||!b.c[0])return _=new m(Math.pow(+ae(S),s?b.s*(2-q(b)):+ae(b))),x?_.mod(x):_;if(a=b.s<0,x){if(x.c?!x.c[0]:!x.s)return new m(NaN);P=!a&&S.isInteger()&&x.isInteger(),P&&(S=S.mod(x))}else{if(b.e>9&&(S.e>0||S.e<-1||(S.e==0?S.c[0]>1||s&&S.c[1]>=24e7:S.c[0]<8e13||s&&S.c[0]<=9999975e7)))return M=S.s<0&&q(b)?-0:0,S.e>-1&&(M=1/M),new m(a?1/M:M);we&&(M=i(we/w+2))}for(s?(B=new m(.5),a&&(b.s=1),y=q(b)):(U=Math.abs(+ae(b)),y=U%2),_=new m(he);;){if(y){if(_=_.times(S),!_.c)break;M?_.c.length>M&&(_.c.length=M):P&&(_=_.mod(x))}if(U){if(U=o(U/2),U===0)break;y=U%2}else if(b=b.times(B),te(b,b.e+1,1),b.e>14)y=q(b);else{if(U=+ae(b),U===0)break;y=U%2}S=S.times(S),M?S.c&&S.c.length>M&&(S.c.length=M):P&&(S=S.mod(x))}return P?_:(a&&(_=he.div(_)),x?_.mod(x):M?te(_,we,N,h):_)},J.integerValue=function(b){var x=new m(this);return b==null?b=N:Y(b,0,8),te(x,x.e+1,b)},J.isEqualTo=J.eq=function(b,x){return Z(this,new m(b,x))===0},J.isFinite=function(){return!!this.c},J.isGreaterThan=J.gt=function(b,x){return Z(this,new m(b,x))>0},J.isGreaterThanOrEqualTo=J.gte=function(b,x){return(x=Z(this,new m(b,x)))===1||x===0},J.isInteger=function(){return!!this.c&&k(this.e/w)>this.c.length-2},J.isLessThan=J.lt=function(b,x){return Z(this,new m(b,x))<0},J.isLessThanOrEqualTo=J.lte=function(b,x){return(x=Z(this,new m(b,x)))===-1||x===0},J.isNaN=function(){return!this.s},J.isNegative=function(){return this.s<0},J.isPositive=function(){return this.s>0},J.isZero=function(){return!!this.c&&this.c[0]==0},J.minus=function(b,x){var B,P,U,M,h=this,s=h.s;if(b=new m(b,x),x=b.s,!s||!x)return new m(NaN);if(s!=x)return b.s=-x,h.plus(b);var a=h.e/w,y=b.e/w,_=h.c,S=b.c;if(!a||!y){if(!_||!S)return _?(b.s=-x,b):new m(S?h:NaN);if(!_[0]||!S[0])return S[0]?(b.s=-x,b):new m(_[0]?h:N==3?-0:0)}if(a=k(a),y=k(y),_=_.slice(),s=a-y){for((M=s<0)?(s=-s,U=_):(y=a,U=S),U.reverse(),x=s;x--;U.push(0));U.reverse()}else for(P=(M=(s=_.length)<(x=S.length))?s:x,s=x=0;x<P;x++)if(_[x]!=S[x]){M=_[x]<S[x];break}if(M&&(U=_,_=S,S=U,b.s=-b.s),x=(P=S.length)-(B=_.length),x>0)for(;x--;_[B++]=0);for(x=p-1;P>s;){if(_[--P]<S[P]){for(B=P;B&&!_[--B];_[B]=x);--_[B],_[P]+=p}_[P]-=S[P]}for(;_[0]==0;_.splice(0,1),--y);return _[0]?de(b,_,y):(b.s=N==3?-1:1,b.c=[b.e=0],b)},J.modulo=J.mod=function(b,x){var B,P,U=this;return b=new m(b,x),!U.c||!b.s||b.c&&!b.c[0]?new m(NaN):!b.c||U.c&&!U.c[0]?new m(U):(ie==9?(P=b.s,b.s=1,B=K(U,b,0,3),b.s=P,B.s*=P):B=K(U,b,0,ie),b=U.minus(B.times(b)),!b.c[0]&&ie==1&&(b.s=U.s),b)},J.multipliedBy=J.times=function(b,x){var B,P,U,M,h,s,a,y,_,S,V,ne,pe,ye,xe,d=this,c=d.c,l=(b=new m(b,x)).c;if(!c||!l||!c[0]||!l[0])return!d.s||!b.s||c&&!c[0]&&!l||l&&!l[0]&&!c?b.c=b.e=b.s=null:(b.s*=d.s,!c||!l?b.c=b.e=null:(b.c=[0],b.e=0)),b;for(P=k(d.e/w)+k(b.e/w),b.s*=d.s,a=c.length,S=l.length,a<S&&(pe=c,c=l,l=pe,U=a,a=S,S=U),U=a+S,pe=[];U--;pe.push(0));for(ye=p,xe=I,U=S;--U>=0;){for(B=0,V=l[U]%xe,ne=l[U]/xe|0,h=a,M=U+h;M>U;)y=c[--h]%xe,_=c[h]/xe|0,s=ne*y+_*V,y=V*y+s%xe*xe+pe[M]+B,B=(y/ye|0)+(s/xe|0)+ne*_,pe[M--]=y%ye;pe[M]=B}return B?++P:pe.splice(0,1),de(b,pe,P)},J.negated=function(){var b=new m(this);return b.s=-b.s||null,b},J.plus=function(b,x){var B,P=this,U=P.s;if(b=new m(b,x),x=b.s,!U||!x)return new m(NaN);if(U!=x)return b.s=-x,P.minus(b);var M=P.e/w,h=b.e/w,s=P.c,a=b.c;if(!M||!h){if(!s||!a)return new m(U/0);if(!s[0]||!a[0])return a[0]?b:new m(s[0]?P:U*0)}if(M=k(M),h=k(h),s=s.slice(),U=M-h){for(U>0?(h=M,B=a):(U=-U,B=s),B.reverse();U--;B.push(0));B.reverse()}for(U=s.length,x=a.length,U-x<0&&(B=a,a=s,s=B,x=U),U=0;x;)U=(s[--x]=s[x]+a[x]+U)/p|0,s[x]=p===s[x]?0:s[x]%p;return U&&(s=[U].concat(s),++h),de(b,s,h)},J.precision=J.sd=function(b,x){var B,P,U,M=this;if(b!=null&&b!==!!b)return Y(b,1,v),x==null?x=N:Y(x,0,8),te(new m(M),b,x);if(!(B=M.c))return null;if(U=B.length-1,P=U*w+1,U=B[U]){for(;U%10==0;U/=10,P--);for(U=B[0];U>=10;U/=10,P++);}return b&&M.e+1>P&&(P=M.e+1),P},J.shiftedBy=function(b){return Y(b,-E,E),this.times("1e"+b)},J.squareRoot=J.sqrt=function(){var b,x,B,P,U,M=this,h=M.c,s=M.s,a=M.e,y=le+4,_=new m("0.5");if(s!==1||!h||!h[0])return new m(!s||s<0&&(!h||h[0])?NaN:h?M:1/0);if(s=Math.sqrt(+ae(M)),s==0||s==1/0?(x=C(h),(x.length+a)%2==0&&(x+="0"),s=Math.sqrt(+x),a=k((a+1)/2)-(a<0||a%2),s==1/0?x="5e"+a:(x=s.toExponential(),x=x.slice(0,x.indexOf("e")+1)+a),B=new m(x)):B=new m(s+""),B.c[0]){for(a=B.e,s=a+y,s<3&&(s=0);;)if(U=B,B=_.times(U.plus(K(M,U,y,1))),C(U.c).slice(0,s)===(x=C(B.c)).slice(0,s))if(B.e<a&&--s,x=x.slice(s-3,s+1),x=="9999"||!P&&x=="4999"){if(!P&&(te(U,U.e+le+2,0),U.times(U).eq(M))){B=U;break}y+=4,s+=4,P=1}else{(!+x||!+x.slice(1)&&x.charAt(0)=="5")&&(te(B,B.e+le+2,1),b=!B.times(B).eq(M));break}}return te(B,B.e+le+1,N,b)},J.toExponential=function(b,x){return b!=null&&(Y(b,0,v),b++),se(this,b,x,1)},J.toFixed=function(b,x){return b!=null&&(Y(b,0,v),b=b+this.e+1),se(this,b,x)},J.toFormat=function(b,x,B){var P,U=this;if(B==null)b!=null&&x&&typeof x=="object"?(B=x,x=null):b&&typeof b=="object"?(B=b,b=x=null):B=oe;else if(typeof B!="object")throw Error(f+"Argument not an object: "+B);if(P=U.toFixed(b,x),U.c){var M,h=P.split("."),s=+B.groupSize,a=+B.secondaryGroupSize,y=B.groupSeparator||"",_=h[0],S=h[1],V=U.s<0,ne=V?_.slice(1):_,pe=ne.length;if(a&&(M=s,s=a,a=M,pe-=M),s>0&&pe>0){for(M=pe%s||s,_=ne.substr(0,M);M<pe;M+=s)_+=y+ne.substr(M,s);a>0&&(_+=y+ne.slice(M)),V&&(_="-"+_)}P=S?_+(B.decimalSeparator||"")+((a=+B.fractionGroupSize)?S.replace(new RegExp("\\d{"+a+"}\\B","g"),"$&"+(B.fractionGroupSeparator||"")):S):_}return(B.prefix||"")+P+(B.suffix||"")},J.toFraction=function(b){var x,B,P,U,M,h,s,a,y,_,S,V,ne=this,pe=ne.c;if(b!=null&&(s=new m(b),!s.isInteger()&&(s.c||s.s!==1)||s.lt(he)))throw Error(f+"Argument "+(s.isInteger()?"out of range: ":"not an integer: ")+ae(s));if(!pe)return new m(ne);for(x=new m(he),y=B=new m(he),P=a=new m(he),V=C(pe),M=x.e=V.length-ne.e-1,x.c[0]=T[(h=M%w)<0?w+h:h],b=!b||s.comparedTo(x)>0?M>0?x:y:s,h=G,G=1/0,s=new m(V),a.c[0]=0;_=K(s,x,0,1),U=B.plus(_.times(P)),U.comparedTo(b)!=1;)B=P,P=U,y=a.plus(_.times(U=y)),a=U,x=s.minus(_.times(U=x)),s=U;return U=K(b.minus(B),P,0,1),a=a.plus(U.times(y)),B=B.plus(U.times(P)),a.s=y.s=ne.s,M=M*2,S=K(y,P,M,N).minus(ne).abs().comparedTo(K(a,B,M,N).minus(ne).abs())<1?[y,P]:[a,B],G=h,S},J.toNumber=function(){return+ae(this)},J.toPrecision=function(b,x){return b!=null&&Y(b,1,v),se(this,b,x,2)},J.toString=function(b){var x,B=this,P=B.s,U=B.e;return U===null?P?(x="Infinity",P<0&&(x="-"+x)):x="NaN":(b==null?x=U<=O||U>=W?re(C(B.c),U):$(C(B.c),U,"0"):b===10&&ee?(B=te(new m(B),le+U+1,N),x=$(C(B.c),B.e,"0")):(Y(b,2,fe.length,"Base"),x=Q($(C(B.c),U,"0"),10,b,P,!0)),P<0&&B.c[0]&&(x="-"+x)),x},J.valueOf=J.toJSON=function(){return ae(this)},J._isBigNumber=!0,L!=null&&m.set(L),m}function k(L){var K=L|0;return L>0||L===K?K:K-1}function C(L){for(var K,Q,D=1,J=L.length,he=L[0]+"";D<J;){for(K=L[D++]+"",Q=w-K.length;Q--;K="0"+K);he+=K}for(J=he.length;he.charCodeAt(--J)===48;);return he.slice(0,J+1||1)}function Z(L,K){var Q,D,J=L.c,he=K.c,le=L.s,N=K.s,O=L.e,W=K.e;if(!le||!N)return null;if(Q=J&&!J[0],D=he&&!he[0],Q||D)return Q?D?0:-N:le;if(le!=N)return le;if(Q=le<0,D=O==W,!J||!he)return D?0:!J^Q?1:-1;if(!D)return O>W^Q?1:-1;for(N=(O=J.length)<(W=he.length)?O:W,le=0;le<N;le++)if(J[le]!=he[le])return J[le]>he[le]^Q?1:-1;return O==W?0:O>W^Q?1:-1}function Y(L,K,Q,D){if(L<K||L>Q||L!==o(L))throw Error(f+(D||"Argument")+(typeof L=="number"?L<K||L>Q?" out of range: ":" not an integer: ":" not a primitive number: ")+String(L))}function q(L){var K=L.c.length-1;return k(L.e/w)==K&&L.c[K]%2!=0}function re(L,K){return(L.length>1?L.charAt(0)+"."+L.slice(1):L)+(K<0?"e":"e+")+K}function $(L,K,Q){var D,J;if(K<0){for(J=Q+".";++K;J+=Q);L=J+L}else if(D=L.length,++K>D){for(J=Q,K-=D;--K;J+=Q);L+=J}else K<D&&(L=L.slice(0,K)+"."+L.slice(K));return L}r=g(),r.default=r.BigNumber=r,t.exports?t.exports=r:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=r)})(Mr)})(Oa);var wi=Oa.exports,Ku=function(e,r,n){var i=new e.Uint8Array(n),o=r.pushInt,f=r.pushInt32,u=r.pushInt32Neg,p=r.pushInt64,w=r.pushInt64Neg,E=r.pushFloat,T=r.pushFloatSingle,I=r.pushFloatDouble,v=r.pushTrue,g=r.pushFalse,k=r.pushUndefined,C=r.pushNull,Z=r.pushInfinity,Y=r.pushInfinityNeg,q=r.pushNaN,re=r.pushNaNNeg,$=r.pushArrayStart,L=r.pushArrayStartFixed,K=r.pushArrayStartFixed32,Q=r.pushArrayStartFixed64,D=r.pushObjectStart,J=r.pushObjectStartFixed,he=r.pushObjectStartFixed32,le=r.pushObjectStartFixed64,N=r.pushByteString,O=r.pushByteStringStart,W=r.pushUtf8String,H=r.pushUtf8StringStart,G=r.pushSimpleUnassigned,X=r.pushTagStart,ie=r.pushTagStart4,we=r.pushTagStart8,oe=r.pushTagUnassigned,fe=r.pushBreak,ee=e.Math.pow,m=0,se=0,ue=0;function de(R){for(R=R|0,m=0,se=R;(m|0)<(se|0)&&(ue=Kc[i[m]&255](i[m]|0)|0,!((ue|0)>0)););return ue|0}function te(R){return R=R|0,((m|0)+(R|0)|0)<(se|0)?0:1}function ae(R){return R=R|0,i[R|0]<<8|i[R+1|0]|0}function b(R){return R=R|0,i[R|0]<<24|i[R+1|0]<<16|i[R+2|0]<<8|i[R+3|0]|0}function x(R){return R=R|0,o(R|0),m=m+1|0,0}function B(R){return R=R|0,te(1)|0?1:(o(i[m+1|0]|0),m=m+2|0,0)}function P(R){return R=R|0,te(2)|0?1:(o(ae(m+1|0)|0),m=m+3|0,0)}function U(R){return R=R|0,te(4)|0?1:(f(ae(m+1|0)|0,ae(m+3|0)|0),m=m+5|0,0)}function M(R){return R=R|0,te(8)|0?1:(p(ae(m+1|0)|0,ae(m+3|0)|0,ae(m+5|0)|0,ae(m+7|0)|0),m=m+9|0,0)}function h(R){return R=R|0,o(-1-(R-32|0)|0),m=m+1|0,0}function s(R){return R=R|0,te(1)|0?1:(o(-1-(i[m+1|0]|0)|0),m=m+2|0,0)}function a(R){R=R|0;var Ne=0;return te(2)|0?1:(Ne=ae(m+1|0)|0,o(-1-(Ne|0)|0),m=m+3|0,0)}function y(R){return R=R|0,te(4)|0?1:(u(ae(m+1|0)|0,ae(m+3|0)|0),m=m+5|0,0)}function _(R){return R=R|0,te(8)|0?1:(w(ae(m+1|0)|0,ae(m+3|0)|0,ae(m+5|0)|0,ae(m+7|0)|0),m=m+9|0,0)}function S(R){R=R|0;var Ne=0,Ie=0,Te=0;return Te=R-64|0,te(Te|0)|0?1:(Ne=m+1|0,Ie=(m+1|0)+(Te|0)|0,N(Ne|0,Ie|0),m=Ie|0,0)}function V(R){R=R|0;var Ne=0,Ie=0,Te=0;return te(1)|0||(Te=i[m+1|0]|0,Ne=m+2|0,Ie=(m+2|0)+(Te|0)|0,te(Te+1|0)|0)?1:(N(Ne|0,Ie|0),m=Ie|0,0)}function ne(R){R=R|0;var Ne=0,Ie=0,Te=0;return te(2)|0||(Te=ae(m+1|0)|0,Ne=m+3|0,Ie=(m+3|0)+(Te|0)|0,te(Te+2|0)|0)?1:(N(Ne|0,Ie|0),m=Ie|0,0)}function pe(R){R=R|0;var Ne=0,Ie=0,Te=0;return te(4)|0||(Te=b(m+1|0)|0,Ne=m+5|0,Ie=(m+5|0)+(Te|0)|0,te(Te+4|0)|0)?1:(N(Ne|0,Ie|0),m=Ie|0,0)}function ye(R){return R=R|0,1}function xe(R){return R=R|0,O(),m=m+1|0,0}function d(R){R=R|0;var Ne=0,Ie=0,Te=0;return Te=R-96|0,te(Te|0)|0?1:(Ne=m+1|0,Ie=(m+1|0)+(Te|0)|0,W(Ne|0,Ie|0),m=Ie|0,0)}function c(R){R=R|0;var Ne=0,Ie=0,Te=0;return te(1)|0||(Te=i[m+1|0]|0,Ne=m+2|0,Ie=(m+2|0)+(Te|0)|0,te(Te+1|0)|0)?1:(W(Ne|0,Ie|0),m=Ie|0,0)}function l(R){R=R|0;var Ne=0,Ie=0,Te=0;return te(2)|0||(Te=ae(m+1|0)|0,Ne=m+3|0,Ie=(m+3|0)+(Te|0)|0,te(Te+2|0)|0)?1:(W(Ne|0,Ie|0),m=Ie|0,0)}function A(R){R=R|0;var Ne=0,Ie=0,Te=0;return te(4)|0||(Te=b(m+1|0)|0,Ne=m+5|0,Ie=(m+5|0)+(Te|0)|0,te(Te+4|0)|0)?1:(W(Ne|0,Ie|0),m=Ie|0,0)}function F(R){return R=R|0,1}function z(R){return R=R|0,H(),m=m+1|0,0}function j(R){return R=R|0,L(R-128|0),m=m+1|0,0}function _e(R){return R=R|0,te(1)|0?1:(L(i[m+1|0]|0),m=m+2|0,0)}function ve(R){return R=R|0,te(2)|0?1:(L(ae(m+1|0)|0),m=m+3|0,0)}function Ee(R){return R=R|0,te(4)|0?1:(K(ae(m+1|0)|0,ae(m+3|0)|0),m=m+5|0,0)}function be(R){return R=R|0,te(8)|0?1:(Q(ae(m+1|0)|0,ae(m+3|0)|0,ae(m+5|0)|0,ae(m+7|0)|0),m=m+9|0,0)}function Re(R){return R=R|0,$(),m=m+1|0,0}function Pe(R){R=R|0;var Ne=0;return Ne=R-160|0,te(Ne|0)|0?1:(J(Ne|0),m=m+1|0,0)}function vi(R){return R=R|0,te(1)|0?1:(J(i[m+1|0]|0),m=m+2|0,0)}function Bi(R){return R=R|0,te(2)|0?1:(J(ae(m+1|0)|0),m=m+3|0,0)}function Ti(R){return R=R|0,te(4)|0?1:(he(ae(m+1|0)|0,ae(m+3|0)|0),m=m+5|0,0)}function Si(R){return R=R|0,te(8)|0?1:(le(ae(m+1|0)|0,ae(m+3|0)|0,ae(m+5|0)|0,ae(m+7|0)|0),m=m+9|0,0)}function Ni(R){return R=R|0,D(),m=m+1|0,0}function Ht(R){return R=R|0,X(R-192|0|0),m=m+1|0,0}function rh(R){return R=R|0,X(R|0),m=m+1|0,0}function nh(R){return R=R|0,X(R|0),m=m+1|0,0}function ih(R){return R=R|0,X(R|0),m=m+1|0,0}function sh(R){return R=R|0,X(R|0),m=m+1|0,0}function Ze(R){return R=R|0,X(R-192|0|0),m=m+1|0,0}function oh(R){return R=R|0,X(R|0),m=m+1|0,0}function ah(R){return R=R|0,X(R|0),m=m+1|0,0}function ch(R){return R=R|0,X(R|0),m=m+1|0,0}function Pc(R){return R=R|0,te(1)|0?1:(X(i[m+1|0]|0),m=m+2|0,0)}function Mc(R){return R=R|0,te(2)|0?1:(X(ae(m+1|0)|0),m=m+3|0,0)}function kc(R){return R=R|0,te(4)|0?1:(ie(ae(m+1|0)|0,ae(m+3|0)|0),m=m+5|0,0)}function Cc(R){return R=R|0,te(8)|0?1:(we(ae(m+1|0)|0,ae(m+3|0)|0,ae(m+5|0)|0,ae(m+7|0)|0),m=m+9|0,0)}function He(R){return R=R|0,G((R|0)-224|0),m=m+1|0,0}function qc(R){return R=R|0,g(),m=m+1|0,0}function Vc(R){return R=R|0,v(),m=m+1|0,0}function Gc(R){return R=R|0,C(),m=m+1|0,0}function Hc(R){return R=R|0,k(),m=m+1|0,0}function jc(R){return R=R|0,te(1)|0?1:(G(i[m+1|0]|0),m=m+2|0,0)}function zc(R){R=R|0;var Ne=0,Ie=0,Te=1,mn=0,Hr=0,uh=0;return te(2)|0?1:(Ne=i[m+1|0]|0,Ie=i[m+2|0]|0,(Ne|0)&128&&(Te=-1),mn=+(((Ne|0)&124)>>2),Hr=+(((Ne|0)&3)<<8|Ie),+mn==0?E(+(+Te*5960464477539063e-23*+Hr)):+mn==31?+Te==1?+Hr>0?q():Z():+Hr>0?re():Y():E(+(+Te*ee(2,+(+mn-25))*+(1024+Hr))),m=m+3|0,0)}function Yc(R){return R=R|0,te(4)|0?1:(T(i[m+1|0]|0,i[m+2|0]|0,i[m+3|0]|0,i[m+4|0]|0),m=m+5|0,0)}function Wc(R){return R=R|0,te(8)|0?1:(I(i[m+1|0]|0,i[m+2|0]|0,i[m+3|0]|0,i[m+4|0]|0,i[m+5|0]|0,i[m+6|0]|0,i[m+7|0]|0,i[m+8|0]|0),m=m+9|0,0)}function Fe(R){return R=R|0,1}function Zc(R){return R=R|0,fe(),m=m+1|0,0}var Kc=[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,B,P,U,M,Fe,Fe,Fe,Fe,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,s,a,y,_,Fe,Fe,Fe,Fe,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,V,ne,pe,ye,Fe,Fe,Fe,xe,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,c,l,A,F,Fe,Fe,Fe,z,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,_e,ve,Ee,be,Fe,Fe,Fe,Re,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,vi,Bi,Ti,Si,Fe,Fe,Fe,Ni,Ht,Ht,Ht,Ht,Ht,Ht,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Pc,Mc,kc,Cc,Fe,Fe,Fe,Fe,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,He,qc,Vc,Gc,Hc,jc,zc,Yc,Wc,Fe,Fe,Fe,Zc];return{parse:de}},mi={},it={};const Es=wi.BigNumber;it.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7};it.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36};it.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31};it.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23};it.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")};it.SHIFT32=Math.pow(2,32);it.SHIFT16=Math.pow(2,16);it.MAX_SAFE_HIGH=2097151;it.NEG_ONE=new Es(-1);it.TEN=new Es(10);it.TWO=new Es(2);it.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5};(function(t){const{Buffer:e}=pn,r=wi.BigNumber,n=it,i=n.SHIFT32,o=n.SHIFT16,f=2097151;t.parseHalf=function(w){var E,T,I;return I=w[0]&128?-1:1,E=(w[0]&124)>>2,T=(w[0]&3)<<8|w[1],E?E===31?I*(T?0/0:1/0):I*Math.pow(2,E-25)*(1024+T):I*5960464477539063e-23*T};function u(p){return p<16?"0"+p.toString(16):p.toString(16)}t.arrayBufferToBignumber=function(p){const w=p.byteLength;let E="";for(let T=0;T<w;T++)E+=u(p[T]);return new r(E,16)},t.buildMap=p=>{const w=new Map,E=Object.keys(p),T=E.length;for(let I=0;I<T;I++)w.set(E[I],p[E[I]]);return w},t.buildInt32=(p,w)=>p*o+w,t.buildInt64=(p,w,E,T)=>{const I=t.buildInt32(p,w),v=t.buildInt32(E,T);return I>f?new r(I).times(i).plus(v):I*i+v},t.writeHalf=function(w,E){const T=e.allocUnsafe(4);T.writeFloatBE(E,0);const I=T.readUInt32BE(0);if(I&8191)return!1;var v=I>>16&32768;const g=I>>23&255,k=I&8388607;if(g>=113&&g<=142)v+=(g-112<<10)+(k>>13);else if(g>=103&&g<113){if(k&(1<<126-g)-1)return!1;v+=k+8388608>>126-g}else return!1;return w.writeUInt16BE(v,0),!0},t.keySorter=function(p,w){var E=p[0].byteLength,T=w[0].byteLength;return E>T?1:T>E?-1:p[0].compare(w[0])},t.isNegativeZero=p=>p===0&&1/p<0,t.nextPowerOf2=p=>{let w=0;if(p&&!(p&p-1))return p;for(;p!==0;)p>>=1,w+=1;return 1<<w}})(mi);const As=it,Lu=As.MT,_n=As.SIMPLE,Mi=As.SYMS;let Xu=class es{constructor(e){if(typeof e!="number")throw new Error("Invalid Simple type: "+typeof e);if(e<0||e>255||(e|0)!==e)throw new Error("value must be a small positive integer: "+e);this.value=e}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(e){return e._pushInt(this.value,Lu.SIMPLE_FLOAT)}static isSimple(e){return e instanceof es}static decode(e,r){switch(r==null&&(r=!0),e){case _n.FALSE:return!1;case _n.TRUE:return!0;case _n.NULL:return r?null:Mi.NULL;case _n.UNDEFINED:return r?void 0:Mi.UNDEFINED;case-1:if(!r)throw new Error("Invalid BREAK");return Mi.BREAK;default:return new es(e)}}};var Fa=Xu;let Ju=class ts{constructor(e,r,n){if(this.tag=e,this.value=r,this.err=n,typeof this.tag!="number")throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(this.tag|0)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(e){return e._pushTag(this.tag),e.pushAny(this.value)}convert(e){var r,n;if(n=e!=null?e[this.tag]:void 0,typeof n!="function"&&(n=ts["_tag"+this.tag],typeof n!="function"))return this;try{return n.call(ts,this.value)}catch(i){return r=i,this.err=r,this}}};var $a=Ju;const Pa=self.location?self.location.protocol+"//"+self.location.host:"",rs=self.URL;let Qu=class{constructor(e="",r=Pa){this.super=new rs(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set origin(e){this.super.origin=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set searchParams(e){this.super.searchParams=e}set username(e){this.super.username=e}createObjectURL(e){return this.super.createObjectURL(e)}revokeObjectURL(e){this.super.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function Du(t){if(typeof t=="string")return new rs(t).toString();if(!(t instanceof rs)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",i=t.protocol?t.protocol+"//":"",o=t.host||"",f=t.hostname||"",u=t.search||(t.query?"?"+t.query:""),p=t.hash||"",w=t.pathname||"",E=t.path||w+u;return`${i}${e||r}${o||f+n}${E}${p}`}}var Ma={URLWithLegacySupport:Qu,URLSearchParams:self.URLSearchParams,defaultBase:Pa,format:Du};const{URLWithLegacySupport:Ws,format:ef}=Ma;var tf=(t,e={},r={},n)=>{let i=e.protocol?e.protocol.replace(":",""):"http";i=(r[i]||n||i)+":";let o;try{o=new Ws(t)}catch{o={}}const f=Object.assign({},e,{protocol:i||o.protocol,host:e.host||o.host});return new Ws(t,ef(f)).toString()};const{URLWithLegacySupport:rf,format:nf,URLSearchParams:sf,defaultBase:of}=Ma,af=tf;var ka={URL:rf,URLSearchParams:sf,format:nf,relative:af,defaultBase:of};const{Buffer:Er}=pn,Zs=hn,cf=wi.BigNumber,uf=Ku,st=mi,Oe=it,ff=Fa,lf=$a,{URL:hf}=ka;let ns=class is{constructor(e){e=e||{},!e.size||e.size<65536?e.size=65536:e.size=st.nextPowerOf2(e.size),this._heap=new ArrayBuffer(e.size),this._heap8=new Uint8Array(this._heap),this._buffer=Er.from(this._heap),this._reset(),this._knownTags=Object.assign({0:r=>new Date(r),1:r=>new Date(r*1e3),2:r=>st.arrayBufferToBignumber(r),3:r=>Oe.NEG_ONE.minus(st.arrayBufferToBignumber(r)),4:r=>Oe.TEN.pow(r[0]).times(r[1]),5:r=>Oe.TWO.pow(r[0]).times(r[1]),32:r=>new hf(r),35:r=>new RegExp(r)},e.tags),this.parser=uf(Mr,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var e=this._parents.pop();if(e.length>0)throw new Error(`Missing ${e.length} elements`);switch(e.type){case Oe.PARENT.TAG:this._push(this.createTag(e.ref[0],e.ref[1]));break;case Oe.PARENT.BYTE_STRING:this._push(this.createByteString(e.ref,e.length));break;case Oe.PARENT.UTF8_STRING:this._push(this.createUtf8String(e.ref,e.length));break;case Oe.PARENT.MAP:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(e.ref,e.length));break;case Oe.PARENT.OBJECT:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(e.ref,e.length));break;case Oe.PARENT.ARRAY:this._push(this.createArray(e.ref,e.length));break}this._currentParent&&this._currentParent.type===Oe.PARENT.TAG&&this._dec()}_dec(){const e=this._currentParent;e.length<0||(e.length--,e.length===0&&this._closeParent())}_push(e,r){const n=this._currentParent;switch(n.values++,n.type){case Oe.PARENT.ARRAY:case Oe.PARENT.BYTE_STRING:case Oe.PARENT.UTF8_STRING:n.length>-1?this._ref[this._ref.length-n.length]=e:this._ref.push(e),this._dec();break;case Oe.PARENT.OBJECT:n.tmpKey!=null?(this._ref[n.tmpKey]=e,n.tmpKey=null,this._dec()):(n.tmpKey=e,typeof n.tmpKey!="string"&&(n.type=Oe.PARENT.MAP,n.ref=st.buildMap(n.ref)));break;case Oe.PARENT.MAP:n.tmpKey!=null?(this._ref.set(n.tmpKey,e),n.tmpKey=null,this._dec()):n.tmpKey=e;break;case Oe.PARENT.TAG:this._ref.push(e),r||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(e,r,n){this._parents[this._depth]={type:r,length:n,ref:e,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:Oe.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(e,r){const n=this._knownTags[e];return n?n(r):new lf(e,r)}createMap(e,r){return e}createObject(e,r){return e}createArray(e,r){return e}createByteString(e,r){return Er.concat(e)}createByteStringFromHeap(e,r){return e===r?Er.alloc(0):Er.from(this._heap.slice(e,r))}createInt(e){return e}createInt32(e,r){return st.buildInt32(e,r)}createInt64(e,r,n,i){return st.buildInt64(e,r,n,i)}createFloat(e){return e}createFloatSingle(e,r,n,i){return Zs.read([e,r,n,i],0,!1,23,4)}createFloatDouble(e,r,n,i,o,f,u,p){return Zs.read([e,r,n,i,o,f,u,p],0,!1,52,8)}createInt32Neg(e,r){return-1-st.buildInt32(e,r)}createInt64Neg(e,r,n,i){const o=st.buildInt32(e,r),f=st.buildInt32(n,i);return o>Oe.MAX_SAFE_HIGH?Oe.NEG_ONE.minus(new cf(o).times(Oe.SHIFT32).plus(f)):-1-(o*Oe.SHIFT32+f)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(e,r){return e.join("")}createUtf8StringFromHeap(e,r){return e===r?"":this._buffer.toString("utf8",e,r)}createSimpleUnassigned(e){return new ff(e)}pushInt(e){this._push(this.createInt(e))}pushInt32(e,r){this._push(this.createInt32(e,r))}pushInt64(e,r,n,i){this._push(this.createInt64(e,r,n,i))}pushFloat(e){this._push(this.createFloat(e))}pushFloatSingle(e,r,n,i){this._push(this.createFloatSingle(e,r,n,i))}pushFloatDouble(e,r,n,i,o,f,u,p){this._push(this.createFloatDouble(e,r,n,i,o,f,u,p))}pushInt32Neg(e,r){this._push(this.createInt32Neg(e,r))}pushInt64Neg(e,r,n,i){this._push(this.createInt64Neg(e,r,n,i))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],Oe.PARENT.ARRAY,-1)}pushArrayStartFixed(e){this._createArrayStartFixed(e)}pushArrayStartFixed32(e,r){const n=st.buildInt32(e,r);this._createArrayStartFixed(n)}pushArrayStartFixed64(e,r,n,i){const o=st.buildInt64(e,r,n,i);this._createArrayStartFixed(o)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(e){this._createObjectStartFixed(e)}pushObjectStartFixed32(e,r){const n=st.buildInt32(e,r);this._createObjectStartFixed(n)}pushObjectStartFixed64(e,r,n,i){const o=st.buildInt64(e,r,n,i);this._createObjectStartFixed(o)}pushByteStringStart(){this._parents[this._depth]={type:Oe.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(e,r){this._push(this.createByteStringFromHeap(e,r))}pushUtf8StringStart(){this._parents[this._depth]={type:Oe.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(e,r){this._push(this.createUtf8StringFromHeap(e,r))}pushSimpleUnassigned(e){this._push(this.createSimpleUnassigned(e))}pushTagStart(e){this._parents[this._depth]={type:Oe.PARENT.TAG,length:1,ref:[e]}}pushTagStart4(e,r){this.pushTagStart(st.buildInt32(e,r))}pushTagStart8(e,r,n,i){this.pushTagStart(st.buildInt64(e,r,n,i))}pushTagUnassigned(e){this._push(this.createTag(e))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(e){if(e===0){this._push(this.createObject({}));return}this._createParent({},Oe.PARENT.OBJECT,e)}_createArrayStartFixed(e){if(e===0){this._push(this.createArray([]));return}this._createParent(new Array(e),Oe.PARENT.ARRAY,e)}_decode(e){if(e.byteLength===0)throw new Error("Input too short");this._reset(),this._heap8.set(e);const r=this.parser.parse(e.byteLength);if(this._depth>1){for(;this._currentParent.length===0;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(r>0)throw new Error("Failed to parse");if(this._res.length===0)throw new Error("No valid result")}decodeFirst(e){return this._decode(e),this._res[0]}decodeAll(e){return this._decode(e),this._res}static decode(e,r){return typeof e=="string"&&(e=Er.from(e,r||"hex")),new is({size:e.length}).decodeFirst(e)}static decodeAll(e,r){return typeof e=="string"&&(e=Er.from(e,r||"hex")),new is({size:e.length}).decodeAll(e)}};ns.decodeFirst=ns.decode;var Ca=ns;const{Buffer:ki}=pn,df=Ca,pf=mi;class vs extends df{createTag(e,r){return`${e}(${r})`}createInt(e){return super.createInt(e).toString()}createInt32(e,r){return super.createInt32(e,r).toString()}createInt64(e,r,n,i){return super.createInt64(e,r,n,i).toString()}createInt32Neg(e,r){return super.createInt32Neg(e,r).toString()}createInt64Neg(e,r,n,i){return super.createInt64Neg(e,r,n,i).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(e){const r=super.createFloat(e);return pf.isNegativeZero(e)?"-0_1":`${r}_1`}createFloatSingle(e,r,n,i){return`${super.createFloatSingle(e,r,n,i)}_2`}createFloatDouble(e,r,n,i,o,f,u,p){return`${super.createFloatDouble(e,r,n,i,o,f,u,p)}_3`}createByteString(e,r){const n=e.join(", ");return r===-1?`(_ ${n})`:`h'${n}`}createByteStringFromHeap(e,r){return`h'${ki.from(super.createByteStringFromHeap(e,r)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(e){return`simple(${e})`}createArray(e,r){const n=super.createArray(e,r);return r===-1?`[_ ${n.join(", ")}]`:`[${n.join(", ")}]`}createMap(e,r){const n=super.createMap(e),i=Array.from(n.keys()).reduce(Ks(n),"");return r===-1?`{_ ${i}}`:`{${i}}`}createObject(e,r){const n=super.createObject(e),i=Object.keys(n).reduce(Ks(n),"");return r===-1?`{_ ${i}}`:`{${i}}`}createUtf8String(e,r){const n=e.join(", ");return r===-1?`(_ ${n})`:`"${n}"`}createUtf8StringFromHeap(e,r){return`"${ki.from(super.createUtf8StringFromHeap(e,r)).toString("utf8")}"`}static diagnose(e,r){return typeof e=="string"&&(e=ki.from(e,r||"hex")),new vs().decodeFirst(e)}}var yf=vs;function Ks(t){return(e,r)=>e?`${e}, ${r}: ${t[r]}`:`${r}: ${t[r]}`}const{Buffer:It}=pn,{URL:gf}=ka,ss=wi.BigNumber,Ci=mi,We=it,gt=We.MT,xn=We.NUMBYTES,Ls=We.SHIFT32,Xs=We.SYMS,Ar=We.TAG,wf=We.MT.SIMPLE_FLOAT<<5|We.NUMBYTES.TWO,mf=We.MT.SIMPLE_FLOAT<<5|We.NUMBYTES.FOUR,bf=We.MT.SIMPLE_FLOAT<<5|We.NUMBYTES.EIGHT,_f=We.MT.SIMPLE_FLOAT<<5|We.SIMPLE.TRUE,xf=We.MT.SIMPLE_FLOAT<<5|We.SIMPLE.FALSE,Ef=We.MT.SIMPLE_FLOAT<<5|We.SIMPLE.UNDEFINED,Js=We.MT.SIMPLE_FLOAT<<5|We.SIMPLE.NULL,Af=new ss("0x20000000000000"),vf=It.from("f97e00","hex"),Bf=It.from("f9fc00","hex"),Tf=It.from("f97c00","hex");function Sf(t){return{}.toString.call(t).slice(8,-1)}class ii{constructor(e){e=e||{},this.streaming=typeof e.stream=="function",this.onData=e.stream,this.semanticTypes=[[gf,this._pushUrl],[ss,this._pushBigNumber]];const r=e.genTypes||[],n=r.length;for(let i=0;i<n;i++)this.addSemanticType(r[i][0],r[i][1]);this._reset()}addSemanticType(e,r){const n=this.semanticTypes.length;for(let i=0;i<n;i++)if(this.semanticTypes[i][0]===e){const f=this.semanticTypes[i][1];return this.semanticTypes[i][1]=r,f}return this.semanticTypes.push([e,r]),null}push(e){return e&&(this.result[this.offset]=e,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=e.length,this.offset++,this.streaming&&this.onData(this.finalize())),!0}pushWrite(e,r,n){return this.result[this.offset]=e,this.resultMethod[this.offset]=r,this.resultLength[this.offset]=n,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(e){return this.pushWrite(e,1,1)}_pushUInt16BE(e){return this.pushWrite(e,2,2)}_pushUInt32BE(e){return this.pushWrite(e,3,4)}_pushDoubleBE(e){return this.pushWrite(e,4,8)}_pushNaN(){return this.push(vf)}_pushInfinity(e){const r=e<0?Bf:Tf;return this.push(r)}_pushFloat(e){const r=It.allocUnsafe(2);if(Ci.writeHalf(r,e)&&Ci.parseHalf(r)===e)return this._pushUInt8(wf)&&this.push(r);const n=It.allocUnsafe(4);return n.writeFloatBE(e,0),n.readFloatBE(0)===e?this._pushUInt8(mf)&&this.push(n):this._pushUInt8(bf)&&this._pushDoubleBE(e)}_pushInt(e,r,n){const i=r<<5;return e<24?this._pushUInt8(i|e):e<=255?this._pushUInt8(i|xn.ONE)&&this._pushUInt8(e):e<=65535?this._pushUInt8(i|xn.TWO)&&this._pushUInt16BE(e):e<=4294967295?this._pushUInt8(i|xn.FOUR)&&this._pushUInt32BE(e):e<=Number.MAX_SAFE_INTEGER?this._pushUInt8(i|xn.EIGHT)&&this._pushUInt32BE(Math.floor(e/Ls))&&this._pushUInt32BE(e%Ls):r===gt.NEG_INT?this._pushFloat(n):this._pushFloat(e)}_pushIntNum(e){return e<0?this._pushInt(-e-1,gt.NEG_INT,e):this._pushInt(e,gt.POS_INT)}_pushNumber(e){switch(!1){case e===e:return this._pushNaN(e);case isFinite(e):return this._pushInfinity(e);case e%1!==0:return this._pushIntNum(e);default:return this._pushFloat(e)}}_pushString(e){const r=It.byteLength(e,"utf8");return this._pushInt(r,gt.UTF8_STRING)&&this.pushWrite(e,5,r)}_pushBoolean(e){return this._pushUInt8(e?_f:xf)}_pushUndefined(e){return this._pushUInt8(Ef)}_pushArray(e,r){const n=r.length;if(!e._pushInt(n,gt.ARRAY))return!1;for(let i=0;i<n;i++)if(!e.pushAny(r[i]))return!1;return!0}_pushTag(e){return this._pushInt(e,gt.TAG)}_pushDate(e,r){return e._pushTag(Ar.DATE_EPOCH)&&e.pushAny(Math.round(r/1e3))}_pushBuffer(e,r){return e._pushInt(r.length,gt.BYTE_STRING)&&e.push(r)}_pushNoFilter(e,r){return e._pushBuffer(e,r.slice())}_pushRegexp(e,r){return e._pushTag(Ar.REGEXP)&&e.pushAny(r.source)}_pushSet(e,r){if(!e._pushInt(r.size,gt.ARRAY))return!1;for(const n of r)if(!e.pushAny(n))return!1;return!0}_pushUrl(e,r){return e._pushTag(Ar.URI)&&e.pushAny(r.format())}_pushBigint(e){let r=Ar.POS_BIGINT;e.isNegative()&&(e=e.negated().minus(1),r=Ar.NEG_BIGINT);let n=e.toString(16);n.length%2&&(n="0"+n);const i=It.from(n,"hex");return this._pushTag(r)&&this._pushBuffer(this,i)}_pushBigNumber(e,r){if(r.isNaN())return e._pushNaN();if(!r.isFinite())return e._pushInfinity(r.isNegative()?-1/0:1/0);if(r.isInteger())return e._pushBigint(r);if(!(e._pushTag(Ar.DECIMAL_FRAC)&&e._pushInt(2,gt.ARRAY)))return!1;const n=r.decimalPlaces(),i=r.multipliedBy(new ss(10).pow(n));return e._pushIntNum(-n)?i.abs().isLessThan(Af)?e._pushIntNum(i.toNumber()):e._pushBigint(i):!1}_pushMap(e,r){return e._pushInt(r.size,gt.MAP)?this._pushRawMap(r.size,Array.from(r)):!1}_pushObject(e){if(!e)return this._pushUInt8(Js);for(var r=this.semanticTypes.length,n=0;n<r;n++)if(e instanceof this.semanticTypes[n][0])return this.semanticTypes[n][1].call(e,this,e);var i=e.encodeCBOR;if(typeof i=="function")return i.call(e,this);var o=Object.keys(e),f=o.length;return this._pushInt(f,gt.MAP)?this._pushRawMap(f,o.map(u=>[u,e[u]])):!1}_pushRawMap(e,r){r=r.map(function(i){return i[0]=ii.encode(i[0]),i}).sort(Ci.keySorter);for(var n=0;n<e;n++)if(!this.push(r[n][0])||!this.pushAny(r[n][1]))return!1;return!0}write(e){return this.pushAny(e)}pushAny(e){var r=Sf(e);switch(r){case"Number":return this._pushNumber(e);case"String":return this._pushString(e);case"Boolean":return this._pushBoolean(e);case"Object":return this._pushObject(e);case"Array":return this._pushArray(this,e);case"Uint8Array":return this._pushBuffer(this,It.isBuffer(e)?e:It.from(e));case"Null":return this._pushUInt8(Js);case"Undefined":return this._pushUndefined(e);case"Map":return this._pushMap(this,e);case"Set":return this._pushSet(this,e);case"URL":return this._pushUrl(this,e);case"BigNumber":return this._pushBigNumber(this,e);case"Date":return this._pushDate(this,e);case"RegExp":return this._pushRegexp(this,e);case"Symbol":switch(e){case Xs.NULL:return this._pushObject(null);case Xs.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+e.toString())}default:throw new Error("Unknown type: "+typeof e+", "+(e?e.toString():""))}}finalize(){if(this.offset===0)return null;for(var e=this.result,r=this.resultLength,n=this.resultMethod,i=this.offset,o=0,f=0;f<i;f++)o+=r[f];var u=It.allocUnsafe(o),p=0,w=0;for(f=0;f<i;f++){switch(w=r[f],n[f]){case 0:e[f].copy(u,p);break;case 1:u.writeUInt8(e[f],p,!0);break;case 2:u.writeUInt16BE(e[f],p,!0);break;case 3:u.writeUInt32BE(e[f],p,!0);break;case 4:u.writeDoubleBE(e[f],p,!0);break;case 5:u.write(e[f],p,w,"utf8");break;default:throw new Error("unkown method")}p+=w}var E=u;return this._reset(),E}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(e){const r=new ii;if(!r.pushAny(e))throw new Error("Failed to encode input");return r.finalize()}}var Nf=ii;(function(t){t.Diagnose=yf,t.Decoder=Ca,t.Encoder=Nf,t.Simple=Fa,t.Tagged=$a,t.decodeAll=t.Decoder.decodeAll,t.decodeFirst=t.Decoder.decodeFirst,t.diagnose=t.Diagnose.diagnose,t.encode=t.Encoder.encode,t.decode=t.Decoder.decode,t.leveldb={decode:t.Decoder.decodeAll,encode:t.Encoder.encode,buffer:!0,name:"cbor"}})(Ua);const qa=uu(Ua);function Et(t){return Fn(ms.create().update(new Uint8Array(t)).digest())}function Pn(t){if(t instanceof qa.Tagged)return Pn(t.value);if(typeof t=="string")return Va(t);if(typeof t=="number")return Et(qe(t));if(t instanceof ArrayBuffer||ArrayBuffer.isView(t))return Et(t);if(Array.isArray(t)){const e=t.map(Pn);return Et(Ft(...e))}else{if(t&&typeof t=="object"&&t._isPrincipal)return Et(t.toUint8Array());if(typeof t=="object"&&t!==null&&typeof t.toHash=="function")return Pn(t.toHash());if(typeof t=="object")return si(t);if(typeof t=="bigint")return Et(qe(t))}throw Object.assign(new Error(`Attempt to hash a value of unsupported type: ${t}`),{value:t})}const Va=t=>{const e=new TextEncoder().encode(t);return Et(e)};function Qs(t){return si(t)}function si(t){const n=Object.entries(t).filter(([,f])=>f!==void 0).map(([f,u])=>{const p=Va(f),w=Pn(u);return[p,w]}).sort(([f],[u])=>zo(f,u)),i=Ft(...n.map(f=>Ft(...f)));return Et(i)}globalThis&&globalThis.__rest;new TextEncoder().encode(`
ic-request`);class Ds{getPrincipal(){return Be.anonymous()}async transformRequest(e){return Object.assign(Object.assign({},e),{body:{content:e.body}})}}var qt={},Gr={},$e={};Object.defineProperty($e,"__esModule",{value:!0});const If=9007199254740992;function Gt(t,...e){const r=new Uint8Array(t.byteLength+e.reduce((i,o)=>i+o.byteLength,0));r.set(new Uint8Array(t),0);let n=t.byteLength;for(const i of e)r.set(new Uint8Array(i),n),n+=i.byteLength;return r.buffer}function At(t,e,r){r=r.replace(/[^0-9a-fA-F]/g,"");const n=2**(e-24);r=r.slice(-n*2).padStart(n*2,"0");const i=[(t<<5)+e].concat(r.match(/../g).map(o=>parseInt(o,16)));return new Uint8Array(i).buffer}function bi(t,e){if(e<24)return new Uint8Array([(t<<5)+e]).buffer;{const r=e<=255?24:e<=65535?25:e<=4294967295?26:27;return At(t,r,e.toString(16))}}function Ga(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n<128?e.push(n):n<2048?e.push(192|n>>6,128|n&63):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|n&63):(r++,n=(n&1023)<<10|t.charCodeAt(r)&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63))}return Gt(new Uint8Array(bi(3,t.length)),new Uint8Array(e))}function Rf(t,e){if(t==14277111)return Gt(new Uint8Array([217,217,247]),e);if(t<24)return Gt(new Uint8Array([192+t]),e);{const r=t<=255?24:t<=65535?25:t<=4294967295?26:27,n=2**(r-24),i=t.toString(16).slice(-n*2).padStart(n*2,"0"),o=[192+r].concat(i.match(/../g).map(f=>parseInt(f,16)));return new Uint8Array(o).buffer}}$e.tagged=Rf;function yn(t){return new Uint8Array(t).buffer}$e.raw=yn;function Bs(t){if(isNaN(t))throw new RangeError("Invalid number.");t=Math.min(Math.max(0,t),23);const e=[0+t];return new Uint8Array(e).buffer}$e.uSmall=Bs;function Ha(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),255),t=t.toString(16),At(0,24,t)}$e.u8=Ha;function ja(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),65535),t=t.toString(16),At(0,25,t)}$e.u16=ja;function za(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),4294967295),t=t.toString(16),At(0,26,t)}$e.u32=za;function Ts(t,e){if(typeof t=="string"&&e==16){if(t.match(/[^0-9a-fA-F]/))throw new RangeError("Invalid number.");return At(0,27,t)}if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),If),t=t.toString(16),At(0,27,t)}$e.u64=Ts;function Ya(t){if(isNaN(t))throw new RangeError("Invalid number.");if(t===0)return Bs(0);t=Math.min(Math.max(0,-t),24)-1;const e=[32+t];return new Uint8Array(e).buffer}$e.iSmall=Ya;function Wa(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),255),t=t.toString(16),At(1,24,t)}$e.i8=Wa;function Za(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),65535),t=t.toString(16),At(1,25,t)}$e.i16=Za;function Ka(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),4294967295),t=t.toString(16),At(1,26,t)}$e.i32=Ka;function La(t,e){if(typeof t=="string"&&e==16){if(t.startsWith("-")?t=t.slice(1):t="0",t.match(/[^0-9a-fA-F]/)||t.length>16)throw new RangeError("Invalid number.");let r=!1,n=t.split("").reduceRight((i,o)=>{if(r)return o+i;let f=parseInt(o,16)-1;return f>=0?(r=!0,f.toString(16)+i):"f"+i},"");return r?At(1,27,n):Ts(0)}if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),9007199254740992),t=t.toString(16),At(1,27,t)}$e.i64=La;function Uf(t){return t>=0?t<24?Bs(t):t<=255?Ha(t):t<=65535?ja(t):t<=4294967295?za(t):Ts(t):t>=-24?Ya(t):t>=-255?Wa(t):t>=-65535?Za(t):t>=-4294967295?Ka(t):La(t)}$e.number=Uf;function Of(t){return Gt(bi(2,t.byteLength),t)}$e.bytes=Of;function Ff(t){return Ga(t)}$e.string=Ff;function $f(t){return Gt(bi(4,t.length),...t)}$e.array=$f;function Pf(t,e=!1){t instanceof Map||(t=new Map(Object.entries(t)));let r=Array.from(t.entries());return e&&(r=r.sort(([n],[i])=>n.localeCompare(i))),Gt(bi(5,t.size),...r.map(([n,i])=>Gt(Ga(n),i)))}$e.map=Pf;function Mf(t){const e=new Float32Array([t]);return Gt(new Uint8Array([224+26]),new Uint8Array(e.buffer))}$e.singleFloat=Mf;function kf(t){const e=new Float64Array([t]);return Gt(new Uint8Array([224+27]),new Uint8Array(e.buffer))}$e.doubleFloat=kf;function Cf(t){return t?Xa():Ja()}$e.bool=Cf;function Xa(){return yn(new Uint8Array([224+21]))}$e.true_=Xa;function Ja(){return yn(new Uint8Array([224+20]))}$e.false_=Ja;function qf(){return yn(new Uint8Array([224+22]))}$e.null_=qf;function Vf(){return yn(new Uint8Array([224+23]))}$e.undefined_=Vf;var Gf=Mr&&Mr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(Gr,"__esModule",{value:!0});const mt=Gf($e),Hf=[ArrayBuffer,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array];class Qa{constructor(e,r=!1){this._serializer=e,this._stable=r,this.name="jsonDefault",this.priority=-100}match(e){return["undefined","boolean","number","string","object"].indexOf(typeof e)!=-1}encode(e){switch(typeof e){case"undefined":return mt.undefined_();case"boolean":return mt.bool(e);case"number":return Math.floor(e)===e?mt.number(e):mt.doubleFloat(e);case"string":return mt.string(e);case"object":if(e===null)return mt.null_();if(Array.isArray(e))return mt.array(e.map(r=>this._serializer.serializeValue(r)));if(Hf.find(r=>e instanceof r))return mt.bytes(e.buffer);if(Object.getOwnPropertyNames(e).indexOf("toJSON")!==-1)return this.encode(e.toJSON());if(e instanceof Map){const r=new Map;for(const[n,i]of e.entries())r.set(n,this._serializer.serializeValue(i));return mt.map(r,this._stable)}else{const r=new Map;for(const[n,i]of Object.entries(e))r.set(n,this._serializer.serializeValue(i));return mt.map(r,this._stable)}default:throw new Error("Invalid value.")}}}Gr.JsonDefaultCborEncoder=Qa;class Da{constructor(){this.name="cborEncoder",this.priority=-90}match(e){return typeof e=="object"&&typeof e.toCBOR=="function"}encode(e){return e.toCBOR()}}Gr.ToCborEncoder=Da;class ec{constructor(){this._encoders=new Set}static withDefaultEncoders(e=!1){const r=new this;return r.addEncoder(new Qa(r,e)),r.addEncoder(new Da),r}removeEncoder(e){for(const r of this._encoders.values())r.name==e&&this._encoders.delete(r)}addEncoder(e){this._encoders.add(e)}getEncoderFor(e){let r=null;for(const n of this._encoders)(!r||n.priority>r.priority)&&n.match(e)&&(r=n);if(r===null)throw new Error("Could not find an encoder for value.");return r}serializeValue(e){return this.getEncoderFor(e).encode(e)}serialize(e){return this.serializeValue(e)}}Gr.CborSerializer=ec;class jf extends ec{serialize(e){return mt.raw(new Uint8Array([...new Uint8Array([217,217,247]),...new Uint8Array(super.serializeValue(e))]))}}Gr.SelfDescribeCborSerializer=jf;(function(t){function e(i){for(var o in i)t.hasOwnProperty(o)||(t[o]=i[o])}var r=Mr&&Mr.__importStar||function(i){if(i&&i.__esModule)return i;var o={};if(i!=null)for(var f in i)Object.hasOwnProperty.call(i,f)&&(o[f]=i[f]);return o.default=i,o};Object.defineProperty(t,"__esModule",{value:!0}),e(Gr);const n=r($e);t.value=n})(qt);class zf{get name(){return"Principal"}get priority(){return 0}match(e){return e&&e._isPrincipal===!0}encode(e){return qt.value.bytes(e.toUint8Array())}}class Yf{get name(){return"Buffer"}get priority(){return 1}match(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)}encode(e){return qt.value.bytes(new Uint8Array(e))}}class Wf{get name(){return"BigInt"}get priority(){return 1}match(e){return typeof e=="bigint"}encode(e){return e>BigInt(0)?qt.value.tagged(2,qt.value.bytes(ti(e.toString(16)))):qt.value.tagged(3,qt.value.bytes(ti((BigInt("-1")*e).toString(16))))}}const _i=qt.SelfDescribeCborSerializer.withDefaultEncoders(!0);_i.addEncoder(new zf);_i.addEncoder(new Yf);_i.addEncoder(new Wf);var os;(function(t){t[t.Uint64LittleEndian=71]="Uint64LittleEndian",t[t.Semantic=55799]="Semantic"})(os||(os={}));function qi(t){return _i.serialize(t)}function eo(t){const e=t.byteLength;let r=BigInt(0);for(let n=0;n<e;n++)r=r*BigInt(256)+BigInt(t[n]);return r}class Zf extends qa.Decoder{createByteString(e){return Ft(...e)}createByteStringFromHeap(e,r){return e===r?new ArrayBuffer(0):new Uint8Array(this._heap.slice(e,r))}}function Vt(t){const e=new Uint8Array(t),r=new Zf({size:e.byteLength,tags:{2:n=>eo(n),3:n=>-eo(n),[os.Semantic]:n=>n}});try{return r.decodeFirst(e)}catch(n){throw new Error(`Failed to decode CBOR: ${n}, input: ${Xe(e)}`)}}const En=()=>{if(typeof window<"u"&&window.crypto&&window.crypto.getRandomValues){const t=new Uint32Array(1);return window.crypto.getRandomValues(t),t[0]}if(typeof crypto<"u"&&crypto.getRandomValues){const t=new Uint32Array(1);return crypto.getRandomValues(t),t[0]}return typeof crypto<"u"&&crypto.randomInt?crypto.randomInt(0,4294967295):Math.floor(Math.random()*4294967295)};var as;(function(t){t.Call="call"})(as||(as={}));function cs(){const t=new ArrayBuffer(16),e=new DataView(t),r=En(),n=En(),i=En(),o=En();return e.setUint32(0,r),e.setUint32(4,n),e.setUint32(8,i),e.setUint32(12,o),t}const to=BigInt(1e6),Kf=60*1e3;class An{constructor(e){if(e<90*1e3){const u=BigInt(Date.now()+e)*to/BigInt(1e9);this._value=u*BigInt(1e9);return}const o=BigInt(Math.floor(Date.now()+e-Kf))*to/BigInt(1e9)/BigInt(60)*BigInt(60)*BigInt(1e9);this._value=o}toCBOR(){return qt.value.u64(this._value.toString(16),16)}toHash(){return qe(this._value)}}function ro(t=cs){return async e=>{const r=e.request.headers;e.request.headers=r,e.endpoint==="call"&&(e.body.nonce=t())}}function Yr(t){const e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}class Vi extends Ce{constructor(e,r){super(e),this.response=r,this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}}class Lf extends Ce{constructor(e,r,n,i,o,f){super(e),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=o,this.ingressExpiry=f,this.name="AgentCallError",Object.setPrototypeOf(this,new.target.prototype)}}class Xf extends Ce{constructor(e,r,n,i,o,f){super(e),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=o,this.ingressExpiry=f,this.name="AgentQueryError",Object.setPrototypeOf(this,new.target.prototype)}}class Jf extends Ce{constructor(e,r,n,i,o,f){super(e),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=o,this.ingressExpiry=f,this.name="AgentReadStateError",Object.setPrototypeOf(this,new.target.prototype)}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ss=BigInt(0),Ns=BigInt(1),Qf=BigInt(2);function xi(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function tr(t){if(!xi(t))throw new Error("Uint8Array expected")}function Xr(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Df=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function br(t){tr(t);let e="";for(let r=0;r<t.length;r++)e+=Df[t[r]];return e}function tc(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Ss:BigInt("0x"+t)}const $t={_0:48,_9:57,A:65,F:70,a:97,f:102};function no(t){if(t>=$t._0&&t<=$t._9)return t-$t._0;if(t>=$t.A&&t<=$t.F)return t-($t.A-10);if(t>=$t.a&&t<=$t.f)return t-($t.a-10)}function rc(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){const f=no(t.charCodeAt(o)),u=no(t.charCodeAt(o+1));if(f===void 0||u===void 0){const p=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+p+'" at index '+o)}n[i]=f*16+u}return n}function xt(t){return tc(br(t))}function Jr(t){return tr(t),tc(br(Uint8Array.from(t).reverse()))}function et(t,e){return rc(t.toString(16).padStart(e*2,"0"))}function oi(t,e){return et(t,e).reverse()}function ct(t,e,r){let n;if(typeof e=="string")try{n=rc(e)}catch(o){throw new Error(t+" must be hex string or Uint8Array, cause: "+o)}else if(xi(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function je(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];tr(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const o=t[n];r.set(o,i),i+=o.length}return r}function Is(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const Gi=t=>typeof t=="bigint"&&Ss<=t;function nc(t,e,r){return Gi(t)&&Gi(e)&&Gi(r)&&e<=t&&t<r}function Qt(t,e,r,n){if(!nc(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function Qr(t){let e;for(e=0;t>Ss;t>>=Ns,e+=1);return e}function e0(t,e){return t>>BigInt(e)&Ns}const Mn=t=>(Qf<<BigInt(t-1))-Ns,t0={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||xi(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function gn(t,e,r={}){const n=(i,o,f)=>{const u=t0[o];if(typeof u!="function")throw new Error("invalid validator function");const p=t[i];if(!(f&&p===void 0)&&!u(p,t))throw new Error("param "+String(i)+" is invalid. Expected "+o+", got "+p)};for(const[i,o]of Object.entries(e))n(i,o,!1);for(const[i,o]of Object.entries(r))n(i,o,!0);return t}const io=()=>{throw new Error("not implemented")};function on(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const o=t(r,...n);return e.set(r,o),o}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qe=BigInt(0),Me=BigInt(1),Dt=BigInt(2),r0=BigInt(3),us=BigInt(4),so=BigInt(5),oo=BigInt(8);function ke(t,e){const r=t%e;return r>=Qe?r:e+r}function n0(t,e,r){if(e<Qe)throw new Error("invalid exponent, negatives unsupported");if(r<=Qe)throw new Error("invalid modulus");if(r===Me)return Qe;let n=Me;for(;e>Qe;)e&Me&&(n=n*t%r),t=t*t%r,e>>=Me;return n}function Bt(t,e,r){let n=t;for(;e-- >Qe;)n*=n,n%=r;return n}function ao(t,e){if(t===Qe)throw new Error("invert: expected non-zero number");if(e<=Qe)throw new Error("invert: expected positive modulus, got "+e);let r=ke(t,e),n=e,i=Qe,o=Me;for(;r!==Qe;){const u=n/r,p=n%r,w=i-o*u;n=r,r=p,i=o,o=w}if(n!==Me)throw new Error("invert: does not exist");return ke(i,e)}function i0(t){const e=(t-Me)/Dt;let r,n,i;for(r=t-Me,n=0;r%Dt===Qe;r/=Dt,n++);for(i=Dt;i<t&&n0(i,e,t)!==t-Me;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const f=(t+Me)/us;return function(p,w){const E=p.pow(w,f);if(!p.eql(p.sqr(E),w))throw new Error("Cannot find square root");return E}}const o=(r+Me)/Dt;return function(u,p){if(u.pow(p,e)===u.neg(u.ONE))throw new Error("Cannot find square root");let w=n,E=u.pow(u.mul(u.ONE,i),r),T=u.pow(p,o),I=u.pow(p,r);for(;!u.eql(I,u.ONE);){if(u.eql(I,u.ZERO))return u.ZERO;let v=1;for(let k=u.sqr(I);v<w&&!u.eql(k,u.ONE);v++)k=u.sqr(k);const g=u.pow(E,Me<<BigInt(w-v-1));E=u.sqr(g),T=u.mul(T,g),I=u.mul(I,E),w=v}return T}}function s0(t){if(t%us===r0){const e=(t+Me)/us;return function(n,i){const o=n.pow(i,e);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(t%oo===so){const e=(t-so)/oo;return function(n,i){const o=n.mul(i,Dt),f=n.pow(o,e),u=n.mul(i,f),p=n.mul(n.mul(u,Dt),f),w=n.mul(u,n.sub(p,n.ONE));if(!n.eql(n.sqr(w),i))throw new Error("Cannot find square root");return w}}return i0(t)}const o0=(t,e)=>(ke(t,e)&Me)===Me,a0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ic(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=a0.reduce((n,i)=>(n[i]="function",n),e);return gn(t,r)}function kn(t,e,r){if(r<Qe)throw new Error("invalid exponent, negatives unsupported");if(r===Qe)return t.ONE;if(r===Me)return e;let n=t.ONE,i=e;for(;r>Qe;)r&Me&&(n=t.mul(n,i)),i=t.sqr(i),r>>=Me;return n}function Cn(t,e){const r=new Array(e.length),n=e.reduce((o,f,u)=>t.is0(f)?o:(r[u]=o,t.mul(o,f)),t.ONE),i=t.inv(n);return e.reduceRight((o,f,u)=>t.is0(f)?o:(r[u]=t.mul(o,r[u]),t.mul(o,f)),i),r}function c0(t){const e=(t-Me)/Dt;return(r,n)=>r.pow(n,e)}function sc(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function wn(t,e,r=!1,n={}){if(t<=Qe)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:o}=sc(t,e);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let f;const u=Object.freeze({ORDER:t,isLE:r,BITS:i,BYTES:o,MASK:Mn(i),ZERO:Qe,ONE:Me,create:p=>ke(p,t),isValid:p=>{if(typeof p!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof p);return Qe<=p&&p<t},is0:p=>p===Qe,isOdd:p=>(p&Me)===Me,neg:p=>ke(-p,t),eql:(p,w)=>p===w,sqr:p=>ke(p*p,t),add:(p,w)=>ke(p+w,t),sub:(p,w)=>ke(p-w,t),mul:(p,w)=>ke(p*w,t),pow:(p,w)=>kn(u,p,w),div:(p,w)=>ke(p*ao(w,t),t),sqrN:p=>p*p,addN:(p,w)=>p+w,subN:(p,w)=>p-w,mulN:(p,w)=>p*w,inv:p=>ao(p,t),sqrt:n.sqrt||(p=>(f||(f=s0(t)),f(u,p))),invertBatch:p=>Cn(u,p),cmov:(p,w,E)=>E?w:p,toBytes:p=>r?oi(p,o):et(p,o),fromBytes:p=>{if(p.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+p.length);return r?Jr(p):xt(p)}});return Object.freeze(u)}function oc(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function ac(t){const e=oc(t);return e+Math.ceil(e/2)}function u0(t,e,r=!1){const n=t.length,i=oc(e),o=ac(e);if(n<16||n<o||n>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+n);const f=r?Jr(t):xt(t),u=ke(f,e-Me)+Me;return r?oi(u,i):et(u,i)}const f0=xt;function Lt(t,e){if(an(t),an(e),t<0||t>=1<<8*e)throw new Error("invalid I2OSP input: "+t);const r=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)r[n]=t&255,t>>>=8;return new Uint8Array(r)}function l0(t,e){const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}function an(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function h0(t,e,r,n){tr(t),tr(e),an(r),e.length>255&&(e=n(je(Is("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:o}=n,f=Math.ceil(r/i);if(r>65535||f>255)throw new Error("expand_message_xmd: invalid lenInBytes");const u=je(e,Lt(e.length,1)),p=Lt(0,o),w=Lt(r,2),E=new Array(f),T=n(je(p,t,w,Lt(0,1),u));E[0]=n(je(T,Lt(1,1),u));for(let v=1;v<=f;v++){const g=[l0(T,E[v-1]),Lt(v+1,1),u];E[v]=n(je(...g))}return je(...E).slice(0,r)}function d0(t,e,r,n,i){if(tr(t),tr(e),an(r),e.length>255){const o=Math.ceil(2*n/8);e=i.create({dkLen:o}).update(Is("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(t).update(Lt(r,2)).update(e).update(Lt(e.length,1)).digest()}function co(t,e,r){gn(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:i,m:o,hash:f,expand:u,DST:p}=r;tr(t),an(e);const w=typeof p=="string"?Is(p):p,E=n.toString(2).length,T=Math.ceil((E+i)/8),I=e*o*T;let v;if(u==="xmd")v=h0(t,w,I,f);else if(u==="xof")v=d0(t,w,I,i,f);else if(u==="_internal_pass")v=t;else throw new Error('expand must be "xmd" or "xof"');const g=new Array(e);for(let k=0;k<e;k++){const C=new Array(o);for(let Z=0;Z<o;Z++){const Y=T*(Z+k*o),q=v.subarray(Y,Y+T);C[Z]=ke(f0(q),n)}g[k]=C}return g}function cc(t,e){const r=e.map(n=>Array.from(n).reverse());return(n,i)=>{const[o,f,u,p]=r.map(w=>w.reduce((E,T)=>t.add(t.mul(E,n),T)));return n=t.div(o,f),i=t.mul(i,t.div(u,p)),{x:n,y:i}}}function uo(t,e,r){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const o=co(n,2,{...r,DST:r.DST,...i}),f=t.fromAffine(e(o[0])),u=t.fromAffine(e(o[1])),p=f.add(u).clearCofactor();return p.assertValidity(),p},encodeToCurve(n,i){const o=co(n,1,{...r,DST:r.encodeDST,...i}),f=t.fromAffine(e(o[0])).clearCofactor();return f.assertValidity(),f},mapToCurve(n){if(!Array.isArray(n))throw new Error("mapToCurve: expected array of bigints");for(const o of n)if(typeof o!="bigint")throw new Error("mapToCurve: expected array of bigints");const i=t.fromAffine(e(n)).clearCofactor();return i.assertValidity(),i}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fo=BigInt(0),vn=BigInt(1);function Hi(t,e){const r=e.negate();return t?r:e}function uc(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function ji(t,e){uc(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function p0(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function y0(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const zi=new WeakMap,fc=new WeakMap;function Yi(t){return fc.get(t)||1}function lc(t,e){return{constTimeNegate:Hi,hasPrecomputes(r){return Yi(r)!==1},unsafeLadder(r,n,i=t.ZERO){let o=r;for(;n>fo;)n&vn&&(i=i.add(o)),o=o.double(),n>>=vn;return i},precomputeWindow(r,n){const{windows:i,windowSize:o}=ji(n,e),f=[];let u=r,p=u;for(let w=0;w<i;w++){p=u,f.push(p);for(let E=1;E<o;E++)p=p.add(u),f.push(p);u=p.double()}return f},wNAF(r,n,i){const{windows:o,windowSize:f}=ji(r,e);let u=t.ZERO,p=t.BASE;const w=BigInt(2**r-1),E=2**r,T=BigInt(r);for(let I=0;I<o;I++){const v=I*f;let g=Number(i&w);i>>=T,g>f&&(g-=E,i+=vn);const k=v,C=v+Math.abs(g)-1,Z=I%2!==0,Y=g<0;g===0?p=p.add(Hi(Z,n[k])):u=u.add(Hi(Y,n[C]))}return{p:u,f:p}},wNAFUnsafe(r,n,i,o=t.ZERO){const{windows:f,windowSize:u}=ji(r,e),p=BigInt(2**r-1),w=2**r,E=BigInt(r);for(let T=0;T<f;T++){const I=T*u;if(i===fo)break;let v=Number(i&p);if(i>>=E,v>u&&(v-=w,i+=vn),v===0)continue;let g=n[I+Math.abs(v)-1];v<0&&(g=g.negate()),o=o.add(g)}return o},getPrecomputes(r,n,i){let o=zi.get(n);return o||(o=this.precomputeWindow(n,r),r!==1&&zi.set(n,i(o))),o},wNAFCached(r,n,i){const o=Yi(r);return this.wNAF(o,this.getPrecomputes(o,r,i),n)},wNAFCachedUnsafe(r,n,i,o){const f=Yi(r);return f===1?this.unsafeLadder(r,n,o):this.wNAFUnsafe(f,this.getPrecomputes(f,r,i),n,o)},setWindowSize(r,n){uc(n,e),fc.set(r,n),zi.delete(r)}}}function hc(t,e,r,n){if(p0(r,t),y0(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,o=Qr(BigInt(r.length)),f=o>12?o-3:o>4?o-2:o?2:1,u=(1<<f)-1,p=new Array(u+1).fill(i),w=Math.floor((e.BITS-1)/f)*f;let E=i;for(let T=w;T>=0;T-=f){p.fill(i);for(let v=0;v<n.length;v++){const g=n[v],k=Number(g>>BigInt(T)&BigInt(u));p[k]=p[k].add(r[v])}let I=i;for(let v=p.length-1,g=i;v>0;v--)g=g.add(p[v]),I=I.add(g);if(E=E.add(I),T!==0)for(let v=0;v<f;v++)E=E.double()}return E}function dc(t){return ic(t.Fp),gn(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...sc(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function g0(t){const e=dc(t);gn(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const fr=BigInt(0),Ve=BigInt(1),Yt=BigInt(2),ai=BigInt(3),lo=BigInt(4);function ho(t){const e=g0(t),{Fp:r}=e,n=wn(e.n,e.nBitLength),i=e.toBytes||((k,C,Z)=>{const Y=C.toAffine();return je(Uint8Array.from([4]),r.toBytes(Y.x),r.toBytes(Y.y))}),o=e.fromBytes||(k=>{const C=k.subarray(1),Z=r.fromBytes(C.subarray(0,r.BYTES)),Y=r.fromBytes(C.subarray(r.BYTES,2*r.BYTES));return{x:Z,y:Y}});function f(k){const{a:C,b:Z}=e,Y=r.sqr(k),q=r.mul(Y,k);return r.add(r.add(q,r.mul(k,C)),Z)}if(!r.eql(r.sqr(e.Gy),f(e.Gx)))throw new Error("bad generator point: equation left != right");function u(k){return nc(k,Ve,e.n)}function p(k){const{allowedPrivateKeyLengths:C,nByteLength:Z,wrapPrivateKey:Y,n:q}=e;if(C&&typeof k!="bigint"){if(xi(k)&&(k=br(k)),typeof k!="string"||!C.includes(k.length))throw new Error("invalid private key");k=k.padStart(Z*2,"0")}let re;try{re=typeof k=="bigint"?k:xt(ct("private key",k,Z))}catch{throw new Error("invalid private key, expected hex or "+Z+" bytes, got "+typeof k)}return Y&&(re=ke(re,q)),Qt("private key",re,Ve,q),re}function w(k){if(!(k instanceof I))throw new Error("ProjectivePoint expected")}const E=on((k,C)=>{const{px:Z,py:Y,pz:q}=k;if(r.eql(q,r.ONE))return{x:Z,y:Y};const re=k.is0();C==null&&(C=re?r.ONE:r.inv(q));const $=r.mul(Z,C),L=r.mul(Y,C),K=r.mul(q,C);if(re)return{x:r.ZERO,y:r.ZERO};if(!r.eql(K,r.ONE))throw new Error("invZ was invalid");return{x:$,y:L}}),T=on(k=>{if(k.is0()){if(e.allowInfinityPoint&&!r.is0(k.py))return;throw new Error("bad point: ZERO")}const{x:C,y:Z}=k.toAffine();if(!r.isValid(C)||!r.isValid(Z))throw new Error("bad point: x or y not FE");const Y=r.sqr(Z),q=f(C);if(!r.eql(Y,q))throw new Error("bad point: equation left != right");if(!k.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class I{constructor(C,Z,Y){if(this.px=C,this.py=Z,this.pz=Y,C==null||!r.isValid(C))throw new Error("x required");if(Z==null||!r.isValid(Z))throw new Error("y required");if(Y==null||!r.isValid(Y))throw new Error("z required");Object.freeze(this)}static fromAffine(C){const{x:Z,y:Y}=C||{};if(!C||!r.isValid(Z)||!r.isValid(Y))throw new Error("invalid affine point");if(C instanceof I)throw new Error("projective point not allowed");const q=re=>r.eql(re,r.ZERO);return q(Z)&&q(Y)?I.ZERO:new I(Z,Y,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(C){const Z=r.invertBatch(C.map(Y=>Y.pz));return C.map((Y,q)=>Y.toAffine(Z[q])).map(I.fromAffine)}static fromHex(C){const Z=I.fromAffine(o(ct("pointHex",C)));return Z.assertValidity(),Z}static fromPrivateKey(C){return I.BASE.multiply(p(C))}static msm(C,Z){return hc(I,n,C,Z)}_setWindowSize(C){g.setWindowSize(this,C)}assertValidity(){T(this)}hasEvenY(){const{y:C}=this.toAffine();if(r.isOdd)return!r.isOdd(C);throw new Error("Field doesn't support isOdd")}equals(C){w(C);const{px:Z,py:Y,pz:q}=this,{px:re,py:$,pz:L}=C,K=r.eql(r.mul(Z,L),r.mul(re,q)),Q=r.eql(r.mul(Y,L),r.mul($,q));return K&&Q}negate(){return new I(this.px,r.neg(this.py),this.pz)}double(){const{a:C,b:Z}=e,Y=r.mul(Z,ai),{px:q,py:re,pz:$}=this;let L=r.ZERO,K=r.ZERO,Q=r.ZERO,D=r.mul(q,q),J=r.mul(re,re),he=r.mul($,$),le=r.mul(q,re);return le=r.add(le,le),Q=r.mul(q,$),Q=r.add(Q,Q),L=r.mul(C,Q),K=r.mul(Y,he),K=r.add(L,K),L=r.sub(J,K),K=r.add(J,K),K=r.mul(L,K),L=r.mul(le,L),Q=r.mul(Y,Q),he=r.mul(C,he),le=r.sub(D,he),le=r.mul(C,le),le=r.add(le,Q),Q=r.add(D,D),D=r.add(Q,D),D=r.add(D,he),D=r.mul(D,le),K=r.add(K,D),he=r.mul(re,$),he=r.add(he,he),D=r.mul(he,le),L=r.sub(L,D),Q=r.mul(he,J),Q=r.add(Q,Q),Q=r.add(Q,Q),new I(L,K,Q)}add(C){w(C);const{px:Z,py:Y,pz:q}=this,{px:re,py:$,pz:L}=C;let K=r.ZERO,Q=r.ZERO,D=r.ZERO;const J=e.a,he=r.mul(e.b,ai);let le=r.mul(Z,re),N=r.mul(Y,$),O=r.mul(q,L),W=r.add(Z,Y),H=r.add(re,$);W=r.mul(W,H),H=r.add(le,N),W=r.sub(W,H),H=r.add(Z,q);let G=r.add(re,L);return H=r.mul(H,G),G=r.add(le,O),H=r.sub(H,G),G=r.add(Y,q),K=r.add($,L),G=r.mul(G,K),K=r.add(N,O),G=r.sub(G,K),D=r.mul(J,H),K=r.mul(he,O),D=r.add(K,D),K=r.sub(N,D),D=r.add(N,D),Q=r.mul(K,D),N=r.add(le,le),N=r.add(N,le),O=r.mul(J,O),H=r.mul(he,H),N=r.add(N,O),O=r.sub(le,O),O=r.mul(J,O),H=r.add(H,O),le=r.mul(N,H),Q=r.add(Q,le),le=r.mul(G,H),K=r.mul(W,K),K=r.sub(K,le),le=r.mul(W,N),D=r.mul(G,D),D=r.add(D,le),new I(K,Q,D)}subtract(C){return this.add(C.negate())}is0(){return this.equals(I.ZERO)}wNAF(C){return g.wNAFCached(this,C,I.normalizeZ)}multiplyUnsafe(C){const{endo:Z,n:Y}=e;Qt("scalar",C,fr,Y);const q=I.ZERO;if(C===fr)return q;if(this.is0()||C===Ve)return this;if(!Z||g.hasPrecomputes(this))return g.wNAFCachedUnsafe(this,C,I.normalizeZ);let{k1neg:re,k1:$,k2neg:L,k2:K}=Z.splitScalar(C),Q=q,D=q,J=this;for(;$>fr||K>fr;)$&Ve&&(Q=Q.add(J)),K&Ve&&(D=D.add(J)),J=J.double(),$>>=Ve,K>>=Ve;return re&&(Q=Q.negate()),L&&(D=D.negate()),D=new I(r.mul(D.px,Z.beta),D.py,D.pz),Q.add(D)}multiply(C){const{endo:Z,n:Y}=e;Qt("scalar",C,Ve,Y);let q,re;if(Z){const{k1neg:$,k1:L,k2neg:K,k2:Q}=Z.splitScalar(C);let{p:D,f:J}=this.wNAF(L),{p:he,f:le}=this.wNAF(Q);D=g.constTimeNegate($,D),he=g.constTimeNegate(K,he),he=new I(r.mul(he.px,Z.beta),he.py,he.pz),q=D.add(he),re=J.add(le)}else{const{p:$,f:L}=this.wNAF(C);q=$,re=L}return I.normalizeZ([q,re])[0]}multiplyAndAddUnsafe(C,Z,Y){const q=I.BASE,re=(L,K)=>K===fr||K===Ve||!L.equals(q)?L.multiplyUnsafe(K):L.multiply(K),$=re(this,Z).add(re(C,Y));return $.is0()?void 0:$}toAffine(C){return E(this,C)}isTorsionFree(){const{h:C,isTorsionFree:Z}=e;if(C===Ve)return!0;if(Z)return Z(I,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:C,clearCofactor:Z}=e;return C===Ve?this:Z?Z(I,this):this.multiplyUnsafe(e.h)}toRawBytes(C=!0){return Xr("isCompressed",C),this.assertValidity(),i(I,this,C)}toHex(C=!0){return Xr("isCompressed",C),br(this.toRawBytes(C))}}I.BASE=new I(e.Gx,e.Gy,r.ONE),I.ZERO=new I(r.ZERO,r.ONE,r.ZERO);const v=e.nBitLength,g=lc(I,e.endo?Math.ceil(v/2):v);return{CURVE:e,ProjectivePoint:I,normPrivateKeyToScalar:p,weierstrassEquation:f,isWithinCurveOrder:u}}function w0(t,e){const r=t.ORDER;let n=fr;for(let g=r-Ve;g%Yt===fr;g/=Yt)n+=Ve;const i=n,o=Yt<<i-Ve-Ve,f=o*Yt,u=(r-Ve)/f,p=(u-Ve)/Yt,w=f-Ve,E=o,T=t.pow(e,u),I=t.pow(e,(u+Ve)/Yt);let v=(g,k)=>{let C=T,Z=t.pow(k,w),Y=t.sqr(Z);Y=t.mul(Y,k);let q=t.mul(g,Y);q=t.pow(q,p),q=t.mul(q,Z),Z=t.mul(q,k),Y=t.mul(q,g);let re=t.mul(Y,Z);q=t.pow(re,E);let $=t.eql(q,t.ONE);Z=t.mul(Y,I),q=t.mul(re,C),Y=t.cmov(Z,Y,$),re=t.cmov(q,re,$);for(let L=i;L>Ve;L--){let K=L-Yt;K=Yt<<K-Ve;let Q=t.pow(re,K);const D=t.eql(Q,t.ONE);Z=t.mul(Y,C),C=t.mul(C,C),Q=t.mul(re,C),Y=t.cmov(Z,Y,D),re=t.cmov(Q,re,D)}return{isValid:$,value:Y}};if(t.ORDER%lo===ai){const g=(t.ORDER-ai)/lo,k=t.sqrt(t.neg(e));v=(C,Z)=>{let Y=t.sqr(Z);const q=t.mul(C,Z);Y=t.mul(Y,q);let re=t.pow(Y,g);re=t.mul(re,q);const $=t.mul(re,k),L=t.mul(t.sqr(re),Z),K=t.eql(L,C);let Q=t.cmov($,re,K);return{isValid:K,value:Q}}}return v}function pc(t,e){if(ic(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=w0(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,o,f,u,p,w,E,T;i=t.sqr(n),i=t.mul(i,e.Z),o=t.sqr(i),o=t.add(o,i),f=t.add(o,t.ONE),f=t.mul(f,e.B),u=t.cmov(e.Z,t.neg(o),!t.eql(o,t.ZERO)),u=t.mul(u,e.A),o=t.sqr(f),w=t.sqr(u),p=t.mul(w,e.A),o=t.add(o,p),o=t.mul(o,f),w=t.mul(w,u),p=t.mul(w,e.B),o=t.add(o,p),E=t.mul(i,f);const{isValid:I,value:v}=r(o,w);T=t.mul(i,n),T=t.mul(T,v),E=t.cmov(E,f,I),T=t.cmov(T,v,I);const g=t.isOdd(n)===t.isOdd(T);return T=t.cmov(t.neg(T),T,g),E=t.div(E,u),{x:E,y:T}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const m0=BigInt(0),Bn=BigInt(1),po=BigInt(2),Ir=BigInt(3);function b0(t){const e=[];for(;t>Bn;t>>=Bn)(t&Bn)===m0?e.unshift(0):(t&Ir)===Ir?(e.unshift(-1),t+=Bn):e.unshift(1);return e}function _0(t){const{Fp:e,Fr:r,Fp2:n,Fp6:i,Fp12:o}=t.fields,f=t.params.xNegative,u=t.params.twistType,p=ho({n:r.ORDER,...t.G1}),w=Object.assign(p,uo(p.ProjectivePoint,t.G1.mapToCurve,{...t.htfDefaults,...t.G1.htfDefaults})),E=ho({n:r.ORDER,...t.G2}),T=Object.assign(E,uo(E.ProjectivePoint,t.G2.mapToCurve,{...t.htfDefaults,...t.G2.htfDefaults}));let I;if(u==="multiplicative")I=(ee,m,se,ue,de,te)=>o.mul014(ue,ee,n.mul(m,de),n.mul(se,te));else if(u==="divisive")I=(ee,m,se,ue,de,te)=>o.mul034(ue,n.mul(se,te),n.mul(m,de),ee);else throw new Error("bls: unknown twist type");const v=n.div(n.ONE,n.mul(n.ONE,po));function g(ee,m,se,ue){const de=n.sqr(se),te=n.sqr(ue),ae=n.mulByB(n.mul(te,Ir)),b=n.mul(ae,Ir),x=n.sub(n.sub(n.sqr(n.add(se,ue)),te),de),B=n.sub(ae,de),P=n.mul(n.sqr(m),Ir),U=n.neg(x);return ee.push([B,P,U]),m=n.mul(n.mul(n.mul(n.sub(de,b),m),se),v),se=n.sub(n.sqr(n.mul(n.add(de,b),v)),n.mul(n.sqr(ae),Ir)),ue=n.mul(de,x),{Rx:m,Ry:se,Rz:ue}}function k(ee,m,se,ue,de,te){const ae=n.sub(se,n.mul(te,ue)),b=n.sub(m,n.mul(de,ue)),x=n.sub(n.mul(ae,de),n.mul(b,te)),B=n.neg(ae),P=b;ee.push([x,B,P]);const U=n.sqr(b),M=n.mul(U,b),h=n.mul(U,m),s=n.add(n.sub(M,n.mul(h,po)),n.mul(n.sqr(ae),ue));return m=n.mul(b,s),se=n.sub(n.mul(n.sub(h,s),ae),n.mul(M,se)),ue=n.mul(ue,M),{Rx:m,Ry:se,Rz:ue}}const C=b0(t.params.ateLoopSize),Z=on(ee=>{const m=ee,{x:se,y:ue}=m.toAffine(),de=se,te=ue,ae=n.neg(ue);let b=de,x=te,B=n.ONE;const P=[];for(const U of C){const M=[];({Rx:b,Ry:x,Rz:B}=g(M,b,x,B)),U&&({Rx:b,Ry:x,Rz:B}=k(M,b,x,B,de,U===-1?ae:te)),P.push(M)}if(t.postPrecompute){const U=P[P.length-1];t.postPrecompute(b,x,B,de,te,k.bind(null,U))}return P});function Y(ee,m=!1){let se=o.ONE;if(ee.length){const ue=ee[0][0].length;for(let de=0;de<ue;de++){se=o.sqr(se);for(const[te,ae,b]of ee)for(const[x,B,P]of te[de])se=I(x,B,P,se,ae,b)}}return f&&(se=o.conjugate(se)),m?o.finalExponentiate(se):se}function q(ee,m=!0){const se=[];w.ProjectivePoint.normalizeZ(ee.map(({g1:ue})=>ue)),T.ProjectivePoint.normalizeZ(ee.map(({g2:ue})=>ue));for(const{g1:ue,g2:de}of ee){if(ue.equals(w.ProjectivePoint.ZERO)||de.equals(T.ProjectivePoint.ZERO))throw new Error("pairing is not available for ZERO point");ue.assertValidity(),de.assertValidity();const te=ue.toAffine();se.push([Z(de),te.x,te.y])}return Y(se,m)}function re(ee,m,se=!0){return q([{g1:ee,g2:m}],se)}const $={randomPrivateKey:()=>{const ee=ac(r.ORDER);return u0(t.randomBytes(ee),r.ORDER)},calcPairingPrecomputes:Z},{ShortSignature:L}=t.G1,{Signature:K}=t.G2;function Q(ee){return ee instanceof w.ProjectivePoint?ee:w.ProjectivePoint.fromHex(ee)}function D(ee,m){return ee instanceof w.ProjectivePoint?ee:w.hashToCurve(ct("point",ee),m)}function J(ee){return ee instanceof T.ProjectivePoint?ee:K.fromHex(ee)}function he(ee,m){return ee instanceof T.ProjectivePoint?ee:T.hashToCurve(ct("point",ee),m)}function le(ee){return w.ProjectivePoint.fromPrivateKey(ee).toRawBytes(!0)}function N(ee){return T.ProjectivePoint.fromPrivateKey(ee).toRawBytes(!0)}function O(ee,m,se){const ue=he(ee,se);ue.assertValidity();const de=ue.multiply(w.normPrivateKeyToScalar(m));return ee instanceof T.ProjectivePoint?de:K.toRawBytes(de)}function W(ee,m,se){const ue=D(ee,se);ue.assertValidity();const de=ue.multiply(w.normPrivateKeyToScalar(m));return ee instanceof w.ProjectivePoint?de:L.toRawBytes(de)}function H(ee,m,se,ue){const de=Q(se),te=he(m,ue),ae=w.ProjectivePoint.BASE,b=J(ee),x=q([{g1:de.negate(),g2:te},{g1:ae,g2:b}]);return o.eql(x,o.ONE)}function G(ee,m,se,ue){const de=J(se),te=D(m,ue),ae=T.ProjectivePoint.BASE,b=Q(ee),x=q([{g1:te,g2:de},{g1:b,g2:ae.negate()}]);return o.eql(x,o.ONE)}function X(ee){if(!Array.isArray(ee)||ee.length===0)throw new Error("expected non-empty array")}function ie(ee){X(ee);const se=ee.map(Q).reduce((ue,de)=>ue.add(de),w.ProjectivePoint.ZERO);return ee[0]instanceof w.ProjectivePoint?(se.assertValidity(),se):se.toRawBytes(!0)}function we(ee){X(ee);const se=ee.map(J).reduce((ue,de)=>ue.add(de),T.ProjectivePoint.ZERO);return ee[0]instanceof T.ProjectivePoint?(se.assertValidity(),se):K.toRawBytes(se)}function oe(ee){X(ee);const se=ee.map(Q).reduce((ue,de)=>ue.add(de),w.ProjectivePoint.ZERO);return ee[0]instanceof w.ProjectivePoint?(se.assertValidity(),se):L.toRawBytes(se)}function fe(ee,m,se,ue){if(X(m),se.length!==m.length)throw new Error("amount of public keys and messages should be equal");const de=J(ee),te=m.map(B=>he(B,ue)),ae=se.map(Q),b=new Map;for(let B=0;B<ae.length;B++){const P=ae[B],U=te[B];let M=b.get(U);M===void 0&&(M=[],b.set(U,M)),M.push(P)}const x=[];try{for(const[B,P]of b){const U=P.reduce((M,h)=>M.add(h));x.push({g1:U,g2:B})}return x.push({g1:w.ProjectivePoint.BASE.negate(),g2:de}),o.eql(q(x),o.ONE)}catch{return!1}}return w.ProjectivePoint.BASE._setWindowSize(4),{getPublicKey:le,getPublicKeyForShortSignatures:N,sign:O,signShortSignature:W,verify:H,verifyBatch:fe,verifyShortSignature:G,aggregatePublicKeys:ie,aggregateSignatures:we,aggregateShortSignatures:oe,millerLoopBatch:Y,pairing:re,pairingBatch:q,G1:w,G2:T,Signature:K,ShortSignature:L,fields:{Fr:r,Fp:e,Fp2:n,Fp6:i,Fp12:o},params:{ateLoopSize:t.params.ateLoopSize,r:t.params.r,G1b:t.G1.b,G2b:t.G2.b},utils:$}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const x0=BigInt(0),Rr=BigInt(1),kt=BigInt(2),yo=BigInt(3);function Wi(t,e,r,n,i=1,o){const f=BigInt(o===void 0?n:o),u=r**BigInt(n),p=[];for(let w=0;w<i;w++){const E=BigInt(w+1),T=[];for(let I=0,v=Rr;I<n;I++){const g=(E*v-E)/f%u;T.push(t.pow(e,g)),v*=r}p.push(T)}return p}function E0(t,e,r){const n=e.pow(r,(t.ORDER-Rr)/yo),i=e.pow(r,(t.ORDER-Rr)/kt);function o(I,v){const g=e.mul(e.frobeniusMap(I,1),n),k=e.mul(e.frobeniusMap(v,1),i);return[g,k]}const f=e.pow(r,(t.ORDER**kt-Rr)/yo),u=e.pow(r,(t.ORDER**kt-Rr)/kt);if(!e.eql(u,e.neg(e.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function p(I,v){return[e.mul(I,f),e.neg(v)]}const w=I=>(v,g)=>{const k=g.toAffine(),C=I(k.x,k.y);return v.fromAffine({x:C[0],y:C[1]})},E=w(o),T=w(p);return{psi:o,psi2:p,G2psi:E,G2psi2:T,PSI_X:n,PSI_Y:i,PSI2_X:f,PSI2_Y:u}}function A0(t){const{ORDER:e}=t,r=wn(e),n=r.create(t.NONRESIDUE||BigInt(-1)),i=c0(e),o=r.div(r.ONE,kt),f=Wi(r,n,r.ORDER,2)[0],u=({c0:N,c1:O},{c0:W,c1:H})=>({c0:r.add(N,W),c1:r.add(O,H)}),p=({c0:N,c1:O},{c0:W,c1:H})=>({c0:r.sub(N,W),c1:r.sub(O,H)}),w=({c0:N,c1:O},W)=>{if(typeof W=="bigint")return{c0:r.mul(N,W),c1:r.mul(O,W)};const{c0:H,c1:G}=W;let X=r.mul(N,H),ie=r.mul(O,G);const we=r.sub(X,ie),oe=r.sub(r.mul(r.add(N,O),r.add(H,G)),r.add(X,ie));return{c0:we,c1:oe}},E=({c0:N,c1:O})=>{const W=r.add(N,O),H=r.sub(N,O),G=r.add(N,N);return{c0:r.mul(W,H),c1:r.mul(G,O)}},T=N=>{if(N.length!==2)throw new Error("invalid tuple");const O=N.map(W=>r.create(W));return{c0:O[0],c1:O[1]}},I=e*e,v=T(t.FP2_NONRESIDUE),g={ORDER:I,isLE:r.isLE,NONRESIDUE:v,BITS:Qr(I),BYTES:Math.ceil(Qr(I)/8),MASK:Mn(Qr(I)),ZERO:{c0:r.ZERO,c1:r.ZERO},ONE:{c0:r.ONE,c1:r.ZERO},create:N=>N,isValid:({c0:N,c1:O})=>typeof N=="bigint"&&typeof O=="bigint",is0:({c0:N,c1:O})=>r.is0(N)&&r.is0(O),eql:({c0:N,c1:O},{c0:W,c1:H})=>r.eql(N,W)&&r.eql(O,H),neg:({c0:N,c1:O})=>({c0:r.neg(N),c1:r.neg(O)}),pow:(N,O)=>kn(g,N,O),invertBatch:N=>Cn(g,N),add:u,sub:p,mul:w,sqr:E,addN:u,subN:p,mulN:w,sqrN:E,div:(N,O)=>g.mul(N,typeof O=="bigint"?r.inv(r.create(O)):g.inv(O)),inv:({c0:N,c1:O})=>{const W=r.inv(r.create(N*N+O*O));return{c0:r.mul(W,r.create(N)),c1:r.mul(W,r.create(-O))}},sqrt:N=>{if(t.Fp2sqrt)return t.Fp2sqrt(N);const{c0:O,c1:W}=N;if(r.is0(W))return r.eql(i(r,O),r.ONE)?g.create({c0:r.sqrt(O),c1:r.ZERO}):g.create({c0:r.ZERO,c1:r.sqrt(r.div(O,n))});const H=r.sqrt(r.sub(r.sqr(O),r.mul(r.sqr(W),n)));let G=r.mul(r.add(H,O),o);const X=i(r,G);!r.is0(X)&&!r.eql(X,r.ONE)&&(G=r.sub(G,H));const ie=r.sqrt(G),we=g.create({c0:ie,c1:r.div(r.mul(W,o),ie)});if(!g.eql(g.sqr(we),N))throw new Error("Cannot find square root");const oe=we,fe=g.neg(oe),{re:ee,im:m}=g.reim(oe),{re:se,im:ue}=g.reim(fe);return m>ue||m===ue&&ee>se?oe:fe},isOdd:N=>{const{re:O,im:W}=g.reim(N),H=O%kt,G=O===x0,X=W%kt;return BigInt(H||G&&X)==Rr},fromBytes(N){if(N.length!==g.BYTES)throw new Error("fromBytes invalid length="+N.length);return{c0:r.fromBytes(N.subarray(0,r.BYTES)),c1:r.fromBytes(N.subarray(r.BYTES))}},toBytes:({c0:N,c1:O})=>je(r.toBytes(N),r.toBytes(O)),cmov:({c0:N,c1:O},{c0:W,c1:H},G)=>({c0:r.cmov(N,W,G),c1:r.cmov(O,H,G)}),reim:({c0:N,c1:O})=>({re:N,im:O}),mulByNonresidue:({c0:N,c1:O})=>g.mul({c0:N,c1:O},v),mulByB:t.Fp2mulByB,fromBigTuple:T,frobeniusMap:({c0:N,c1:O},W)=>({c0:N,c1:r.mul(O,f[W%2])})},k=({c0:N,c1:O,c2:W},{c0:H,c1:G,c2:X})=>({c0:g.add(N,H),c1:g.add(O,G),c2:g.add(W,X)}),C=({c0:N,c1:O,c2:W},{c0:H,c1:G,c2:X})=>({c0:g.sub(N,H),c1:g.sub(O,G),c2:g.sub(W,X)}),Z=({c0:N,c1:O,c2:W},H)=>{if(typeof H=="bigint")return{c0:g.mul(N,H),c1:g.mul(O,H),c2:g.mul(W,H)};const{c0:G,c1:X,c2:ie}=H,we=g.mul(N,G),oe=g.mul(O,X),fe=g.mul(W,ie);return{c0:g.add(we,g.mulByNonresidue(g.sub(g.mul(g.add(O,W),g.add(X,ie)),g.add(oe,fe)))),c1:g.add(g.sub(g.mul(g.add(N,O),g.add(G,X)),g.add(we,oe)),g.mulByNonresidue(fe)),c2:g.sub(g.add(oe,g.mul(g.add(N,W),g.add(G,ie))),g.add(we,fe))}},Y=({c0:N,c1:O,c2:W})=>{let H=g.sqr(N),G=g.mul(g.mul(N,O),kt),X=g.mul(g.mul(O,W),kt),ie=g.sqr(W);return{c0:g.add(g.mulByNonresidue(X),H),c1:g.add(g.mulByNonresidue(ie),G),c2:g.sub(g.sub(g.add(g.add(G,g.sqr(g.add(g.sub(N,O),W))),X),H),ie)}},[q,re]=Wi(g,v,r.ORDER,6,2,3),$={ORDER:g.ORDER,isLE:g.isLE,BITS:3*g.BITS,BYTES:3*g.BYTES,MASK:Mn(3*g.BITS),ZERO:{c0:g.ZERO,c1:g.ZERO,c2:g.ZERO},ONE:{c0:g.ONE,c1:g.ZERO,c2:g.ZERO},create:N=>N,isValid:({c0:N,c1:O,c2:W})=>g.isValid(N)&&g.isValid(O)&&g.isValid(W),is0:({c0:N,c1:O,c2:W})=>g.is0(N)&&g.is0(O)&&g.is0(W),neg:({c0:N,c1:O,c2:W})=>({c0:g.neg(N),c1:g.neg(O),c2:g.neg(W)}),eql:({c0:N,c1:O,c2:W},{c0:H,c1:G,c2:X})=>g.eql(N,H)&&g.eql(O,G)&&g.eql(W,X),sqrt:io,div:(N,O)=>$.mul(N,typeof O=="bigint"?r.inv(r.create(O)):$.inv(O)),pow:(N,O)=>kn($,N,O),invertBatch:N=>Cn($,N),add:k,sub:C,mul:Z,sqr:Y,addN:k,subN:C,mulN:Z,sqrN:Y,inv:({c0:N,c1:O,c2:W})=>{let H=g.sub(g.sqr(N),g.mulByNonresidue(g.mul(W,O))),G=g.sub(g.mulByNonresidue(g.sqr(W)),g.mul(N,O)),X=g.sub(g.sqr(O),g.mul(N,W)),ie=g.inv(g.add(g.mulByNonresidue(g.add(g.mul(W,G),g.mul(O,X))),g.mul(N,H)));return{c0:g.mul(ie,H),c1:g.mul(ie,G),c2:g.mul(ie,X)}},fromBytes:N=>{if(N.length!==$.BYTES)throw new Error("fromBytes invalid length="+N.length);return{c0:g.fromBytes(N.subarray(0,g.BYTES)),c1:g.fromBytes(N.subarray(g.BYTES,2*g.BYTES)),c2:g.fromBytes(N.subarray(2*g.BYTES))}},toBytes:({c0:N,c1:O,c2:W})=>je(g.toBytes(N),g.toBytes(O),g.toBytes(W)),cmov:({c0:N,c1:O,c2:W},{c0:H,c1:G,c2:X},ie)=>({c0:g.cmov(N,H,ie),c1:g.cmov(O,G,ie),c2:g.cmov(W,X,ie)}),fromBigSix:N=>{if(!Array.isArray(N)||N.length!==6)throw new Error("invalid Fp6 usage");return{c0:g.fromBigTuple(N.slice(0,2)),c1:g.fromBigTuple(N.slice(2,4)),c2:g.fromBigTuple(N.slice(4,6))}},frobeniusMap:({c0:N,c1:O,c2:W},H)=>({c0:g.frobeniusMap(N,H),c1:g.mul(g.frobeniusMap(O,H),q[H%6]),c2:g.mul(g.frobeniusMap(W,H),re[H%6])}),mulByFp2:({c0:N,c1:O,c2:W},H)=>({c0:g.mul(N,H),c1:g.mul(O,H),c2:g.mul(W,H)}),mulByNonresidue:({c0:N,c1:O,c2:W})=>({c0:g.mulByNonresidue(W),c1:N,c2:O}),mul1:({c0:N,c1:O,c2:W},H)=>({c0:g.mulByNonresidue(g.mul(W,H)),c1:g.mul(N,H),c2:g.mul(O,H)}),mul01({c0:N,c1:O,c2:W},H,G){let X=g.mul(N,H),ie=g.mul(O,G);return{c0:g.add(g.mulByNonresidue(g.sub(g.mul(g.add(O,W),G),ie)),X),c1:g.sub(g.sub(g.mul(g.add(H,G),g.add(N,O)),X),ie),c2:g.add(g.sub(g.mul(g.add(N,W),H),X),ie)}}},L=Wi(g,v,r.ORDER,12,1,6)[0],K=({c0:N,c1:O},{c0:W,c1:H})=>({c0:$.add(N,W),c1:$.add(O,H)}),Q=({c0:N,c1:O},{c0:W,c1:H})=>({c0:$.sub(N,W),c1:$.sub(O,H)}),D=({c0:N,c1:O},W)=>{if(typeof W=="bigint")return{c0:$.mul(N,W),c1:$.mul(O,W)};let{c0:H,c1:G}=W,X=$.mul(N,H),ie=$.mul(O,G);return{c0:$.add(X,$.mulByNonresidue(ie)),c1:$.sub($.mul($.add(N,O),$.add(H,G)),$.add(X,ie))}},J=({c0:N,c1:O})=>{let W=$.mul(N,O);return{c0:$.sub($.sub($.mul($.add($.mulByNonresidue(O),N),$.add(N,O)),W),$.mulByNonresidue(W)),c1:$.add(W,W)}};function he(N,O){const W=g.sqr(N),H=g.sqr(O);return{first:g.add(g.mulByNonresidue(H),W),second:g.sub(g.sub(g.sqr(g.add(N,O)),W),H)}}const le={ORDER:g.ORDER,isLE:$.isLE,BITS:2*g.BITS,BYTES:2*g.BYTES,MASK:Mn(2*g.BITS),ZERO:{c0:$.ZERO,c1:$.ZERO},ONE:{c0:$.ONE,c1:$.ZERO},create:N=>N,isValid:({c0:N,c1:O})=>$.isValid(N)&&$.isValid(O),is0:({c0:N,c1:O})=>$.is0(N)&&$.is0(O),neg:({c0:N,c1:O})=>({c0:$.neg(N),c1:$.neg(O)}),eql:({c0:N,c1:O},{c0:W,c1:H})=>$.eql(N,W)&&$.eql(O,H),sqrt:io,inv:({c0:N,c1:O})=>{let W=$.inv($.sub($.sqr(N),$.mulByNonresidue($.sqr(O))));return{c0:$.mul(N,W),c1:$.neg($.mul(O,W))}},div:(N,O)=>le.mul(N,typeof O=="bigint"?r.inv(r.create(O)):le.inv(O)),pow:(N,O)=>kn(le,N,O),invertBatch:N=>Cn(le,N),add:K,sub:Q,mul:D,sqr:J,addN:K,subN:Q,mulN:D,sqrN:J,fromBytes:N=>{if(N.length!==le.BYTES)throw new Error("fromBytes invalid length="+N.length);return{c0:$.fromBytes(N.subarray(0,$.BYTES)),c1:$.fromBytes(N.subarray($.BYTES))}},toBytes:({c0:N,c1:O})=>je($.toBytes(N),$.toBytes(O)),cmov:({c0:N,c1:O},{c0:W,c1:H},G)=>({c0:$.cmov(N,W,G),c1:$.cmov(O,H,G)}),fromBigTwelve:N=>({c0:$.fromBigSix(N.slice(0,6)),c1:$.fromBigSix(N.slice(6,12))}),frobeniusMap(N,O){const{c0:W,c1:H,c2:G}=$.frobeniusMap(N.c1,O),X=L[O%12];return{c0:$.frobeniusMap(N.c0,O),c1:$.create({c0:g.mul(W,X),c1:g.mul(H,X),c2:g.mul(G,X)})}},mulByFp2:({c0:N,c1:O},W)=>({c0:$.mulByFp2(N,W),c1:$.mulByFp2(O,W)}),conjugate:({c0:N,c1:O})=>({c0:N,c1:$.neg(O)}),mul014:({c0:N,c1:O},W,H,G)=>{let X=$.mul01(N,W,H),ie=$.mul1(O,G);return{c0:$.add($.mulByNonresidue(ie),X),c1:$.sub($.sub($.mul01($.add(O,N),W,g.add(H,G)),X),ie)}},mul034:({c0:N,c1:O},W,H,G)=>{const X=$.create({c0:g.mul(N.c0,W),c1:g.mul(N.c1,W),c2:g.mul(N.c2,W)}),ie=$.mul01(O,H,G),we=$.mul01($.add(N,O),g.add(W,H),G);return{c0:$.add($.mulByNonresidue(ie),X),c1:$.sub(we,$.add(X,ie))}},_cyclotomicSquare:t.Fp12cyclotomicSquare,_cyclotomicExp:t.Fp12cyclotomicExp,finalExponentiate:t.Fp12finalExponentiate};return{Fp:r,Fp2:g,Fp6:$,Fp4Square:he,Fp12:le}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const at=BigInt(0),ci=BigInt(1),Le=BigInt(2),Tn=BigInt(3),Dr=BigInt(4),Xt=BigInt("0xd201000000010000"),v0=Qr(Xt),{Fp:ge,Fp2:me,Fp6:fs,Fp4Square:Zi,Fp12:Se}=A0({ORDER:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),FP2_NONRESIDUE:[ci,ci],Fp2mulByB:({c0:t,c1:e})=>{const r=ge.mul(t,Dr),n=ge.mul(e,Dr);return{c0:ge.sub(r,n),c1:ge.add(r,n)}},Fp12cyclotomicSquare:({c0:t,c1:e})=>{const{c0:r,c1:n,c2:i}=t,{c0:o,c1:f,c2:u}=e,{first:p,second:w}=Zi(r,f),{first:E,second:T}=Zi(o,i),{first:I,second:v}=Zi(n,u),g=me.mulByNonresidue(v);return{c0:fs.create({c0:me.add(me.mul(me.sub(p,r),Le),p),c1:me.add(me.mul(me.sub(E,n),Le),E),c2:me.add(me.mul(me.sub(I,i),Le),I)}),c1:fs.create({c0:me.add(me.mul(me.add(g,o),Le),g),c1:me.add(me.mul(me.add(w,f),Le),w),c2:me.add(me.mul(me.add(T,u),Le),T)})}},Fp12cyclotomicExp(t,e){let r=Se.ONE;for(let n=v0-1;n>=0;n--)r=Se._cyclotomicSquare(r),e0(e,n)&&(r=Se.mul(r,t));return r},Fp12finalExponentiate:t=>{const e=Xt,r=Se.div(Se.frobeniusMap(t,6),t),n=Se.mul(Se.frobeniusMap(r,2),r),i=Se.conjugate(Se._cyclotomicExp(n,e)),o=Se.mul(Se.conjugate(Se._cyclotomicSquare(n)),i),f=Se.conjugate(Se._cyclotomicExp(o,e)),u=Se.conjugate(Se._cyclotomicExp(f,e)),p=Se.mul(Se.conjugate(Se._cyclotomicExp(u,e)),Se._cyclotomicSquare(i)),w=Se.conjugate(Se._cyclotomicExp(p,e)),E=Se.frobeniusMap(Se.mul(i,u),2),T=Se.frobeniusMap(Se.mul(f,n),3),I=Se.frobeniusMap(Se.mul(p,Se.conjugate(n)),1),v=Se.mul(Se.mul(w,Se.conjugate(o)),n);return Se.mul(Se.mul(Se.mul(E,T),I),v)}}),go=wn(BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001")),B0=cc(me,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(t=>t.map(e=>me.fromBigTuple(e.map(BigInt))))),T0=cc(ge,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))),S0=pc(me,{A:me.create({c0:ge.create(at),c1:ge.create(BigInt(240))}),B:me.create({c0:ge.create(BigInt(1012)),c1:ge.create(BigInt(1012))}),Z:me.create({c0:ge.create(BigInt(-2)),c1:ge.create(BigInt(-1))})}),N0=pc(ge,{A:ge.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:ge.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:ge.create(BigInt(11))}),{G2psi:wo,G2psi2:I0}=E0(ge,me,me.div(me.ONE,me.NONRESIDUE)),Ki=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:ge.ORDER,m:2,k:128,expand:"xmd",hash:ms}),ui=cn(ge.toBytes(at),{infinity:!0,compressed:!0});function Sn(t){t=t.slice();const e=t[0]&224,r=!!(e>>7&1),n=!!(e>>6&1),i=!!(e>>5&1);return t[0]&=31,{compressed:r,infinity:n,sort:i,value:t}}function cn(t,e){if(t[0]&224)throw new Error("setMask: non-empty mask");return e.compressed&&(t[0]|=128),e.infinity&&(t[0]|=64),e.sort&&(t[0]|=32),t}function mo(t){t.assertValidity();const e=t.equals(ht.G1.ProjectivePoint.ZERO),{x:r,y:n}=t.toAffine();if(e)return ui.slice();const i=ge.ORDER,o=!!(n*Le/i);return cn(et(r,ge.BYTES),{compressed:!0,sort:o})}function bo(t){t.assertValidity();const e=ge.BYTES;if(t.equals(ht.G2.ProjectivePoint.ZERO))return je(ui,et(at,e));const{x:r,y:n}=t.toAffine(),{re:i,im:o}=me.reim(r),{re:f,im:u}=me.reim(n),w=!!((u>at?u*Le:f*Le)/ge.ORDER&ci),E=i;return je(cn(et(o,e),{sort:w,compressed:!0}),et(E,e))}const ht=_0({fields:{Fp:ge,Fp2:me,Fp6:fs,Fp12:Se,Fr:go},G1:{Fp:ge,h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1"),a:ge.ZERO,b:Dr,htfDefaults:{...Ki,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(t,e)=>{const r=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),n=new t(ge.mul(e.px,r),e.py,e.pz);return e.multiplyUnsafe(Xt).negate().multiplyUnsafe(Xt).equals(n)},clearCofactor:(t,e)=>e.multiplyUnsafe(Xt).add(e),mapToCurve:t=>{const{x:e,y:r}=N0(ge.create(t[0]));return T0(e,r)},fromBytes:t=>{const{compressed:e,infinity:r,sort:n,value:i}=Sn(t);if(i.length===48&&e){const o=ge.ORDER,f=xt(i),u=ge.create(f&ge.MASK);if(r){if(u!==at)throw new Error("G1: non-empty compressed point at infinity");return{x:at,y:at}}const p=ge.add(ge.pow(u,Tn),ge.create(ht.params.G1b));let w=ge.sqrt(p);if(!w)throw new Error("invalid compressed G1 point");return w*Le/o!==BigInt(n)&&(w=ge.neg(w)),{x:ge.create(u),y:ge.create(w)}}else if(i.length===96&&!e){const o=xt(i.subarray(0,ge.BYTES)),f=xt(i.subarray(ge.BYTES));if(r){if(o!==at||f!==at)throw new Error("G1: non-empty point at infinity");return ht.G1.ProjectivePoint.ZERO.toAffine()}return{x:ge.create(o),y:ge.create(f)}}else throw new Error("invalid point G1, expected 48/96 bytes")},toBytes:(t,e,r)=>{const n=e.equals(t.ZERO),{x:i,y:o}=e.toAffine();if(r){if(n)return ui.slice();const f=ge.ORDER,u=!!(o*Le/f);return cn(et(i,ge.BYTES),{compressed:!0,sort:u})}else return n?je(new Uint8Array([64]),new Uint8Array(2*ge.BYTES-1)):je(et(i,ge.BYTES),et(o,ge.BYTES))},ShortSignature:{fromHex(t){const{infinity:e,sort:r,value:n}=Sn(ct("signatureHex",t,48)),i=ge.ORDER,o=xt(n);if(e)return ht.G1.ProjectivePoint.ZERO;const f=ge.create(o&ge.MASK),u=ge.add(ge.pow(f,Tn),ge.create(ht.params.G1b));let p=ge.sqrt(u);if(!p)throw new Error("invalid compressed G1 point");const w=BigInt(r);p*Le/i!==w&&(p=ge.neg(p));const E=ht.G1.ProjectivePoint.fromAffine({x:f,y:p});return E.assertValidity(),E},toRawBytes(t){return mo(t)},toHex(t){return br(mo(t))}}},G2:{Fp:me,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),Gx:me.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:me.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")]),a:me.ZERO,b:me.fromBigTuple([Dr,Dr]),hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...Ki},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:t=>{const{x:e,y:r}=S0(me.fromBigTuple(t));return B0(e,r)},isTorsionFree:(t,e)=>e.multiplyUnsafe(Xt).negate().equals(wo(t,e)),clearCofactor:(t,e)=>{const r=Xt;let n=e.multiplyUnsafe(r).negate(),i=wo(t,e),o=e.double();return o=I0(t,o),o=o.subtract(i),i=n.add(i),i=i.multiplyUnsafe(r).negate(),o=o.add(i),o=o.subtract(n),o.subtract(e)},fromBytes:t=>{const{compressed:e,infinity:r,sort:n,value:i}=Sn(t);if(!e&&!r&&n||!e&&r&&n||n&&r&&e)throw new Error("invalid encoding flag: "+(t[0]&224));const o=ge.BYTES,f=(u,p,w)=>xt(u.slice(p,w));if(i.length===96&&e){const u=ht.params.G2b,p=ge.ORDER;if(r){if(i.reduce((k,C)=>k!==0?C+1:C,0)>0)throw new Error("invalid compressed G2 point");return{x:me.ZERO,y:me.ZERO}}const w=f(i,0,o),E=f(i,o,2*o),T=me.create({c0:ge.create(E),c1:ge.create(w)}),I=me.add(me.pow(T,Tn),u);let v=me.sqrt(I);const g=v.c1===at?v.c0*Le/p:v.c1*Le/p?ci:at;return v=n&&g>0?v:me.neg(v),{x:T,y:v}}else if(i.length===192&&!e){if(r){if(i.reduce((T,I)=>T!==0?I+1:I,0)>0)throw new Error("invalid uncompressed G2 point");return{x:me.ZERO,y:me.ZERO}}const u=f(i,0,o),p=f(i,o,2*o),w=f(i,2*o,3*o),E=f(i,3*o,4*o);return{x:me.fromBigTuple([p,u]),y:me.fromBigTuple([E,w])}}else throw new Error("invalid point G2, expected 96/192 bytes")},toBytes:(t,e,r)=>{const{BYTES:n,ORDER:i}=ge,o=e.equals(t.ZERO),{x:f,y:u}=e.toAffine();if(r){if(o)return je(ui,et(at,n));const p=!!(u.c1===at?u.c0*Le/i:u.c1*Le/i);return je(cn(et(f.c1,n),{compressed:!0,sort:p}),et(f.c0,n))}else{if(o)return je(new Uint8Array([64]),new Uint8Array(4*n-1));const{re:p,im:w}=me.reim(f),{re:E,im:T}=me.reim(u);return je(et(w,n),et(p,n),et(T,n),et(E,n))}},Signature:{fromHex(t){const{infinity:e,sort:r,value:n}=Sn(ct("signatureHex",t)),i=ge.ORDER,o=n.length/2;if(o!==48&&o!==96)throw new Error("invalid compressed signature length, must be 96 or 192");const f=xt(n.slice(0,o)),u=xt(n.slice(o));if(e)return ht.G2.ProjectivePoint.ZERO;const p=ge.create(f&ge.MASK),w=ge.create(u),E=me.create({c0:w,c1:p}),T=me.add(me.pow(E,Tn),ht.params.G2b);let I=me.sqrt(T);if(!I)throw new Error("Failed to find a square root");const{re:v,im:g}=me.reim(I),k=BigInt(r),C=g>at&&g*Le/i!==k,Z=g===at&&v*Le/i!==k;(C||Z)&&(I=me.neg(I));const Y=ht.G2.ProjectivePoint.fromAffine({x:E,y:I});return Y.assertValidity(),Y},toRawBytes(t){return bo(t)},toHex(t){return br(bo(t))}}},params:{ateLoopSize:Xt,r:go.ORDER,xNegative:!0,twistType:"multiplicative"},htfDefaults:Ki,hash:ms,randomBytes:Go});function R0(t,e,r){const n=typeof t=="string"?t:Xe(t),i=typeof e=="string"?e:Xe(e),o=typeof r=="string"?r:Xe(r);return ht.verifyShortSignature(i,o,n)}const yc=t=>Ke(new Vr(t)),Rs=t=>{const e=yc(t);return new Date(Number(e)/1e6)};var U0=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},O0=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},qn;class Rt extends Ce{constructor(e){super(`Invalid certificate: ${e}`)}}var ft;(function(t){t[t.Empty=0]="Empty",t[t.Fork=1]="Fork",t[t.Labeled=2]="Labeled",t[t.Leaf=3]="Leaf",t[t.Pruned=4]="Pruned"})(ft||(ft={}));function F0(t,e){const r=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<r.length;i++)if(r[i]>n[i])return!0;return!1}class pr{constructor(e,r,n,i,o=5,f=!1){this._rootKey=r,this._canisterId=n,this._blsVerify=i,this._maxAgeInMinutes=o,qn.set(this,!1),U0(this,qn,f,"f"),this.cert=Vt(new Uint8Array(e))}static async create(e){const r=pr.createUnverified(e);return await r.verify(),r}static createUnverified(e){let r=e.blsVerify;return r||(r=R0),new pr(e.certificate,e.rootKey,e.canisterId,r,e.maxAgeInMinutes,e.disableTimeVerification)}lookup(e){return qr(e,this.cert.tree)}lookup_label(e){return this.lookup([e])}async verify(){const e=await Vn(this.cert.tree),r=await this._checkDelegationAndGetKey(this.cert.delegation),n=this.cert.signature,i=P0(r),o=Ft(Wr("ic-state-root"),e);let f=!1;const u=pt(this.lookup(["time"]));if(!u)throw new Rt("Certificate does not contain a time");if(!O0(this,qn,"f")){const w=this._maxAgeInMinutes*60*1e3,E=Date.now(),T=E-w,I=E+3e5,v=Rs(u);if(v.getTime()<T)throw new Rt(`Certificate is signed more than ${this._maxAgeInMinutes} minutes in the past. Certificate time: `+v.toISOString()+" Current time: "+new Date(E).toISOString());if(v.getTime()>I)throw new Rt("Certificate is signed more than 5 minutes in the future. Certificate time: "+v.toISOString()+" Current time: "+new Date(E).toISOString())}try{f=await this._blsVerify(new Uint8Array(i),new Uint8Array(n),new Uint8Array(o))}catch{f=!1}if(!f)throw new Rt("Signature verification failed")}async _checkDelegationAndGetKey(e){if(!e)return this._rootKey;const r=await pr.createUnverified({certificate:e.certificate,rootKey:this._rootKey,canisterId:this._canisterId,blsVerify:this._blsVerify,maxAgeInMinutes:1/0});if(r.cert.delegation)throw new Rt("Delegation certificates cannot be nested");if(await r.verify(),this._canisterId.toString()!==Ol&&!gc({canisterId:this._canisterId,subnetId:Be.fromUint8Array(new Uint8Array(e.subnet_id)),tree:r.cert.tree}))throw new Rt(`Canister ${this._canisterId} not in range of delegations for subnet 0x${Xe(e.subnet_id)}`);const n=pt(r.lookup(["subnet",e.subnet_id,"public_key"]));if(!n)throw new Error(`Could not find subnet key for subnet 0x${Xe(e.subnet_id)}`);return n}}qn=new WeakMap;const zr=ti("308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100"),$0=96;function P0(t){const e=zr.byteLength+$0;if(t.byteLength!==e)throw new TypeError(`BLS DER-encoded public key must be ${e} bytes long`);const r=t.slice(0,zr.byteLength);if(!hi(r,zr))throw new TypeError(`BLS DER-encoded public key is invalid. Expect the following prefix: ${zr}, but get ${r}`);return t.slice(zr.byteLength)}function pt(t){if(t.status===ze.Found){if(t.value instanceof ArrayBuffer)return t.value;if(t.value instanceof Uint8Array)return t.value.buffer}}async function Vn(t){switch(t[0]){case ft.Empty:return Et(Wr("ic-hashtree-empty"));case ft.Pruned:return t[1];case ft.Leaf:return Et(Ft(Wr("ic-hashtree-leaf"),t[1]));case ft.Labeled:return Et(Ft(Wr("ic-hashtree-labeled"),t[1],await Vn(t[2])));case ft.Fork:return Et(Ft(Wr("ic-hashtree-fork"),await Vn(t[1]),await Vn(t[2])));default:throw new Error("unreachable")}}function Wr(t){const e=new Uint8Array([t.length]),r=new TextEncoder().encode(t);return Ft(e,r)}var ze;(function(t){t.Unknown="unknown",t.Absent="absent",t.Found="found"})(ze||(ze={}));var Ct;(function(t){t.Less="less",t.Greater="greater"})(Ct||(Ct={}));function qr(t,e){if(t.length===0)switch(e[0]){case ft.Leaf:{if(!e[1])throw new Error("Invalid tree structure for leaf");return e[1]instanceof ArrayBuffer?{status:ze.Found,value:e[1]}:e[1]instanceof Uint8Array?{status:ze.Found,value:e[1].buffer}:{status:ze.Found,value:e[1]}}default:return{status:ze.Found,value:e}}const r=typeof t[0]=="string"?new TextEncoder().encode(t[0]):t[0],n=Gn(r,e);switch(n.status){case ze.Found:return qr(t.slice(1),n.value);case Ct.Greater:case Ct.Less:return{status:ze.Absent};default:return n}}function ls(t){switch(t[0]){case ft.Empty:return[];case ft.Fork:return ls(t[1]).concat(ls(t[2]));default:return[t]}}function Gn(t,e){switch(e[0]){case ft.Labeled:return F0(t,e[1])?{status:Ct.Greater}:hi(t,e[1])?{status:ze.Found,value:e[2]}:{status:Ct.Less};case ft.Fork:const r=Gn(t,e[1]);switch(r.status){case Ct.Greater:{const n=Gn(t,e[2]);return n.status===Ct.Less?{status:ze.Absent}:n}case ze.Unknown:{let n=Gn(t,e[2]);return n.status===Ct.Less?{status:ze.Unknown}:n}default:return r}case ft.Pruned:return{status:ze.Unknown};default:return{status:ze.Absent}}}function gc(t){const{canisterId:e,subnetId:r,tree:n}=t,i=qr(["subnet",r.toUint8Array(),"canister_ranges"],n);if(i.status!==ze.Found||!(i.value instanceof ArrayBuffer))throw new Error(`Could not find canister ranges for subnet ${r}`);return Vt(i.value).map(p=>[Be.fromUint8Array(p[0]),Be.fromUint8Array(p[1])]).some(p=>p[0].ltEq(e)&&p[1].gtEq(e))}class M0{constructor(e,r,n){this.key=e,this.path=r,this.decodeStrategy=n}}const wc=async t=>{const{agent:e,paths:r}=t,n=Be.from(t.canisterId),i=[...new Set(r)],o=i.map(p=>hs(p,n)),f=new Map,u=i.map((p,w)=>(async()=>{var E;try{const T=await e.readState(n,{paths:[o[w]]});if(e.rootKey==null)throw new Error("Agent is missing root key");const I=await pr.create({certificate:T.certificate,rootKey:e.rootKey,canisterId:n,disableTimeVerification:!0}),v=(C,Z)=>{if(Z==="subnet"){if(e.rootKey==null)throw new Error("Agent is missing root key");const Y=mc(T.certificate,n,e.rootKey);return{path:Z,data:Y}}else return{path:Z,data:pt(C.lookup(hs(Z,n)))}},{path:g,data:k}=v(I,i[w]);if(!k)console.warn(`Expected to find result for path ${g}, but instead found nothing.`),typeof g=="string"?f.set(g,null):f.set(g.key,null);else switch(g){case"time":{f.set(g,Rs(k));break}case"controllers":{f.set(g,C0(k));break}case"module_hash":{f.set(g,_o(k));break}case"subnet":{f.set(g,k);break}case"candid":{f.set(g,new TextDecoder().decode(k));break}default:if(typeof g!="string"&&"key"in g&&"path"in g)switch(g.decodeStrategy){case"raw":f.set(g.key,k);break;case"leb128":{f.set(g.key,yc(k));break}case"cbor":{f.set(g.key,bc(k));break}case"hex":{f.set(g.key,_o(k));break}case"utf-8":f.set(g.key,k0(k))}}}catch(T){if(!((E=T==null?void 0:T.message)===null||E===void 0)&&E.includes("Invalid certificate"))throw new Ce(T.message);typeof p!="string"&&"key"in p&&"path"in p?f.set(p.key,null):f.set(p,null),console.group(),console.warn(`Expected to find result for path ${p}, but instead found nothing.`),console.warn(T),console.groupEnd()}})());return await Promise.all(u),f},mc=(t,e,r)=>{if(!e._isPrincipal)throw new Error("Invalid canisterId");const n=Vt(new Uint8Array(t)),i=n.tree;let o=n.delegation,f;if(o&&o.subnet_id?f=Be.fromUint8Array(new Uint8Array(o.subnet_id)):!o&&typeof r<"u"?(f=Be.selfAuthenticating(new Uint8Array(r)),o={subnet_id:f.toUint8Array(),certificate:new ArrayBuffer(0)}):(f=Be.selfAuthenticating(Be.fromText("tdb26-jop6k-aogll-7ltgs-eruif-6kk7m-qpktf-gdiqx-mxtrf-vb5e6-eqe").toUint8Array()),o={subnet_id:f.toUint8Array(),certificate:new ArrayBuffer(0)}),!gc({canisterId:e,subnetId:f,tree:i}))throw new Error("Canister not in range");const p=qr(["subnet",o.subnet_id,"node"],i);if(p.status!==ze.Found)throw new Error("Node not found");if(p.value instanceof ArrayBuffer)throw new Error("Invalid node tree");const w=ls(p.value),E=new Map;return w.forEach(T=>{const I=Be.from(new Uint8Array(T[1])).toText(),v=qr(["public_key"],T[2]);if(v.status!==ze.Found)throw new Error("Public key not found");const g=v.value;if(g.byteLength!==44)throw new Error("Invalid public key length");E.set(I,g)}),{subnetId:Be.fromUint8Array(new Uint8Array(o.subnet_id)).toText(),nodeKeys:E}},hs=(t,e)=>{const r=new TextEncoder,n=o=>new DataView(r.encode(o).buffer).buffer,i=new DataView(e.toUint8Array().buffer).buffer;switch(t){case"time":return[n("time")];case"controllers":return[n("canister"),i,n("controllers")];case"module_hash":return[n("canister"),i,n("module_hash")];case"subnet":return[n("subnet")];case"candid":return[n("canister"),i,n("metadata"),n("candid:service")];default:if("key"in t&&"path"in t)if(typeof t.path=="string"||t.path instanceof ArrayBuffer){const o=t.path,f=typeof o=="string"?n(o):o;return[n("canister"),i,n("metadata"),f]}else return t.path}throw new Error(`An unexpeected error was encountered while encoding your path for canister status. Please ensure that your path, ${t} was formatted correctly.`)},_o=t=>Xe(t),bc=t=>Vt(t),k0=t=>new TextDecoder().decode(t),C0=t=>bc(t).map(r=>Be.fromUint8Array(new Uint8Array(r))),q0=Object.freeze(Object.defineProperty({__proto__:null,CustomPath:M0,encodePath:hs,fetchNodeKeys:mc,request:wc},Symbol.toStringTag,{value:"Module"})),Nn=BigInt(2**32-1),ds=BigInt(32);function _c(t,e=!1){return e?{h:Number(t&Nn),l:Number(t>>ds&Nn)}:{h:Number(t>>ds&Nn)|0,l:Number(t&Nn)|0}}function V0(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:o,l:f}=_c(t[i],e);[r[i],n[i]]=[o,f]}return[r,n]}const G0=(t,e)=>BigInt(t>>>0)<<ds|BigInt(e>>>0),H0=(t,e,r)=>t>>>r,j0=(t,e,r)=>t<<32-r|e>>>r,z0=(t,e,r)=>t>>>r|e<<32-r,Y0=(t,e,r)=>t<<32-r|e>>>r,W0=(t,e,r)=>t<<64-r|e>>>r-32,Z0=(t,e,r)=>t>>>r-32|e<<64-r,K0=(t,e)=>e,L0=(t,e)=>t,X0=(t,e,r)=>t<<r|e>>>32-r,J0=(t,e,r)=>e<<r|t>>>32-r,Q0=(t,e,r)=>e<<r-32|t>>>64-r,D0=(t,e,r)=>t<<r-32|e>>>64-r;function el(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const tl=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),rl=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,nl=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),il=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,sl=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),ol=(t,e,r,n,i,o)=>e+r+n+i+o+(t/2**32|0)|0,al={fromBig:_c,split:V0,toBig:G0,shrSH:H0,shrSL:j0,rotrSH:z0,rotrSL:Y0,rotrBH:W0,rotrBL:Z0,rotr32H:K0,rotr32L:L0,rotlSH:X0,rotlSL:J0,rotlBH:Q0,rotlBL:D0,add:el,add3L:tl,add3H:rl,add4L:nl,add4H:il,add5H:ol,add5L:sl},Ae=al,[cl,ul]=(()=>Ae.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),Wt=new Uint32Array(80),Zt=new Uint32Array(80);class fl extends Ho{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:o,Cl:f,Dh:u,Dl:p,Eh:w,El:E,Fh:T,Fl:I,Gh:v,Gl:g,Hh:k,Hl:C}=this;return[e,r,n,i,o,f,u,p,w,E,T,I,v,g,k,C]}set(e,r,n,i,o,f,u,p,w,E,T,I,v,g,k,C){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=f|0,this.Dh=u|0,this.Dl=p|0,this.Eh=w|0,this.El=E|0,this.Fh=T|0,this.Fl=I|0,this.Gh=v|0,this.Gl=g|0,this.Hh=k|0,this.Hl=C|0}process(e,r){for(let q=0;q<16;q++,r+=4)Wt[q]=e.getUint32(r),Zt[q]=e.getUint32(r+=4);for(let q=16;q<80;q++){const re=Wt[q-15]|0,$=Zt[q-15]|0,L=Ae.rotrSH(re,$,1)^Ae.rotrSH(re,$,8)^Ae.shrSH(re,$,7),K=Ae.rotrSL(re,$,1)^Ae.rotrSL(re,$,8)^Ae.shrSL(re,$,7),Q=Wt[q-2]|0,D=Zt[q-2]|0,J=Ae.rotrSH(Q,D,19)^Ae.rotrBH(Q,D,61)^Ae.shrSH(Q,D,6),he=Ae.rotrSL(Q,D,19)^Ae.rotrBL(Q,D,61)^Ae.shrSL(Q,D,6),le=Ae.add4L(K,he,Zt[q-7],Zt[q-16]),N=Ae.add4H(le,L,J,Wt[q-7],Wt[q-16]);Wt[q]=N|0,Zt[q]=le|0}let{Ah:n,Al:i,Bh:o,Bl:f,Ch:u,Cl:p,Dh:w,Dl:E,Eh:T,El:I,Fh:v,Fl:g,Gh:k,Gl:C,Hh:Z,Hl:Y}=this;for(let q=0;q<80;q++){const re=Ae.rotrSH(T,I,14)^Ae.rotrSH(T,I,18)^Ae.rotrBH(T,I,41),$=Ae.rotrSL(T,I,14)^Ae.rotrSL(T,I,18)^Ae.rotrBL(T,I,41),L=T&v^~T&k,K=I&g^~I&C,Q=Ae.add5L(Y,$,K,ul[q],Zt[q]),D=Ae.add5H(Q,Z,re,L,cl[q],Wt[q]),J=Q|0,he=Ae.rotrSH(n,i,28)^Ae.rotrBH(n,i,34)^Ae.rotrBH(n,i,39),le=Ae.rotrSL(n,i,28)^Ae.rotrBL(n,i,34)^Ae.rotrBL(n,i,39),N=n&o^n&u^o&u,O=i&f^i&p^f&p;Z=k|0,Y=C|0,k=v|0,C=g|0,v=T|0,g=I|0,{h:T,l:I}=Ae.add(w|0,E|0,D|0,J|0),w=u|0,E=p|0,u=o|0,p=f|0,o=n|0,f=i|0;const W=Ae.add3L(J,le,O);n=Ae.add3H(W,D,he,N),i=W|0}({h:n,l:i}=Ae.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:f}=Ae.add(this.Bh|0,this.Bl|0,o|0,f|0),{h:u,l:p}=Ae.add(this.Ch|0,this.Cl|0,u|0,p|0),{h:w,l:E}=Ae.add(this.Dh|0,this.Dl|0,w|0,E|0),{h:T,l:I}=Ae.add(this.Eh|0,this.El|0,T|0,I|0),{h:v,l:g}=Ae.add(this.Fh|0,this.Fl|0,v|0,g|0),{h:k,l:C}=Ae.add(this.Gh|0,this.Gl|0,k|0,C|0),{h:Z,l:Y}=Ae.add(this.Hh|0,this.Hl|0,Z|0,Y|0),this.set(n,i,o,f,u,p,w,E,T,I,v,g,k,C,Z,Y)}roundClean(){Wt.fill(0),Zt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ll=ws(()=>new fl);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wt=BigInt(0),ut=BigInt(1),In=BigInt(2),hl=BigInt(8),dl={zip215:!0};function pl(t){const e=dc(t);return gn(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function yl(t){const e=pl(t),{Fp:r,n,prehash:i,hash:o,randomBytes:f,nByteLength:u,h:p}=e,w=In<<BigInt(u*8)-ut,E=r.create,T=wn(e.n,e.nBitLength),I=e.uvRatio||((H,G)=>{try{return{isValid:!0,value:r.sqrt(H*r.inv(G))}}catch{return{isValid:!1,value:wt}}}),v=e.adjustScalarBytes||(H=>H),g=e.domain||((H,G,X)=>{if(Xr("phflag",X),G.length||X)throw new Error("Contexts/pre-hash are not supported");return H});function k(H,G){Qt("coordinate "+H,G,wt,w)}function C(H){if(!(H instanceof q))throw new Error("ExtendedPoint expected")}const Z=on((H,G)=>{const{ex:X,ey:ie,ez:we}=H,oe=H.is0();G==null&&(G=oe?hl:r.inv(we));const fe=E(X*G),ee=E(ie*G),m=E(we*G);if(oe)return{x:wt,y:ut};if(m!==ut)throw new Error("invZ was invalid");return{x:fe,y:ee}}),Y=on(H=>{const{a:G,d:X}=e;if(H.is0())throw new Error("bad point: ZERO");const{ex:ie,ey:we,ez:oe,et:fe}=H,ee=E(ie*ie),m=E(we*we),se=E(oe*oe),ue=E(se*se),de=E(ee*G),te=E(se*E(de+m)),ae=E(ue+E(X*E(ee*m)));if(te!==ae)throw new Error("bad point: equation left != right (1)");const b=E(ie*we),x=E(oe*fe);if(b!==x)throw new Error("bad point: equation left != right (2)");return!0});class q{constructor(G,X,ie,we){this.ex=G,this.ey=X,this.ez=ie,this.et=we,k("x",G),k("y",X),k("z",ie),k("t",we),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(G){if(G instanceof q)throw new Error("extended point not allowed");const{x:X,y:ie}=G||{};return k("x",X),k("y",ie),new q(X,ie,ut,E(X*ie))}static normalizeZ(G){const X=r.invertBatch(G.map(ie=>ie.ez));return G.map((ie,we)=>ie.toAffine(X[we])).map(q.fromAffine)}static msm(G,X){return hc(q,T,G,X)}_setWindowSize(G){L.setWindowSize(this,G)}assertValidity(){Y(this)}equals(G){C(G);const{ex:X,ey:ie,ez:we}=this,{ex:oe,ey:fe,ez:ee}=G,m=E(X*ee),se=E(oe*we),ue=E(ie*ee),de=E(fe*we);return m===se&&ue===de}is0(){return this.equals(q.ZERO)}negate(){return new q(E(-this.ex),this.ey,this.ez,E(-this.et))}double(){const{a:G}=e,{ex:X,ey:ie,ez:we}=this,oe=E(X*X),fe=E(ie*ie),ee=E(In*E(we*we)),m=E(G*oe),se=X+ie,ue=E(E(se*se)-oe-fe),de=m+fe,te=de-ee,ae=m-fe,b=E(ue*te),x=E(de*ae),B=E(ue*ae),P=E(te*de);return new q(b,x,P,B)}add(G){C(G);const{a:X,d:ie}=e,{ex:we,ey:oe,ez:fe,et:ee}=this,{ex:m,ey:se,ez:ue,et:de}=G;if(X===BigInt(-1)){const _=E((oe-we)*(se+m)),S=E((oe+we)*(se-m)),V=E(S-_);if(V===wt)return this.double();const ne=E(fe*In*de),pe=E(ee*In*ue),ye=pe+ne,xe=S+_,d=pe-ne,c=E(ye*V),l=E(xe*d),A=E(ye*d),F=E(V*xe);return new q(c,l,F,A)}const te=E(we*m),ae=E(oe*se),b=E(ee*ie*de),x=E(fe*ue),B=E((we+oe)*(m+se)-te-ae),P=x-b,U=x+b,M=E(ae-X*te),h=E(B*P),s=E(U*M),a=E(B*M),y=E(P*U);return new q(h,s,y,a)}subtract(G){return this.add(G.negate())}wNAF(G){return L.wNAFCached(this,G,q.normalizeZ)}multiply(G){const X=G;Qt("scalar",X,ut,n);const{p:ie,f:we}=this.wNAF(X);return q.normalizeZ([ie,we])[0]}multiplyUnsafe(G,X=q.ZERO){const ie=G;return Qt("scalar",ie,wt,n),ie===wt?$:this.is0()||ie===ut?this:L.wNAFCachedUnsafe(this,ie,q.normalizeZ,X)}isSmallOrder(){return this.multiplyUnsafe(p).is0()}isTorsionFree(){return L.unsafeLadder(this,n).is0()}toAffine(G){return Z(this,G)}clearCofactor(){const{h:G}=e;return G===ut?this:this.multiplyUnsafe(G)}static fromHex(G,X=!1){const{d:ie,a:we}=e,oe=r.BYTES;G=ct("pointHex",G,oe),Xr("zip215",X);const fe=G.slice(),ee=G[oe-1];fe[oe-1]=ee&-129;const m=Jr(fe),se=X?w:r.ORDER;Qt("pointHex.y",m,wt,se);const ue=E(m*m),de=E(ue-ut),te=E(ie*ue-we);let{isValid:ae,value:b}=I(de,te);if(!ae)throw new Error("Point.fromHex: invalid y coordinate");const x=(b&ut)===ut,B=(ee&128)!==0;if(!X&&b===wt&&B)throw new Error("Point.fromHex: x=0 and x_0=1");return B!==x&&(b=E(-b)),q.fromAffine({x:b,y:m})}static fromPrivateKey(G){return D(G).point}toRawBytes(){const{x:G,y:X}=this.toAffine(),ie=oi(X,r.BYTES);return ie[ie.length-1]|=G&ut?128:0,ie}toHex(){return br(this.toRawBytes())}}q.BASE=new q(e.Gx,e.Gy,ut,E(e.Gx*e.Gy)),q.ZERO=new q(wt,ut,ut,wt);const{BASE:re,ZERO:$}=q,L=lc(q,u*8);function K(H){return ke(H,n)}function Q(H){return K(Jr(H))}function D(H){const G=r.BYTES;H=ct("private key",H,G);const X=ct("hashed private key",o(H),2*G),ie=v(X.slice(0,G)),we=X.slice(G,2*G),oe=Q(ie),fe=re.multiply(oe),ee=fe.toRawBytes();return{head:ie,prefix:we,scalar:oe,point:fe,pointBytes:ee}}function J(H){return D(H).pointBytes}function he(H=new Uint8Array,...G){const X=je(...G);return Q(o(g(X,ct("context",H),!!i)))}function le(H,G,X={}){H=ct("message",H),i&&(H=i(H));const{prefix:ie,scalar:we,pointBytes:oe}=D(G),fe=he(X.context,ie,H),ee=re.multiply(fe).toRawBytes(),m=he(X.context,ee,oe,H),se=K(fe+m*we);Qt("signature.s",se,wt,n);const ue=je(ee,oi(se,r.BYTES));return ct("result",ue,r.BYTES*2)}const N=dl;function O(H,G,X,ie=N){const{context:we,zip215:oe}=ie,fe=r.BYTES;H=ct("signature",H,2*fe),G=ct("message",G),X=ct("publicKey",X,fe),oe!==void 0&&Xr("zip215",oe),i&&(G=i(G));const ee=Jr(H.slice(fe,2*fe));let m,se,ue;try{m=q.fromHex(X,oe),se=q.fromHex(H.slice(0,fe),oe),ue=re.multiplyUnsafe(ee)}catch{return!1}if(!oe&&m.isSmallOrder())return!1;const de=he(we,se.toRawBytes(),m.toRawBytes(),G);return se.add(m.multiplyUnsafe(de)).subtract(ue).clearCofactor().equals(q.ZERO)}return re._setWindowSize(8),{CURVE:e,getPublicKey:J,sign:le,verify:O,ExtendedPoint:q,utils:{getExtendedPublicKey:D,randomPrivateKey:()=>f(r.BYTES),precompute(H=8,G=q.BASE){return G._setWindowSize(H),G.multiply(BigInt(3)),G}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Us=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),xo=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const gl=BigInt(1),Eo=BigInt(2);BigInt(3);const wl=BigInt(5),ml=BigInt(8);function bl(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),o=Us,u=t*t%o*t%o,p=Bt(u,Eo,o)*u%o,w=Bt(p,gl,o)*t%o,E=Bt(w,wl,o)*w%o,T=Bt(E,e,o)*E%o,I=Bt(T,r,o)*T%o,v=Bt(I,n,o)*I%o,g=Bt(v,i,o)*v%o,k=Bt(g,i,o)*v%o,C=Bt(k,e,o)*E%o;return{pow_p_5_8:Bt(C,Eo,o)*t%o,b2:u}}function _l(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function xl(t,e){const r=Us,n=ke(e*e*e,r),i=ke(n*n*e,r),o=bl(t*i).pow_p_5_8;let f=ke(t*n*o,r);const u=ke(e*f*f,r),p=f,w=ke(f*xo,r),E=u===t,T=u===ke(-t,r),I=u===ke(-t*xo,r);return E&&(f=p),(T||I)&&(f=w),o0(f,r)&&(f=ke(-f,r)),{isValid:E||T,value:f}}const El=(()=>wn(Us,void 0,!0))(),Al=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:El,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:ml,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:ll,randomBytes:Go,adjustScalarBytes:_l,uvRatio:xl}))(),vl=(()=>yl(Al))();var Ao=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},ot=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},rt,Zr,xc,Ec;class Bl{constructor(e={}){rt.set(this,void 0),Zr.set(this,void 0),this[xc]=this.entries.bind(this),this[Ec]="ExpirableMap";const{source:r=[],expirationTime:n=10*60*1e3}=e,i=Date.now();Ao(this,rt,new Map([...r].map(([o,f])=>[o,{value:f,timestamp:i}])),"f"),Ao(this,Zr,n,"f")}prune(){const e=Date.now();for(const[r,n]of ot(this,rt,"f").entries())e-n.timestamp>ot(this,Zr,"f")&&ot(this,rt,"f").delete(r);return this}set(e,r){this.prune();const n={value:r,timestamp:Date.now()};return ot(this,rt,"f").set(e,n),this}get(e){const r=ot(this,rt,"f").get(e);if(r!==void 0){if(Date.now()-r.timestamp>ot(this,Zr,"f")){ot(this,rt,"f").delete(e);return}return r.value}}clear(){ot(this,rt,"f").clear()}entries(){const e=ot(this,rt,"f").entries();return function*(){for(const[n,i]of e)yield[n,i.value]}()}values(){const e=ot(this,rt,"f").values();return function*(){for(const n of e)yield n.value}()}keys(){return ot(this,rt,"f").keys()}forEach(e,r){for(const[n,i]of ot(this,rt,"f").entries())e.call(r,i.value,n,this)}has(e){return ot(this,rt,"f").has(e)}delete(e){return ot(this,rt,"f").delete(e)}get size(){return ot(this,rt,"f").size}}rt=new WeakMap,Zr=new WeakMap,xc=Symbol.iterator,Ec=Symbol.toStringTag;const vo=t=>{if(t<=127)return 1;if(t<=255)return 2;if(t<=65535)return 3;if(t<=16777215)return 4;throw new Error("Length too long (> 4 bytes)")},Bo=(t,e,r)=>{if(r<=127)return t[e]=r,1;if(r<=255)return t[e]=129,t[e+1]=r,2;if(r<=65535)return t[e]=130,t[e+1]=r>>8,t[e+2]=r,3;if(r<=16777215)return t[e]=131,t[e+1]=r>>16,t[e+2]=r>>8,t[e+3]=r,4;throw new Error("Length too long (> 4 bytes)")},ps=(t,e)=>{if(t[e]<128)return 1;if(t[e]===128)throw new Error("Invalid length 0");if(t[e]===129)return 2;if(t[e]===130)return 3;if(t[e]===131)return 4;throw new Error("Length too long (> 4 bytes)")},Tl=(t,e)=>{const r=ps(t,e);if(r===1)return t[e];if(r===2)return t[e+1];if(r===3)return(t[e+1]<<8)+t[e+2];if(r===4)return(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];throw new Error("Length too long (> 4 bytes)")};Uint8Array.from([48,12,6,10,43,6,1,4,1,131,184,67,1,1]);const To=Uint8Array.from([48,5,6,3,43,101,112]);Uint8Array.from([48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,10]);function Sl(t,e){const r=2+vo(t.byteLength+1),n=e.byteLength+r+t.byteLength;let i=0;const o=new Uint8Array(1+vo(n)+n);return o[i++]=48,i+=Bo(o,i,n),o.set(e,i),i+=e.byteLength,o[i++]=3,i+=Bo(o,i,t.byteLength+1),o[i++]=0,o.set(new Uint8Array(t),i),o}const Nl=(t,e)=>{let r=0;const n=(u,p)=>{if(i[r++]!==u)throw new Error("Expected: "+p)},i=new Uint8Array(t);if(n(48,"sequence"),r+=ps(i,r),!hi(i.slice(r,r+e.byteLength),e))throw new Error("Not the expected OID.");r+=e.byteLength,n(3,"bit string");const o=Tl(i,r)-1;r+=ps(i,r),n(0,"0 padding");const f=i.slice(r);if(o!==f.length)throw new Error(`DER payload mismatch: Expected length ${o} actual length ${f.length}`);return f};var So=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},No=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Hn,jn;class dr{constructor(e){if(Hn.set(this,void 0),jn.set(this,void 0),e.byteLength!==dr.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");So(this,Hn,e,"f"),So(this,jn,dr.derEncode(e),"f")}static from(e){return this.fromDer(e.toDer())}static fromRaw(e){return new dr(e)}static fromDer(e){return new dr(this.derDecode(e))}static derEncode(e){return Sl(e,To).buffer}static derDecode(e){const r=Nl(e,To);if(r.length!==this.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");return r}get rawKey(){return No(this,Hn,"f")}get derKey(){return No(this,jn,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}}Hn=new WeakMap,jn=new WeakMap;dr.RAW_KEY_LENGTH=32;class Il{constructor(){this.observers=[]}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter(r=>r!==e)}notify(e,...r){this.observers.forEach(n=>n(e,...r))}}class Rl extends Il{constructor(){super()}print(e,...r){this.notify({message:e,level:"info"},...r)}warn(e,...r){this.notify({message:e,level:"warn"},...r)}error(e,r,...n){this.notify({message:e,level:"error",error:r},...n)}}var Tt=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},tt=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},St,zn,Yn,Wn,Zn,Kn,Ln,Xn,Br;const Ac=.5,vc=1.5,Bc=500,Tc=6e4,Sc=9e5,Nc=10;class Ei{constructor(e=Ei.default){St.set(this,void 0),zn.set(this,void 0),Yn.set(this,void 0),Wn.set(this,void 0),Zn.set(this,void 0),Kn.set(this,void 0),Ln.set(this,void 0),Xn.set(this,void 0),Br.set(this,0);const{initialInterval:r=Bc,randomizationFactor:n=Ac,multiplier:i=vc,maxInterval:o=Tc,maxElapsedTime:f=Sc,maxIterations:u=Nc,date:p=Date}=e;Tt(this,St,r,"f"),Tt(this,zn,n,"f"),Tt(this,Yn,i,"f"),Tt(this,Wn,o,"f"),Tt(this,Xn,p,"f"),Tt(this,Zn,p.now(),"f"),Tt(this,Kn,f,"f"),Tt(this,Ln,u,"f")}get ellapsedTimeInMsec(){return tt(this,Xn,"f").now()-tt(this,Zn,"f")}get currentInterval(){return tt(this,St,"f")}get count(){return tt(this,Br,"f")}get randomValueFromInterval(){const e=tt(this,zn,"f")*tt(this,St,"f"),r=tt(this,St,"f")-e,n=tt(this,St,"f")+e;return Math.random()*(n-r)+r}incrementCurrentInterval(){var e;return Tt(this,St,Math.min(tt(this,St,"f")*tt(this,Yn,"f"),tt(this,Wn,"f")),"f"),Tt(this,Br,(e=tt(this,Br,"f"),e++,e),"f"),tt(this,St,"f")}next(){return this.ellapsedTimeInMsec>=tt(this,Kn,"f")||tt(this,Br,"f")>=tt(this,Ln,"f")?null:(this.incrementCurrentInterval(),this.randomValueFromInterval)}}St=new WeakMap,zn=new WeakMap,Yn=new WeakMap,Wn=new WeakMap,Zn=new WeakMap,Kn=new WeakMap,Ln=new WeakMap,Xn=new WeakMap,Br=new WeakMap;Ei.default={initialInterval:Bc,randomizationFactor:Ac,multiplier:vc,maxInterval:Tc,maxElapsedTime:Sc,maxIterations:Nc,date:Date};var De=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},ce=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},nt,sr,Fr,Nt,Pt,Ur,Kr,Tr,bt,_t,or,ar,Lr,Sr,Nr,cr,lr,Ic,Jn,Qn,ur,Mt;(function(t){t.Received="received",t.Processing="processing",t.Replied="replied",t.Rejected="rejected",t.Unknown="unknown",t.Done="done"})(Mt||(Mt={}));const Rn=60*1e3,Ul="308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100814c0e6ec71fab583b08bd81373c255c3c371b2e84863c98a4f1e08b74235d14fb5d9c0cd546d9685f913a0c0b2cc5341583bf4b4392e467db96d65b9bb4cb717112f8472e0d5a4d14505ffd7484b01291091c5f87b98883463f98091a0baaae",Ol="aaaaa-aa",Fl="ic0.app",$l=".ic0.app",Pl="icp0.io",Ml=".icp0.io",kl="icp-api.io",Cl=".icp-api.io";class Li extends Ce{constructor(e){super(e),this.message=e}}class Un extends Ce{constructor(e){super(e),this.message=e}}function ql(){let t;if(typeof window<"u")if(window.fetch)t=window.fetch.bind(window);else throw new Li("Fetch implementation was not available. You appear to be in a browser context, but window.fetch was not present.");else if(typeof global<"u")if(global.fetch)t=global.fetch.bind(global);else throw new Li("Fetch implementation was not available. You appear to be in a Node.js context, but global.fetch was not available.");else typeof self<"u"&&self.fetch&&(t=self.fetch.bind(self));if(t)return t;throw new Li("Fetch implementation was not available. Please provide fetch to the HttpAgent constructor, or ensure it is available in the window or global context.")}function Vl(t){let e;if(t!==void 0)!t.match(/^[a-z]+:/)&&typeof window<"u"?e=new URL(window.location.protocol+"//"+t):e=new URL(t);else{const r=["ic0.app","icp0.io","127.0.0.1","localhost"],n=[".github.dev",".gitpod.io"],i=typeof window<"u"?window.location:void 0,o=i==null?void 0:i.hostname;let f;o&&typeof o=="string"&&(n.some(u=>o.endsWith(u))?f=o:f=r.find(u=>o.endsWith(u))),i&&f?e=new URL(`${i.protocol}//${f}${i.port?":"+i.port:""}`):e=new URL("https://icp-api.io")}return e.toString()}class Or{constructor(e={}){var r,n;nt.add(this),sr.set(this,null),Fr.set(this,!1),Nt.set(this,void 0),Pt.set(this,void 0),Ur.set(this,void 0),Kr.set(this,void 0),Tr.set(this,0),bt.set(this,void 0),_t.set(this,void 0),or.set(this,void 0),ar.set(this,void 0),this._isAgent=!0,this.config={},Lr.set(this,0),this.log=new Rl,Sr.set(this,[]),Nr.set(this,[]),cr.set(this,new Bl({expirationTime:5*60*1e3})),lr.set(this,!0),Qn.set(this,(f,u)=>{if(ce(this,lr,"f")===!1)return f;if(!u)throw new Rt("Invalid signature from replica signed query: no matching node key found.");const{status:p,signatures:w=[],requestId:E}=f,T=new TextEncoder().encode("\vic-response");for(const I of w){const{timestamp:v,identity:g}=I,k=Be.fromUint8Array(g).toText();let C;if(p==="replied"){const{reply:$}=f;C=si({status:p,reply:$,timestamp:BigInt(v),request_id:E})}else if(p==="rejected"){const{reject_code:$,reject_message:L,error_code:K}=f;C=si({status:p,reject_code:$,reject_message:L,error_code:K,timestamp:BigInt(v),request_id:E})}else throw new Error(`Unknown status: ${p}`);const Z=Ft(T,new Uint8Array(C)),Y=u==null?void 0:u.nodeKeys.get(k);if(!Y)throw new Rt("Invalid signature from replica signed query: no matching node key found.");const q=dr.fromDer(Y).rawKey;if(vl.verify(I.signature,new Uint8Array(Z),new Uint8Array(q)))return f;throw new Rt(`Invalid signature from replica ${k} signed query.`)}return f}),this.config=e,De(this,Pt,e.fetch||ql()||fetch.bind(global),"f"),De(this,Ur,e.fetchOptions,"f"),De(this,Kr,e.callOptions,"f"),De(this,Fr,(r=e.shouldFetchRootKey)!==null&&r!==void 0?r:!1,"f"),e.rootKey?this.rootKey=e.rootKey:ce(this,Fr,"f")?this.rootKey=null:this.rootKey=ti(Ul);const i=Vl(e.host);this.host=new URL(i),e.verifyQuerySignatures!==void 0&&De(this,lr,e.verifyQuerySignatures,"f"),De(this,_t,(n=e.retryTimes)!==null&&n!==void 0?n:3,"f");const o=()=>new Ei({maxIterations:ce(this,_t,"f")});if(De(this,or,e.backoffStrategy||o,"f"),this.host.hostname.endsWith($l)?this.host.hostname=Fl:this.host.hostname.endsWith(Ml)?this.host.hostname=Pl:this.host.hostname.endsWith(Cl)&&(this.host.hostname=kl),e.credentials){const{name:f,password:u}=e.credentials;De(this,bt,`${f}${u?":"+u:""}`,"f")}if(De(this,Nt,Promise.resolve(e.identity||new Ds),"f"),e.ingressExpiryInMinutes&&e.ingressExpiryInMinutes>5)throw new Ce(`The maximum ingress expiry time is 5 minutes. Provided ingress expiry time is ${e.ingressExpiryInMinutes} minutes.`);if(e.ingressExpiryInMinutes&&e.ingressExpiryInMinutes<=0)throw new Ce(`Ingress expiry time must be greater than 0. Provided ingress expiry time is ${e.ingressExpiryInMinutes} minutes.`);De(this,ar,e.ingressExpiryInMinutes||5,"f"),this.addTransform("update",ro(cs)),e.useQueryNonces&&this.addTransform("query",ro(cs)),e.logToConsole&&this.log.subscribe(f=>{f.level==="error"?console.error(f.message):f.level==="warn"?console.warn(f.message):console.log(f.message)})}get waterMark(){return ce(this,Lr,"f")}static createSync(e={}){return new this(Object.assign({},e))}static async create(e={shouldFetchRootKey:!1}){const r=Or.createSync(e),n=[r.syncTime()];return r.host.toString()!=="https://icp-api.io"&&e.shouldFetchRootKey&&n.push(r.fetchRootKey()),await Promise.all(n),r}static async from(e){var r;try{return"config"in e?await Or.create(e.config):await Or.create({fetch:e._fetch,fetchOptions:e._fetchOptions,callOptions:e._callOptions,host:e._host.toString(),identity:(r=e._identity)!==null&&r!==void 0?r:void 0})}catch{throw new Ce("Failed to create agent from provided agent")}}isLocal(){const e=this.host.hostname;return e==="127.0.0.1"||e.endsWith("127.0.0.1")}addTransform(e,r,n=r.priority||0){if(e==="update"){const i=ce(this,Nr,"f").findIndex(o=>(o.priority||0)<n);ce(this,Nr,"f").splice(i>=0?i:ce(this,Nr,"f").length,0,Object.assign(r,{priority:n}))}else if(e==="query"){const i=ce(this,Sr,"f").findIndex(o=>(o.priority||0)<n);ce(this,Sr,"f").splice(i>=0?i:ce(this,Sr,"f").length,0,Object.assign(r,{priority:n}))}}async getPrincipal(){if(!ce(this,Nt,"f"))throw new Un("This identity has expired due this application's security policy. Please refresh your authentication.");return(await ce(this,Nt,"f")).getPrincipal()}async call(e,r,n){var i,o;await ce(this,nt,"m",ur).call(this);const f=(i=r.callSync)!==null&&i!==void 0?i:!0,u=await(n!==void 0?await n:await ce(this,Nt,"f"));if(!u)throw new Un("This identity has expired due this application's security policy. Please refresh your authentication.");const p=Be.from(e),w=r.effectiveCanisterId?Be.from(r.effectiveCanisterId):p,E=u.getPrincipal()||Be.anonymous();let T=new An(ce(this,ar,"f")*Rn);Math.abs(ce(this,Tr,"f"))>1e3*30&&(T=new An(ce(this,ar,"f")*Rn+ce(this,Tr,"f")));const I={request_type:as.Call,canister_id:p,method_name:r.methodName,arg:r.arg,sender:E,ingress_expiry:T};let v=await this._transform({request:{body:null,method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ce(this,bt,"f")?{Authorization:"Basic "+btoa(ce(this,bt,"f"))}:{})},endpoint:"call",body:I});const g=v.body.nonce?k(v.body.nonce):void 0;I.nonce=g;function k(q){return new Uint8Array(q)}v=await u.transformRequest(v);const C=qi(v.body),Z=ce(this,or,"f").call(this),Y=Qs(I);try{const q=()=>(this.log.print(`fetching "/api/v3/canister/${w.toText()}/call" with request:`,v),ce(this,Pt,"f").call(this,""+new URL(`/api/v3/canister/${w.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,Kr,"f")),v.request),{body:C}))),re=()=>(this.log.print(`fetching "/api/v2/canister/${w.toText()}/call" with request:`,v),ce(this,Pt,"f").call(this,""+new URL(`/api/v2/canister/${w.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,Kr,"f")),v.request),{body:C}))),L=await ce(this,nt,"m",Jn).call(this,{request:f?q:re,backoff:Z,tries:0}),K=await L.arrayBuffer(),Q=L.status===200&&K.byteLength>0?Vt(K):null;if(Q&&"certificate"in Q){const D=await this.parseTimeFromResponse({certificate:Q.certificate});De(this,Lr,D,"f")}return{requestId:Y,response:{ok:L.ok,status:L.status,statusText:L.statusText,body:Q,headers:Yr(L.headers)},requestDetails:I}}catch(q){if(q.message.includes("v3 api not supported."))return this.log.warn("v3 api not supported. Fall back to v2"),this.call(e,Object.assign(Object.assign({},r),{callSync:!1}),n);const re=`Error while making call: ${(o=q.message)!==null&&o!==void 0?o:String(q)}`,$=new Lf(re,q,Xe(Y),Xe(v.body.sender_pubkey),Xe(v.body.sender_sig),String(v.body.content.ingress_expiry._value));throw this.log.error(re,$),$}}async query(e,r,n){var i,o,f,u;await ce(this,nt,"m",ur).call(this);const p=ce(this,or,"f").call(this),w=r.effectiveCanisterId?Be.from(r.effectiveCanisterId):Be.from(e);this.log.print(`ecid ${w.toString()}`),this.log.print(`canisterId ${e.toString()}`);let E,T;const I=await(n!==void 0?n:ce(this,Nt,"f"));if(!I)throw new Un("This identity has expired due this application's security policy. Please refresh your authentication.");const v=Be.from(e),g=(I==null?void 0:I.getPrincipal())||Be.anonymous(),k={request_type:"query",canister_id:v,method_name:r.methodName,arg:r.arg,sender:g,ingress_expiry:new An(ce(this,ar,"f")*Rn)},C=Qs(k);E=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ce(this,bt,"f")?{Authorization:"Basic "+btoa(ce(this,bt,"f"))}:{})},endpoint:"read",body:k}),E=await(I==null?void 0:I.transformRequest(E));const Z=qi(E.body),Y={canister:v.toText(),ecid:w,transformedRequest:E,body:Z,requestId:C,backoff:p,tries:0},q=async()=>({requestDetails:k,query:await ce(this,nt,"m",Ic).call(this,Y)}),re=async()=>{if(!ce(this,lr,"f"))return;const $=ce(this,cr,"f").get(w.toString());return $||(await this.fetchSubnetKeys(w.toString()),ce(this,cr,"f").get(w.toString()))};try{const[$,L]=await Promise.all([q(),re()]);T=$;const{requestDetails:K,query:Q}=T,D=Object.assign(Object.assign({},Q),{requestDetails:K});if(this.log.print("Query response:",D),!ce(this,lr,"f"))return D;try{return ce(this,Qn,"f").call(this,D,L)}catch{this.log.warn("Query response verification failed. Retrying with fresh subnet keys."),ce(this,cr,"f").delete(e.toString()),await this.fetchSubnetKeys(w.toString());const he=ce(this,cr,"f").get(e.toString());if(!he)throw new Rt("Invalid signature from replica signed query: no matching node key found.");return ce(this,Qn,"f").call(this,D,he)}}catch($){const L=`Error while making call: ${(i=$.message)!==null&&i!==void 0?i:String($)}`,K=new Xf(L,$,String(C),Xe((o=E==null?void 0:E.body)===null||o===void 0?void 0:o.sender_pubkey),Xe((f=E==null?void 0:E.body)===null||f===void 0?void 0:f.sender_sig),String((u=E==null?void 0:E.body)===null||u===void 0?void 0:u.content.ingress_expiry._value));throw this.log.error(L,K),K}}async createReadStateRequest(e,r){await ce(this,nt,"m",ur).call(this);const n=await(r!==void 0?await r:await ce(this,Nt,"f"));if(!n)throw new Un("This identity has expired due this application's security policy. Please refresh your authentication.");const i=(n==null?void 0:n.getPrincipal())||Be.anonymous(),o=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ce(this,bt,"f")?{Authorization:"Basic "+btoa(ce(this,bt,"f"))}:{})},endpoint:"read_state",body:{request_type:"read_state",paths:e.paths,sender:i,ingress_expiry:new An(ce(this,ar,"f")*Rn)}});return n==null?void 0:n.transformRequest(o)}async readState(e,r,n,i){var o,f,u,p;function w(k){for(const C of k.paths){const[Z,Y]=C,q=new TextEncoder().encode("request_status");if(hi(Z,q))return Y}}const E=w(r);await ce(this,nt,"m",ur).call(this);const T=typeof e=="string"?Be.fromText(e):e,I=i??await this.createReadStateRequest(r,n),v=qi(I.body);this.log.print(`fetching "/api/v2/canister/${T}/read_state" with request:`,I);const g=ce(this,or,"f").call(this);try{const k=await ce(this,nt,"m",Jn).call(this,{request:()=>ce(this,Pt,"f").call(this,""+new URL(`/api/v2/canister/${T.toString()}/read_state`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,Ur,"f")),I.request),{body:v})),backoff:g,tries:0});if(!k.ok)throw new Error(`Server returned an error:
  Code: ${k.status} (${k.statusText})
  Body: ${await k.text()}
`);const C=Vt(await k.arrayBuffer());this.log.print("Read state response:",C);const Z=await this.parseTimeFromResponse(C);return Z>0&&(this.log.print("Read state response time:",Z),De(this,Lr,Z,"f")),C}catch(k){const C=`Caught exception while attempting to read state: ${(o=k.message)!==null&&o!==void 0?o:String(k)}`,Z=new Jf(C,k,String(E),Xe((f=I==null?void 0:I.body)===null||f===void 0?void 0:f.sender_pubkey),Xe((u=I==null?void 0:I.body)===null||u===void 0?void 0:u.sender_sig),String((p=I==null?void 0:I.body)===null||p===void 0?void 0:p.content.ingress_expiry._value));throw this.log.error(C,Z),Z}}async parseTimeFromResponse(e){let r;if(e.certificate){const n=Vt(e.certificate);if(n&&"tree"in n)r=n.tree;else throw new Error("Could not decode time from response");const i=qr(["time"],r);if(i.status!==ze.Found)throw new Error("Time was not found in the response or was not in its expected format.");if(!(i.value instanceof ArrayBuffer)&&!ArrayBuffer.isView(i))throw new Error("Time was not found in the response or was not in its expected format.");const o=Rs(Yo(i.value));return this.log.print("Time from response:",o),this.log.print("Time from response in milliseconds:",Number(o)),Number(o)}else this.log.warn("No certificate found in response");return 0}async syncTime(e){await ce(this,nt,"m",ur).call(this);const r=await _u(()=>Promise.resolve().then(()=>q0),void 0),n=Date.now();try{e||this.log.print("Syncing time with the IC. No canisterId provided, so falling back to ryjl3-tyaaa-aaaaa-aaaba-cai");const i=Or.createSync({identity:new Ds,host:this.host.toString(),fetch:ce(this,Pt,"f"),retryTimes:0}),f=(await r.request({canisterId:e??Be.from("ryjl3-tyaaa-aaaaa-aaaba-cai"),agent:i,paths:["time"]})).get("time");f&&(De(this,Tr,Number(f)-Number(n),"f"),this.log.notify({message:`Syncing time: offset of ${ce(this,Tr,"f")}`,level:"info"}))}catch(i){this.log.error("Caught exception while attempting to sync time",i)}}async status(){const e=ce(this,bt,"f")?{Authorization:"Basic "+btoa(ce(this,bt,"f"))}:{};this.log.print('fetching "/api/v2/status"');const r=ce(this,or,"f").call(this),n=await ce(this,nt,"m",Jn).call(this,{backoff:r,request:()=>ce(this,Pt,"f").call(this,""+new URL("/api/v2/status",this.host),Object.assign({headers:e},ce(this,Ur,"f"))),tries:0});return Vt(await n.arrayBuffer())}async fetchRootKey(){let e;return ce(this,sr,"f")?e=await ce(this,sr,"f"):(De(this,sr,new Promise((r,n)=>{this.status().then(i=>{const o=i.root_key;this.rootKey=o,r(o)}).catch(n)}),"f"),e=await ce(this,sr,"f")),De(this,sr,null,"f"),e}invalidateIdentity(){De(this,Nt,null,"f")}replaceIdentity(e){De(this,Nt,Promise.resolve(e),"f")}async fetchSubnetKeys(e){await ce(this,nt,"m",ur).call(this);const r=Be.from(e),i=(await wc({canisterId:r,paths:["subnet"],agent:this})).get("subnet");if(i&&typeof i=="object"&&"nodeKeys"in i)return ce(this,cr,"f").set(r.toText(),i),i}_transform(e){let r=Promise.resolve(e);if(e.endpoint==="call")for(const n of ce(this,Nr,"f"))r=r.then(i=>n(i).then(o=>o||i));else for(const n of ce(this,Sr,"f"))r=r.then(i=>n(i).then(o=>o||i));return r}}sr=new WeakMap,Fr=new WeakMap,Nt=new WeakMap,Pt=new WeakMap,Ur=new WeakMap,Kr=new WeakMap,Tr=new WeakMap,bt=new WeakMap,_t=new WeakMap,or=new WeakMap,ar=new WeakMap,Lr=new WeakMap,Sr=new WeakMap,Nr=new WeakMap,cr=new WeakMap,lr=new WeakMap,Qn=new WeakMap,nt=new WeakSet,Ic=async function t(e){var r,n;const{ecid:i,transformedRequest:o,body:f,requestId:u,backoff:p,tries:w}=e,E=w===0?0:p.next();if(this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with tries:`,{tries:w,backoff:p,delay:E}),E===null)throw new Ce(`Timestamp failed to pass the watermark after retrying the configured ${ce(this,_t,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);E>0&&await new Promise(g=>setTimeout(g,E));let T;try{this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with request:`,o);const g=await ce(this,Pt,"f").call(this,""+new URL(`/api/v2/canister/${i.toString()}/query`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,Ur,"f")),o.request),{body:f}));if(g.status===200){const k=Vt(await g.arrayBuffer());T=Object.assign(Object.assign({},k),{httpDetails:{ok:g.ok,status:g.status,statusText:g.statusText,headers:Yr(g.headers)},requestId:u})}else throw new Vi(`Gateway returned an error:
  Code: ${g.status} (${g.statusText})
  Body: ${await g.text()}
`,{ok:g.ok,status:g.status,statusText:g.statusText,headers:Yr(g.headers)})}catch(g){if(w<ce(this,_t,"f"))return this.log.warn(`Caught exception while attempting to make query:
  ${g}
  Retrying query.`),await ce(this,nt,"m",t).call(this,Object.assign(Object.assign({},e),{tries:w+1}));throw g}const I=(n=(r=T.signatures)===null||r===void 0?void 0:r[0])===null||n===void 0?void 0:n.timestamp;if(!ce(this,lr,"f"))return T;if(!I)throw new Error("Timestamp not found in query response. This suggests a malformed or malicious response.");const v=Number(BigInt(I)/BigInt(1e6));if(this.log.print("watermark and timestamp",{waterMark:this.waterMark,timestamp:v}),Number(this.waterMark)>v){const g=new Ce("Timestamp is below the watermark. Retrying query.");if(this.log.error("Timestamp is below",g,{timestamp:I,waterMark:this.waterMark}),w<ce(this,_t,"f"))return await ce(this,nt,"m",t).call(this,Object.assign(Object.assign({},e),{tries:w+1}));throw new Ce(`Timestamp failed to pass the watermark after retrying the configured ${ce(this,_t,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`)}return T},Jn=async function t(e){const{request:r,backoff:n,tries:i}=e,o=i===0?0:n.next();if(o===null)throw new Ce(`Timestamp failed to pass the watermark after retrying the configured ${ce(this,_t,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);o>0&&await new Promise(w=>setTimeout(w,o));let f;try{f=await r()}catch(w){if(ce(this,_t,"f")>i)return this.log.warn(`Caught exception while attempting to make request:
  ${w}
  Retrying request.`),await ce(this,nt,"m",t).call(this,{request:r,backoff:n,tries:i+1});throw w}if(f.ok)return f;const u=await f.clone().text(),p=`Server returned an error:
  Code: ${f.status} (${f.statusText})
  Body: ${u}
`;if(f.status===404&&f.url.includes("api/v3"))throw new Vi("v3 api not supported. Fall back to v2",{ok:f.ok,status:f.status,statusText:f.statusText,headers:Yr(f.headers)});if(i<ce(this,_t,"f"))return await ce(this,nt,"m",t).call(this,{request:r,backoff:n,tries:i+1});throw new Vi(p,{ok:f.ok,status:f.status,statusText:f.statusText,headers:Yr(f.headers)})},ur=async function(){if(!this.rootKey)if(this.rootKey===null&&ce(this,Fr,"f"))await this.fetchRootKey();else throw new Ce(`Invalid root key detected. The root key for this agent is ${this.rootKey} and the shouldFetchRootKey value is set to ${ce(this,Fr,"f")}. The root key should only be unknown if you are in local development. Otherwise you should avoid fetching and use the default IC Root Key or the known root key of your environment.`)};var Io;(function(t){t.Error="err",t.GetPrincipal="gp",t.GetPrincipalResponse="gpr",t.Query="q",t.QueryResponse="qr",t.Call="c",t.CallResponse="cr",t.ReadState="rs",t.ReadStateResponse="rsr",t.Status="s",t.StatusResponse="sr"})(Io||(Io={}));function Ro(){const t=typeof window>"u"?typeof global>"u"?typeof self>"u"?void 0:self.ic.agent:global.ic.agent:window.ic.agent;if(!t)throw new Error("No Agent could be found.");return t}const Gl=5*60*1e3;function Rc(){return Wl(jl(Hl(),1e3),Yl(1e3,1.2),zl(Gl))}function Hl(){let t=!0;return async()=>t?(t=!1,!0):!1}function jl(t,e){return async(r,n,i)=>{if(await t(r,n,i))return new Promise(o=>setTimeout(o,e))}}function zl(t){const e=Date.now()+t;return async(r,n,i)=>{if(Date.now()>e)throw new Error(`Request timed out after ${t} msec:
  Request ID: ${Xe(n)}
  Request status: ${i}
`)}}function Yl(t,e){let r=t;return()=>new Promise(n=>setTimeout(()=>{r*=e,n()},r))}function Wl(...t){return async(e,r,n)=>{for(const i of t)await i(e,r,n)}}async function Uc(t,e,r,n=Rc(),i,o){var f;const u=[new TextEncoder().encode("request_status"),r],p=i??await((f=t.createReadStateRequest)===null||f===void 0?void 0:f.call(t,{paths:[u]})),w=await t.readState(e,{paths:[u]},void 0,p);if(t.rootKey==null)throw new Error("Agent root key not initialized before polling");const E=await pr.create({certificate:w.certificate,rootKey:t.rootKey,canisterId:e,blsVerify:o}),T=pt(E.lookup([...u,new TextEncoder().encode("status")]));let I;switch(typeof T>"u"?I=Mt.Unknown:I=new TextDecoder().decode(T),I){case Mt.Replied:return{reply:pt(E.lookup([...u,"reply"])),certificate:E};case Mt.Received:case Mt.Unknown:case Mt.Processing:return await n(e,r,I),Uc(t,e,r,n,p,o);case Mt.Rejected:{const v=new Uint8Array(pt(E.lookup([...u,"reject_code"])))[0],g=new TextDecoder().decode(pt(E.lookup([...u,"reject_message"])));throw new Error(`Call was rejected:
  Request ID: ${Xe(r)}
  Reject code: ${v}
  Reject text: ${g}
`)}case Mt.Done:throw new Error(`Call was marked as done but we never saw the reply:
  Request ID: ${Xe(r)}
`)}throw new Error("unreachable")}const Zl=({IDL:t})=>{const e=t.Variant({mainnet:t.Null,testnet:t.Null}),r=t.Text,n=t.Record({network:e,address:r,min_confirmations:t.Opt(t.Nat32)}),i=t.Nat64,o=i,f=t.Nat32,u=t.Record({start_height:f,end_height:t.Opt(f),network:e}),p=t.Vec(t.Nat8),w=t.Record({tip_height:f,block_headers:t.Vec(p)}),E=t.Record({network:e}),T=t.Nat64,I=t.Vec(T),v=t.Record({network:e,filter:t.Opt(t.Variant({page:t.Vec(t.Nat8),min_confirmations:t.Nat32})),address:r}),g=t.Vec(t.Nat8),k=t.Record({txid:t.Vec(t.Nat8),vout:t.Nat32}),C=t.Record({height:t.Nat32,value:i,outpoint:k}),Z=t.Record({next_page:t.Opt(t.Vec(t.Nat8)),tip_height:f,tip_block_hash:g,utxos:t.Vec(C)}),Y=t.Record({transaction:t.Vec(t.Nat8),network:e}),q=t.Principal,re=t.Record({canister_id:q,num_requested_changes:t.Opt(t.Nat64)}),$=t.Variant({from_user:t.Record({user_id:t.Principal}),from_canister:t.Record({canister_version:t.Opt(t.Nat64),canister_id:t.Principal})}),L=t.Vec(t.Nat8),K=t.Variant({creation:t.Record({controllers:t.Vec(t.Principal)}),code_deployment:t.Record({mode:t.Variant({reinstall:t.Null,upgrade:t.Null,install:t.Null}),module_hash:t.Vec(t.Nat8)}),load_snapshot:t.Record({canister_version:t.Nat64,taken_at_timestamp:t.Nat64,snapshot_id:L}),controllers_change:t.Record({controllers:t.Vec(t.Principal)}),code_uninstall:t.Null}),Q=t.Record({timestamp_nanos:t.Nat64,canister_version:t.Nat64,origin:$,details:K}),D=t.Record({controllers:t.Vec(t.Principal),module_hash:t.Opt(t.Vec(t.Nat8)),recent_changes:t.Vec(Q),total_num_changes:t.Nat64}),J=t.Record({canister_id:q}),he=t.Variant({controllers:t.Null,public:t.Null,allowed_viewers:t.Vec(t.Principal)}),le=t.Record({freezing_threshold:t.Nat,controllers:t.Vec(t.Principal),reserved_cycles_limit:t.Nat,log_visibility:he,wasm_memory_limit:t.Nat,memory_allocation:t.Nat,compute_allocation:t.Nat}),N=t.Record({status:t.Variant({stopped:t.Null,stopping:t.Null,running:t.Null}),memory_size:t.Nat,cycles:t.Nat,settings:le,query_stats:t.Record({response_payload_bytes_total:t.Nat,num_instructions_total:t.Nat,num_calls_total:t.Nat,request_payload_bytes_total:t.Nat}),idle_cycles_burned_per_day:t.Nat,module_hash:t.Opt(t.Vec(t.Nat8)),reserved_cycles:t.Nat}),O=t.Record({canister_id:q}),W=t.Record({freezing_threshold:t.Opt(t.Nat),controllers:t.Opt(t.Vec(t.Principal)),reserved_cycles_limit:t.Opt(t.Nat),log_visibility:t.Opt(he),wasm_memory_limit:t.Opt(t.Nat),memory_allocation:t.Opt(t.Nat),compute_allocation:t.Opt(t.Nat)}),H=t.Record({settings:t.Opt(W),sender_canister_version:t.Opt(t.Nat64)}),G=t.Record({canister_id:q}),X=t.Record({canister_id:q}),ie=t.Record({canister_id:q,snapshot_id:L}),we=t.Record({canister_id:q}),oe=t.Variant({secp256k1:t.Null}),fe=t.Record({key_id:t.Record({name:t.Text,curve:oe}),canister_id:t.Opt(q),derivation_path:t.Vec(t.Vec(t.Nat8))}),ee=t.Record({public_key:t.Vec(t.Nat8),chain_code:t.Vec(t.Nat8)}),m=t.Record({canister_id:q}),se=t.Record({idx:t.Nat64,timestamp_nanos:t.Nat64,content:t.Vec(t.Nat8)}),ue=t.Record({canister_log_records:t.Vec(se)}),de=t.Record({value:t.Text,name:t.Text}),te=t.Record({status:t.Nat,body:t.Vec(t.Nat8),headers:t.Vec(de)}),ae=t.Record({url:t.Text,method:t.Variant({get:t.Null,head:t.Null,post:t.Null}),max_response_bytes:t.Opt(t.Nat64),body:t.Opt(t.Vec(t.Nat8)),transform:t.Opt(t.Record({function:t.Func([t.Record({context:t.Vec(t.Nat8),response:te})],[te],["query"]),context:t.Vec(t.Nat8)})),headers:t.Vec(de)}),b=t.Variant({reinstall:t.Null,upgrade:t.Opt(t.Record({wasm_memory_persistence:t.Opt(t.Variant({keep:t.Null,replace:t.Null})),skip_pre_upgrade:t.Opt(t.Bool)})),install:t.Null}),x=t.Record({hash:t.Vec(t.Nat8)}),B=t.Record({arg:t.Vec(t.Nat8),wasm_module_hash:t.Vec(t.Nat8),mode:b,chunk_hashes_list:t.Vec(x),target_canister:q,store_canister:t.Opt(q),sender_canister_version:t.Opt(t.Nat64)}),P=t.Vec(t.Nat8),U=t.Record({arg:t.Vec(t.Nat8),wasm_module:P,mode:b,canister_id:q,sender_canister_version:t.Opt(t.Nat64)}),M=t.Record({canister_id:q}),h=t.Record({id:L,total_size:t.Nat64,taken_at_timestamp:t.Nat64}),s=t.Vec(h),a=t.Record({canister_id:q,sender_canister_version:t.Opt(t.Nat64),snapshot_id:L}),y=t.Record({start_at_timestamp_nanos:t.Nat64,subnet_id:t.Principal}),_=t.Record({num_block_failures_total:t.Nat64,node_id:t.Principal,num_blocks_proposed_total:t.Nat64}),S=t.Vec(t.Record({timestamp_nanos:t.Nat64,node_metrics:t.Vec(_)})),V=t.Record({settings:t.Opt(W),specified_id:t.Opt(q),amount:t.Opt(t.Nat),sender_canister_version:t.Opt(t.Nat64)}),ne=t.Record({canister_id:q}),pe=t.Record({canister_id:q,amount:t.Nat}),ye=t.Vec(t.Nat8),xe=t.Variant({ed25519:t.Null,bip340secp256k1:t.Null}),d=t.Record({key_id:t.Record({algorithm:xe,name:t.Text}),canister_id:t.Opt(q),derivation_path:t.Vec(t.Vec(t.Nat8))}),c=t.Record({public_key:t.Vec(t.Nat8),chain_code:t.Vec(t.Nat8)}),l=t.Record({key_id:t.Record({name:t.Text,curve:oe}),derivation_path:t.Vec(t.Vec(t.Nat8)),message_hash:t.Vec(t.Nat8)}),A=t.Record({signature:t.Vec(t.Nat8)}),F=t.Variant({bip341:t.Record({merkle_root_hash:t.Vec(t.Nat8)})}),z=t.Record({aux:t.Opt(F),key_id:t.Record({algorithm:xe,name:t.Text}),derivation_path:t.Vec(t.Vec(t.Nat8)),message:t.Vec(t.Nat8)}),j=t.Record({signature:t.Vec(t.Nat8)}),_e=t.Record({canister_id:q}),ve=t.Record({canister_id:q}),Ee=t.Record({canister_id:q}),be=t.Vec(x),Re=t.Record({subnet_id:t.Principal}),Pe=t.Record({replica_version:t.Text}),vi=t.Record({replace_snapshot:t.Opt(L),canister_id:q}),Bi=h,Ti=t.Record({canister_id:q,sender_canister_version:t.Opt(t.Nat64)}),Si=t.Record({canister_id:t.Principal,settings:W,sender_canister_version:t.Opt(t.Nat64)}),Ni=t.Record({chunk:t.Vec(t.Nat8),canister_id:t.Principal}),Ht=x;return t.Service({bitcoin_get_balance:t.Func([n],[o],[]),bitcoin_get_block_headers:t.Func([u],[w],[]),bitcoin_get_current_fee_percentiles:t.Func([E],[I],[]),bitcoin_get_utxos:t.Func([v],[Z],[]),bitcoin_send_transaction:t.Func([Y],[],[]),canister_info:t.Func([re],[D],[]),canister_status:t.Func([J],[N],[]),clear_chunk_store:t.Func([O],[],[]),create_canister:t.Func([H],[G],[]),delete_canister:t.Func([X],[],[]),delete_canister_snapshot:t.Func([ie],[],[]),deposit_cycles:t.Func([we],[],[]),ecdsa_public_key:t.Func([fe],[ee],[]),fetch_canister_logs:t.Func([m],[ue],["query"]),http_request:t.Func([ae],[te],[]),install_chunked_code:t.Func([B],[],[]),install_code:t.Func([U],[],[]),list_canister_snapshots:t.Func([M],[s],[]),load_canister_snapshot:t.Func([a],[],[]),node_metrics_history:t.Func([y],[S],[]),provisional_create_canister_with_cycles:t.Func([V],[ne],[]),provisional_top_up_canister:t.Func([pe],[],[]),raw_rand:t.Func([],[ye],[]),schnorr_public_key:t.Func([d],[c],[]),sign_with_ecdsa:t.Func([l],[A],[]),sign_with_schnorr:t.Func([z],[j],[]),start_canister:t.Func([_e],[],[]),stop_canister:t.Func([ve],[],[]),stored_chunks:t.Func([Ee],[be],[]),subnet_info:t.Func([Re],[Pe],[]),take_canister_snapshot:t.Func([vi],[Bi],[]),uninstall_code:t.Func([Ti],[],[]),update_settings:t.Func([Si],[],[]),upload_chunk:t.Func([Ni],[Ht],[])})};class Oc extends Ce{constructor(e,r,n,i){super(["Call failed:",`  Canister: ${e.toText()}`,`  Method: ${r} (${n})`,...Object.getOwnPropertyNames(i).map(o=>`  "${o}": ${JSON.stringify(i[o])}`)].join(`
`)),this.canisterId=e,this.methodName=r,this.type=n,this.props=i}}class Kl extends Oc{constructor(e,r,n){var i;super(e,r,"query",{Status:n.status,Code:(i=Ji[n.reject_code])!==null&&i!==void 0?i:`Unknown Code "${n.reject_code}"`,Message:n.reject_message}),this.result=n}}class Uo extends Oc{constructor(e,r,n,i,o,f,u){super(e,r,"update",Object.assign({"Request ID":Xe(n)},i.body?Object.assign(Object.assign({},u?{"Error code":u}:{}),{"Reject code":String(o),"Reject message":f}):{"HTTP status code":i.status.toString(),"HTTP status text":i.statusText})),this.requestId=n,this.response=i,this.reject_code=o,this.reject_message=f,this.error_code=u}}const dt=Symbol.for("ic-agent-metadata");class Ai{constructor(e){this[dt]=Object.freeze(e)}static agentOf(e){return e[dt].config.agent}static interfaceOf(e){return e[dt].service}static canisterIdOf(e){return Be.from(e[dt].config.canisterId)}static async install(e,r){const n=e.mode===void 0?{install:null}:e.mode,i=e.arg?[...new Uint8Array(e.arg)]:[],o=[...new Uint8Array(e.module)],f=typeof r.canisterId=="string"?Be.fromText(r.canisterId):r.canisterId;await Oo(r).install_code({mode:n,arg:i,wasm_module:o,canister_id:f,sender_canister_version:[]})}static async createCanister(e,r){function n(o){return[{controllers:o.controllers?[o.controllers]:[],compute_allocation:o.compute_allocation?[o.compute_allocation]:[],freezing_threshold:o.freezing_threshold?[o.freezing_threshold]:[],memory_allocation:o.memory_allocation?[o.memory_allocation]:[],reserved_cycles_limit:[],log_visibility:[],wasm_memory_limit:[]}]}const{canister_id:i}=await Oo(e||{}).provisional_create_canister_with_cycles({amount:[],settings:n(r||{}),specified_id:[],sender_canister_version:[]});return i}static async createAndInstallCanister(e,r,n){const i=await this.createCanister(n);return await this.install(Object.assign({},r),Object.assign(Object.assign({},n),{canisterId:i})),this.createActor(e,Object.assign(Object.assign({},n),{canisterId:i}))}static createActorClass(e,r){const n=e({IDL:Zu});class i extends Ai{constructor(f){if(!f.canisterId)throw new Ce(`Canister ID is required, but received ${typeof f.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);const u=typeof f.canisterId=="string"?Be.fromText(f.canisterId):f.canisterId;super({config:Object.assign(Object.assign(Object.assign({},Fc),f),{canisterId:u}),service:n});for(const[p,w]of n._fields)r!=null&&r.httpDetails&&w.annotations.push(ys),r!=null&&r.certificate&&w.annotations.push($c),this[p]=Ll(this,p,w,f.blsVerify)}}return i}static createActor(e,r){if(!r.canisterId)throw new Ce(`Canister ID is required, but received ${typeof r.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);return new(this.createActorClass(e))(r)}static createActorWithHttpDetails(e,r){return new(this.createActorClass(e,{httpDetails:!0}))(r)}static createActorWithExtendedDetails(e,r,n={httpDetails:!0,certificate:!0}){return new(this.createActorClass(e,n))(r)}}function vr(t,e){const r=ia(t,ko.Buffer.from(e));switch(r.length){case 0:return;case 1:return r[0];default:return r}}const Fc={pollingStrategyFactory:Rc},ys="http-details",$c="certificate";function Ll(t,e,r,n){let i;r.annotations.includes("query")||r.annotations.includes("composite_query")?i=async(f,...u)=>{var p,w;f=Object.assign(Object.assign({},f),(w=(p=t[dt].config).queryTransform)===null||w===void 0?void 0:w.call(p,e,u,Object.assign(Object.assign({},t[dt].config),f)));const E=f.agent||t[dt].config.agent||Ro(),T=Be.from(f.canisterId||t[dt].config.canisterId),I=Di(r.argTypes,u),v=await E.query(T,{methodName:e,arg:I,effectiveCanisterId:f.effectiveCanisterId}),g=Object.assign(Object.assign({},v.httpDetails),{requestDetails:v.requestDetails});switch(v.status){case"rejected":throw new Kl(T,e,v);case"replied":return r.annotations.includes(ys)?{httpDetails:g,result:vr(r.retTypes,v.reply.arg)}:vr(r.retTypes,v.reply.arg)}}:i=async(f,...u)=>{var p,w;f=Object.assign(Object.assign({},f),(w=(p=t[dt].config).callTransform)===null||w===void 0?void 0:w.call(p,e,u,Object.assign(Object.assign({},t[dt].config),f)));const E=f.agent||t[dt].config.agent||Ro(),{canisterId:T,effectiveCanisterId:I,pollingStrategyFactory:v}=Object.assign(Object.assign(Object.assign({},Fc),t[dt].config),f),g=Be.from(T),k=I!==void 0?Be.from(I):g,C=Di(r.argTypes,u),{requestId:Z,response:Y,requestDetails:q}=await E.call(g,{methodName:e,arg:C,effectiveCanisterId:k});let re,$;if(Y.body&&Y.body.certificate){if(E.rootKey==null)throw new Error("Agent is missing root key");const D=Y.body.certificate;$=await pr.create({certificate:ri(D),rootKey:E.rootKey,canisterId:Be.from(T),blsVerify:n});const J=[new TextEncoder().encode("request_status"),Z];switch(new TextDecoder().decode(pt($.lookup([...J,"status"])))){case"replied":re=pt($.lookup([...J,"reply"]));break;case"rejected":{const le=new Uint8Array(pt($.lookup([...J,"reject_code"])))[0],N=new TextDecoder().decode(pt($.lookup([...J,"reject_message"]))),O=pt($.lookup([...J,"error_code"])),W=O?new TextDecoder().decode(O):void 0;throw new Uo(g,e,Z,Y,le,N,W)}}}else if(Y.body&&"reject_message"in Y.body){const{reject_code:D,reject_message:J,error_code:he}=Y.body;throw new Uo(g,e,Z,Y,D,J,he)}if(Y.status===202){const D=v(),J=await Uc(E,k,Z,D,n);$=J.certificate,re=J.reply}const L=r.annotations.includes(ys),K=r.annotations.includes($c),Q=Object.assign(Object.assign({},Y),{requestDetails:q});if(re!==void 0)return L&&K?{httpDetails:Q,certificate:$,result:vr(r.retTypes,re)}:K?{certificate:$,result:vr(r.retTypes,re)}:L?{httpDetails:Q,result:vr(r.retTypes,re)}:vr(r.retTypes,re);if(r.retTypes.length===0)return L?{httpDetails:Y,result:void 0}:void 0;throw new Error(`Call was returned undefined, but type [${r.retTypes.join(",")}].`)};const o=(...f)=>i({},...f);return o.withOptions=f=>(...u)=>i(f,...u),o}function Oo(t){function e(r,n){if(t.effectiveCanisterId)return{effectiveCanisterId:Be.from(t.effectiveCanisterId)};const i=n[0];let o=Be.fromHex("");return i&&typeof i=="object"&&i.target_canister&&r==="install_chunked_code"&&(o=Be.from(i.target_canister)),i&&typeof i=="object"&&i.canister_id&&(o=Be.from(i.canister_id)),{effectiveCanisterId:o}}return Ai.createActor(Zl,Object.assign(Object.assign(Object.assign({},t),{canisterId:Be.fromHex("")}),{callTransform:e,queryTransform:e}))}const Xl=({IDL:t})=>t.Service({greet:t.Func([t.Text],[t.Text],["query"])}),Jl="bw4dl-smaaa-aaaaa-qaacq-cai",Ql=(t,e={})=>{const r=e.agent||new Or({...e.agentOptions});return e.agent&&e.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),r.fetchRootKey().catch(n=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(n)}),Ai.createActor(Xl,{agent:r,canisterId:t,...e.actorOptions})},Dl=Ql(Jl),eh="/assets/logo2-037eb7ae.svg";var fi,un,gs;class th{constructor(){Ii(this,un);Os(this,"greeting","");Ii(this,fi,async e=>{e.preventDefault();const r=document.getElementById("name").value;this.greeting=await Dl.greet(r),Ri(this,un,gs).call(this)});Ri(this,un,gs).call(this)}}fi=new WeakMap,un=new WeakSet,gs=function(){let e=eu`
      <main>
        <img src="${eh}" alt="DFINITY logo" />
        <br />
        <br />
        <form action="#">
          <label for="name">Enter your name: &nbsp;</label>
          <input id="name" alt="Name" type="text" />
          <button type="submit">Click Me!</button>
        </form>
        <section id="greeting">${this.greeting}</section>
      </main>
    `;cu(e,document.getElementById("root")),document.querySelector("form").addEventListener("submit",$s(this,fi))};new th;
